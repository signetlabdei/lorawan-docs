

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Adding a New Module to ns-3 &#8212; Manual</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Creating Documentation" href="documentation.html" />
    <link rel="prev" title="Creating a new ns-3 model" href="new-models.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico" 
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>
      

  </head><body>
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0" width="100%">
      <tbody>
	<tr style="height: 56px;">
	  <td id="projectlogo">
	    <a id="ns3_home1"
	       href="http://www.nsnam.org/">
	       <img alt="ns-3 Logo"
		    src="_static/ns-3-inverted-notext-small.png"/>
	    </a>
	  </td>
	  <td id="projecttext">
	    <div id="projectbrief">A Discrete-Event Network Simulator</div>
	      <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
	  </td>
	      
	  <td id="ns3-menu">
	    <div class="menu">
	      <ul >
	        <li><a id="ns3_home2"
		       href="http://www.nsnam.org/"
		       >&nbsp;&nbsp;Home</a>
	        </li>
	        <li><span
		      onmouseover="mopen('mTuts')" 
		      onmouseout="mclosetime()"
			>Tutorials &nbsp;&#x25BC;</span>
		    <div id="mTuts" 
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_tut"
			 href="/docs/tutorial/html/index.html"
			  >English</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDocs')" 
		      onmouseout="mclosetime()"
			>Docs &nbsp;&nbsp;&nbsp;&#x25BC;</span>
		    <div id="mDocs"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_wiki"
			 href="http://www.nsnam.org/wiki"
			 >Wiki</a><br/>
		      <a id="ns3_man"
			 href="/docs/manual/html/index.html"
			 >Manual</a><br/>
		      <a id="ns3_mod"
			 href="/docs/models/html/index.html"
			 >Models</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDev')" 
		      onmouseout="mclosetime()"
			>Develop &#x25BC;</span>
		    <div id="mDev"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_api"
			 href="/docs/doxygen/html/index.html"
			 >API</a><br/>
		      <a id="ns3_bugs"
		       href="http://www.nsnam.org/bugzilla/">Bugs</a>
	        </li>
	      </ul>
	    </div>
	  </td>
	  <td id="projectsection">
	    <span style="margin-right:10px">Manual</span>
	  </td>
	</tr>
      </tbody>
    </table>
    <script  type="text/javascript">ns3_write_links()</script>
  </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="documentation.html" title="Creating Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="new-models.html" title="Creating a new ns-3 model"
             accesskey="P">previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Manual</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="support.html" accesskey="U">Support</a><span class="navelem">&nbsp;</span></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="adding-a-new-module-to-ns3">
<h1>Adding a New Module to <em>ns-3</em><a class="headerlink" href="#adding-a-new-module-to-ns3" title="Permalink to this headline">¶</a></h1>
<p>When you have created a group of related classes, examples, and tests,
they can be combined together into an <em>ns-3</em> module so that they can be
used with existing <em>ns-3</em> modules and by other researchers.</p>
<p>This chapter walks you through the steps necessary to add a new module
to <em>ns-3</em>.</p>
<div class="section" id="step-0-module-layout">
<span id="step-0"></span><h2>Step 0 - Module Layout<a class="headerlink" href="#step-0-module-layout" title="Permalink to this headline">¶</a></h2>
<p>All modules can be found in the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory.  Each module can be
found in a directory that has the same name as the module.  For
example, the <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> module can be found here: <code class="docutils literal notranslate"><span class="pre">src/spectrum</span></code>.
We’ll be quoting from the <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> module for illustration.</p>
<p>A prototypical module has the following directory structure and
required files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>src/
  module-name/
    bindings/
    doc/
    examples/
      wscript
    helper/
    model/
    test/
      examples-to-run.py
    wscript
</pre></div>
</div>
<p>Not all directories will be present in each module.</p>
</div>
<div class="section" id="step-1-create-a-module-skeleton">
<h2>Step 1 - Create a Module Skeleton<a class="headerlink" href="#step-1-create-a-module-skeleton" title="Permalink to this headline">¶</a></h2>
<p>A python program is provided in the source directory that
will create a skeleton for a new module.  For the purposes
of this discussion we will assume that your new module
is called <code class="docutils literal notranslate"><span class="pre">new-module</span></code>.  From the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory, do the following
to create the new module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./create-module.py new-module
</pre></div>
</div>
<p>Next, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into <code class="docutils literal notranslate"><span class="pre">new-module</span></code>; you will find this directory layout:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ cd new-module
$ ls
doc examples  helper  model  test  wscript
</pre></div>
</div>
<p>In more detail, the <code class="docutils literal notranslate"><span class="pre">create-module.py</span></code> script will create the
directories as well as initial skeleton <code class="docutils literal notranslate"><span class="pre">wscript</span></code>, <code class="docutils literal notranslate"><span class="pre">.h</span></code>, <code class="docutils literal notranslate"><span class="pre">.cc</span></code>
and <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files.  The complete module with skeleton files looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>src/
  new-module/
    doc/
      new-module.rst
    examples/
      new-module-example.cc
      wscript
    helper/
      new-module-helper.cc
      new-module-helper.h
    model/
      new-module.cc
      new-module.h
    test/
      new-module-test-suite.cc
    wscript
</pre></div>
</div>
<p>(If required the <code class="docutils literal notranslate"><span class="pre">bindings/</span></code> directory listed in
<a class="reference internal" href="#step-0"><span class="std std-ref">Step-0</span></a> will be created automatically during
the build.)</p>
<p>We next walk through how to customize this module.  Informing <code class="docutils literal notranslate"><span class="pre">waf</span></code>
about the files which make up your module is done by editing the two
<code class="docutils literal notranslate"><span class="pre">wscript</span></code> files.  We will walk through the main steps in this chapter.</p>
<p>All <em>ns-3</em> modules depend on the <code class="docutils literal notranslate"><span class="pre">core</span></code> module and usually on
other modules.  This dependency is specified in the <code class="docutils literal notranslate"><span class="pre">wscript</span></code> file
(at the top level of the module, not the separate <code class="docutils literal notranslate"><span class="pre">wscript</span></code> file
in the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory!).  In the skeleton <code class="docutils literal notranslate"><span class="pre">wscript</span></code>
the call that will declare your new module to <code class="docutils literal notranslate"><span class="pre">waf</span></code> will look
like this (before editing):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">bld</span><span class="p">):</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">bld</span><span class="o">.</span><span class="n">create_ns3_module</span><span class="p">(</span><span class="s1">&#39;new-module&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;core&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Let’s assume that <code class="docutils literal notranslate"><span class="pre">new-module</span></code> depends on the <code class="docutils literal notranslate"><span class="pre">internet</span></code>,
<code class="docutils literal notranslate"><span class="pre">mobility</span></code>, and <code class="docutils literal notranslate"><span class="pre">aodv</span></code> modules.  After editing it the <code class="docutils literal notranslate"><span class="pre">wscript</span></code> file
should look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">bld</span><span class="p">):</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">bld</span><span class="o">.</span><span class="n">create_ns3_module</span><span class="p">(</span><span class="s1">&#39;new-module&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;internet&#39;</span><span class="p">,</span> <span class="s1">&#39;mobility&#39;</span><span class="p">,</span> <span class="s1">&#39;aodv&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Note that only first level module dependencies should be listed, which
is why we removed <code class="docutils literal notranslate"><span class="pre">core</span></code>; the <code class="docutils literal notranslate"><span class="pre">internet</span></code> module in turn depends on
<code class="docutils literal notranslate"><span class="pre">core</span></code>.</p>
<p>Your module will most likely have model source files.  Initial skeletons
(which will compile successfully) are created in <code class="docutils literal notranslate"><span class="pre">model/new-module.cc</span></code>
and <code class="docutils literal notranslate"><span class="pre">model/new-module.h</span></code>.</p>
<p>If your module will have helper source files, then they will go into
the <code class="docutils literal notranslate"><span class="pre">helper/</span></code> directory; again, initial skeletons are created
in that directory.</p>
<p>Finally, it is good practice to write tests and examples.  These will
almost certainly be required for new modules to be accepted into
the official <em>ns-3</em> source tree.  A skeleton
test suite and test case is created in the <code class="docutils literal notranslate"><span class="pre">test/</span></code> directory.
The skeleton test suite will contain the below constructor,
which declares a new unit test named <code class="docutils literal notranslate"><span class="pre">new-module</span></code>,
with a single test case consisting of the class <code class="docutils literal notranslate"><span class="pre">NewModuleTestCase1</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">NewModuleTestSuite</span><span class="o">::</span><span class="n">NewModuleTestSuite</span> <span class="p">()</span>
  <span class="o">:</span> <span class="n">TestSuite</span> <span class="p">(</span><span class="s">&quot;new-module&quot;</span><span class="p">,</span> <span class="n">UNIT</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">AddTestCase</span> <span class="p">(</span><span class="k">new</span> <span class="n">NewModuleTestCase1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-declare-source-files">
<h2>Step 3 - Declare Source Files<a class="headerlink" href="#step-3-declare-source-files" title="Permalink to this headline">¶</a></h2>
<p>The public header and source code files for your new module
should be specified in the <code class="docutils literal notranslate"><span class="pre">wscript</span></code> file by modifying it with
your text editor.</p>
<p>As an example, after declaring the <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> module,
the <code class="docutils literal notranslate"><span class="pre">src/spectrum/wscript</span></code> specifies the source code files
with the following list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">bld</span><span class="p">):</span>

  <span class="n">module</span> <span class="o">=</span> <span class="n">bld</span><span class="o">.</span><span class="n">create_ns3_module</span><span class="p">(</span><span class="s1">&#39;spectrum&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;internet&#39;</span><span class="p">,</span> <span class="s1">&#39;propagation&#39;</span><span class="p">,</span> <span class="s1">&#39;antenna&#39;</span><span class="p">,</span> <span class="s1">&#39;applications&#39;</span><span class="p">])</span>

  <span class="n">module</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">&#39;model/spectrum-model.cc&#39;</span><span class="p">,</span>
      <span class="s1">&#39;model/spectrum-value.cc&#39;</span><span class="p">,</span>
            <span class="o">.</span>
            <span class="o">.</span>
            <span class="o">.</span>
      <span class="s1">&#39;model/microwave-oven-spectrum-value-helper.cc&#39;</span><span class="p">,</span>
      <span class="s1">&#39;helper/spectrum-helper.cc&#39;</span><span class="p">,</span>
      <span class="s1">&#39;helper/adhoc-aloha-noack-ideal-phy-helper.cc&#39;</span><span class="p">,</span>
      <span class="s1">&#39;helper/waveform-generator-helper.cc&#39;</span><span class="p">,</span>
      <span class="s1">&#39;helper/spectrum-analyzer-helper.cc&#39;</span><span class="p">,</span>
      <span class="p">]</span>
</pre></div>
</div>
<p>The objects resulting from compiling these sources will be assembled
into a link library, which will be linked to any programs relying on this
module.</p>
<p>But how do such programs learn the public API of our new module?  Read on!</p>
</div>
<div class="section" id="step-4-declare-public-header-files">
<h2>Step 4 - Declare Public Header Files<a class="headerlink" href="#step-4-declare-public-header-files" title="Permalink to this headline">¶</a></h2>
<p>The header files defining the public API of your model and helpers
also should be specified in the <code class="docutils literal notranslate"><span class="pre">wscript</span></code> file.</p>
<p>Continuing with the <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> model illustration,
the public header files are specified with the following stanza.
(Note that the argument to the <code class="docutils literal notranslate"><span class="pre">bld</span></code> function tells
<code class="docutils literal notranslate"><span class="pre">waf</span></code> to install this module’s headers with the other <em>ns-3</em> headers):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">headers</span> <span class="o">=</span> <span class="n">bld</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="s1">&#39;ns3header&#39;</span><span class="p">)</span>

<span class="n">headers</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="s1">&#39;spectrum&#39;</span>

<span class="n">headers</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;model/spectrum-model.h&#39;</span><span class="p">,</span>
    <span class="s1">&#39;model/spectrum-value.h&#39;</span><span class="p">,</span>
           <span class="o">.</span>
           <span class="o">.</span>
           <span class="o">.</span>
    <span class="s1">&#39;model/microwave-oven-spectrum-value-helper.h&#39;</span><span class="p">,</span>
    <span class="s1">&#39;helper/spectrum-helper.h&#39;</span><span class="p">,</span>
    <span class="s1">&#39;helper/adhoc-aloha-noack-ideal-phy-helper.h&#39;</span><span class="p">,</span>
    <span class="s1">&#39;helper/waveform-generator-helper.h&#39;</span><span class="p">,</span>
    <span class="s1">&#39;helper/spectrum-analyzer-helper.h&#39;</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Headers made public in this way will be accessible to users of your model
with include statements like</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;ns3/spectrum-model.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>Headers used strictly internally in your implementation should not
be included here.  They are still accessible to your implementation by
include statements like</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;my-module-implementation.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="step-5-declare-tests">
<h2>Step 5 - Declare Tests<a class="headerlink" href="#step-5-declare-tests" title="Permalink to this headline">¶</a></h2>
<p>If your new module has tests, then they must be specified in your
<code class="docutils literal notranslate"><span class="pre">wscript</span></code> file by modifying it with your text editor.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> model tests are specified with the following stanza:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">module_test</span> <span class="o">=</span> <span class="n">bld</span><span class="o">.</span><span class="n">create_ns3_module_test_library</span><span class="p">(</span><span class="s1">&#39;spectrum&#39;</span><span class="p">)</span>

<span class="n">module_test</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;test/spectrum-interference-test.cc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;test/spectrum-value-test.cc&#39;</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="tests.html"><span class="doc">Tests</span></a> for more information on how to write test cases.</p>
</div>
<div class="section" id="step-6-declare-examples">
<h2>Step 6 - Declare Examples<a class="headerlink" href="#step-6-declare-examples" title="Permalink to this headline">¶</a></h2>
<p>If your new module has examples, then they must be specified in your
<code class="docutils literal notranslate"><span class="pre">examples/wscript</span></code> file.  (The skeleton top-level <code class="docutils literal notranslate"><span class="pre">wscript</span></code> will
recursively include <code class="docutils literal notranslate"><span class="pre">examples/wscript</span></code> only if the examples were
enabled at configure time.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> model defines it’s first example in
<code class="docutils literal notranslate"><span class="pre">src/spectrum/examples/wscript</span></code> with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="n">bld</span><span class="p">):</span>
  <span class="n">obj</span> <span class="o">=</span> <span class="n">bld</span><span class="o">.</span><span class="n">create_ns3_program</span><span class="p">(</span><span class="s1">&#39;adhoc-aloha-ideal-phy&#39;</span><span class="p">,</span>
                               <span class="p">[</span><span class="s1">&#39;spectrum&#39;</span><span class="p">,</span> <span class="s1">&#39;mobility&#39;</span><span class="p">])</span>
  <span class="n">obj</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;adhoc-aloha-ideal-phy.cc&#39;</span>
</pre></div>
</div>
<p>Note that the second argument to the function <code class="docutils literal notranslate"><span class="pre">create_ns3_program()</span></code>
is the list of modules that the program being created depends on; again,
don’t forget to include <code class="docutils literal notranslate"><span class="pre">new-module</span></code> in the list.  It’s best practice
to list only the direct module dependencies, and let <code class="docutils literal notranslate"><span class="pre">waf</span></code> deduce
the full dependency tree.</p>
<p>Occasionally, for clarity, you may want to split the implementation
for your example among several source files.  In this case, just
include those files as additional explicit sources of the example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">bld</span><span class="o">.</span><span class="n">create_ns3_program</span><span class="p">(</span><span class="s1">&#39;new-module-example&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">new</span><span class="o">-</span><span class="n">module</span><span class="p">])</span>
<span class="n">obj</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;new-module-example.cc&#39;</span><span class="p">,</span> <span class="s1">&#39;new-module-example-part.cc&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Python examples are specified using the following
function call.  Note that the second argument for the function
<code class="docutils literal notranslate"><span class="pre">register_ns3_script()</span></code> is the list of modules that the Python example
depends on:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bld</span><span class="o">.</span><span class="n">register_ns3_script</span><span class="p">(</span><span class="s1">&#39;new-module-example.py&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;new-module&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="step-7-examples-run-as-tests">
<h2>Step 7 - Examples Run as Tests<a class="headerlink" href="#step-7-examples-run-as-tests" title="Permalink to this headline">¶</a></h2>
<p>In addition to running explicit test code, the test framework
can also be instrumented to run full example programs to
try to catch regressions in the examples.  However, not all examples
are suitable for regression tests.  The file <code class="docutils literal notranslate"><span class="pre">test/examples-to-run.py</span></code>
controls the invocation of the examples when the test framework runs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spectrum</span></code> model examples run by <code class="docutils literal notranslate"><span class="pre">test.py</span></code> are specified in
<code class="docutils literal notranslate"><span class="pre">src/spectrum/test/examples-to-run.py</span></code> using the following
two lists of C++ and Python examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># A list of C++ examples to run in order to ensure that they remain</span>
<span class="c1"># buildable and runnable over time.  Each tuple in the list contains</span>
<span class="c1">#</span>
<span class="c1">#     (example_name, do_run, do_valgrind_run).</span>
<span class="c1">#</span>
<span class="c1"># See test.py for more information.</span>
<span class="n">cpp_examples</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;adhoc-aloha-ideal-phy&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;adhoc-aloha-ideal-phy-with-microwave-oven&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;adhoc-aloha-ideal-phy-matrix-propagation-loss-model&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">),</span>
<span class="p">]</span>

<span class="c1"># A list of Python examples to run in order to ensure that they remain</span>
<span class="c1"># runnable over time.  Each tuple in the list contains</span>
<span class="c1">#</span>
<span class="c1">#     (example_name, do_run).</span>
<span class="c1">#</span>
<span class="c1"># See test.py for more information.</span>
<span class="n">python_examples</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;sample-simulator.py&quot;</span><span class="p">,</span> <span class="s2">&quot;True&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>As indicated in the comment, each entry in the C++ list of examples to run
contains the tuple <code class="docutils literal notranslate"><span class="pre">(example_name,</span> <span class="pre">do_run,</span> <span class="pre">do_valgrind_run)</span></code>, where</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">example_name</span></code> is the executable to be run,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do_run</span></code> is a condition under which to run the example, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do_valgrind_run</span></code> is a condition under which to run the example
under valgrind.  (This is needed because NSC causes illegal instruction
crashes with some tests when they are run under valgrind.)</p></li>
</ul>
</div></blockquote>
<p>Note that the two conditions are Python statements that
can depend on <code class="docutils literal notranslate"><span class="pre">waf</span></code> configuration variables.  For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s2">&quot;tcp-nsc-lfn&quot;</span><span class="p">,</span> <span class="s2">&quot;NSC_ENABLED == True&quot;</span><span class="p">,</span> <span class="s2">&quot;NSC_ENABLED == False&quot;</span><span class="p">),</span>
</pre></div>
</div>
<p>Each entry in the Python list of examples to run contains the tuple
<code class="docutils literal notranslate"><span class="pre">(example_name,</span> <span class="pre">do_run)</span></code>, where, as for the C++ examples,</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">example_name</span></code> is the Python script to be run, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do_run</span></code> is a condition under which to run the example.</p></li>
</ul>
</div></blockquote>
<p>Again, the condition is a Python statement that can
depend on <code class="docutils literal notranslate"><span class="pre">waf</span></code> configuration variables.  For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s2">&quot;realtime-udp-echo.py&quot;</span><span class="p">,</span> <span class="s2">&quot;ENABLE_REAL_TIME == False&quot;</span><span class="p">),</span>
</pre></div>
</div>
</div>
<div class="section" id="step-8-configure-and-build">
<h2>Step 8 - Configure and Build<a class="headerlink" href="#step-8-configure-and-build" title="Permalink to this headline">¶</a></h2>
<p>You can now configure, build and test your module as normal.
You must reconfigure the project as a first step so that <code class="docutils literal notranslate"><span class="pre">waf</span></code>
caches the new information in your <code class="docutils literal notranslate"><span class="pre">wscript</span></code> files,
or else your new module will not be included in the build.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./waf configure --enable-examples --enable-tests
$ ./waf build
$ ./test.py
</pre></div>
</div>
<p>Look for your new module’s test suite (and example programs,
if your module has any enabled) in the test output.</p>
</div>
<div class="section" id="step-9-python-bindings">
<h2>Step 9 - Python Bindings<a class="headerlink" href="#step-9-python-bindings" title="Permalink to this headline">¶</a></h2>
<p>Adding Python bindings to your module is optional, and the step is
commented out by default in the <code class="docutils literal notranslate"><span class="pre">create-module.py</span></code> script.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bld.ns3_python_bindings()</span>
</pre></div>
</div>
<p>If you want to include Python bindings (needed only if you want
to write Python ns-3 programs instead of C++ ns-3 programs), you
should uncomment the above and install the Python API scanning
system (covered elsewhere in this manual) and scan your module to
generate new bindings.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Adding a New Module to <em>ns-3</em></a><ul>
<li><a class="reference internal" href="#step-0-module-layout">Step 0 - Module Layout</a></li>
<li><a class="reference internal" href="#step-1-create-a-module-skeleton">Step 1 - Create a Module Skeleton</a></li>
<li><a class="reference internal" href="#step-3-declare-source-files">Step 3 - Declare Source Files</a></li>
<li><a class="reference internal" href="#step-4-declare-public-header-files">Step 4 - Declare Public Header Files</a></li>
<li><a class="reference internal" href="#step-5-declare-tests">Step 5 - Declare Tests</a></li>
<li><a class="reference internal" href="#step-6-declare-examples">Step 6 - Declare Examples</a></li>
<li><a class="reference internal" href="#step-7-examples-run-as-tests">Step 7 - Examples Run as Tests</a></li>
<li><a class="reference internal" href="#step-8-configure-and-build">Step 8 - Configure and Build</a></li>
<li><a class="reference internal" href="#step-9-python-bindings">Step 9 - Python Bindings</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="new-models.html"
                        title="previous chapter">Creating a new <em>ns-3</em> model</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="documentation.html"
                        title="next chapter">Creating Documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/new-modules.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="documentation.html" title="Creating Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="new-models.html" title="Creating a new ns-3 model"
             >previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Manual</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="support.html" >Support</a><span class="navelem">&nbsp;</span></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2019.
      Last updated on Apr 29, 2020 18:24.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.2.
    </div>
  </body>
</html>