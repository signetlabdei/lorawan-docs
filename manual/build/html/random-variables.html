
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1. Random Variables &#8212; Manual</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/default.css?v=bb97339c" />
    <script src="_static/documentation_options.js?v=951d00fa"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3.2. Hash Functions" href="hash-functions.html" />
    <link rel="prev" title="3. Additional Tools" href="features.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico"
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>


  </head><body>
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0" width="100%">
        <tbody>
          <tr style="height: 56px;">
            <td id="projectlogo">
              <a id="ns3_home1"
                 href="http://www.nsnam.org/">
                 <img alt="ns-3 Logo" style="background-color: unset;"
                      src="_static/ns-3-inverted-notext-small.png"/>
              </a>
            </td>
            <td id="projecttext">
              <div id="projectbrief">A Discrete-Event Network Simulator</div>
              <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
            </td>

            <td id="ns3-menu">
              <div class="menu">
                <ul >
                  <li style="background-image:none">
                    <a id="ns3_home2"
                         href="http://www.nsnam.org/"
                         >&nbsp;&nbsp;Home</a>
                  </li>
                  <li><span
                        onmouseover="mopen('mTuts')"
                        onmouseout="mclosetime()"
                          >Tutorials &nbsp;&#x25BC;</span>
                      <div id="mTuts"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_tut"
                           href="/docs/tutorial/html/index.html"
                            >English</a><br/>
                      </div>
                  </li>
                  <li><span
                        onmouseover="mopen('mDocs')"
                        onmouseout="mclosetime()"
                          >Documentation &nbsp;&#x25BC;</span>
                      <div id="mDocs"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_ins"
                           href="/docs/installation/html/index.html"
                           >Installation</a><br/>
                        <a id="ns3_man"
                           href="/docs/manual/html/index.html"
                           >Manual</a><br/>
                        <a id="ns3_mod"
                           href="/docs/models/html/index.html"
                           >Models</a><br/>
                        <a id="ns3_con"
                           href="/docs/contributing/html/index.html"
                           >Contributing</a><br/>
                        <a id="ns3_wiki"
                           href="http://www.nsnam.org/wiki"
                           >Wiki</a><br/>
                      </div>
                  </li>
                  <li><span
                        onmouseover="mopen('mDev')"
                        onmouseout="mclosetime()"
                          >Development &nbsp;&#x25BC;</span>
                      <div id="mDev"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_api"
                           href="/docs/doxygen/html/index.html"
                           >API Docs</a><br/>
                        <a id="ns3_bugs"
                         href="https://gitlab.com/nsnam/ns-3-dev/-/issues"
                           >Issue Tracker</a><br/>
                        <a id="ns3_merge"
                         href="https://gitlab.com/nsnam/ns-3-dev/-/merge_requests"
                           >Merge Requests</a><br/>
                      </div>
                  </li>
                </ul>
              </div>
            </td>

            <td id="projectsection">
              <span style="margin-right:10px">Manual</span>
            </td>
          </tr>
        </tbody>
      </table>
      <script  type="text/javascript">ns3_write_links()</script>
    </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="hash-functions.html" title="3.2. Hash Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="features.html" title="3. Additional Tools"
             accesskey="P">previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Manual</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="features.html" accesskey="U"><span class="section-number">3. </span>Additional Tools</a><span class="navelem">&nbsp;</span></li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1. </span>Random Variables</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="random-variables">
<h1><span class="section-number">3.1. </span>Random Variables<a class="headerlink" href="#random-variables" title="Link to this heading">¶</a></h1>
<p><em>ns-3</em> contains a built-in pseudo-random number generator (PRNG). It is important
for serious users of the simulator to understand the functionality,
configuration, and usage of this PRNG, and to decide whether it is sufficient
for his or her research use.</p>
<section id="quick-overview">
<h2><span class="section-number">3.1.1. </span>Quick Overview<a class="headerlink" href="#quick-overview" title="Link to this heading">¶</a></h2>
<p><em>ns-3</em> random numbers are provided via instances of
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RandomVariableStream</span></code>.</p>
<ul class="simple">
<li><p>by default, <em>ns-3</em> simulations use a fixed seed; if there is any randomness in
the simulation, each run of the program will yield identical results unless
the seed and/or run number is changed.</p></li>
<li><p>in <em>ns-3.3</em> and earlier, <em>ns-3</em> simulations used a random seed by default; this
marks a change in policy starting with <em>ns-3.4</em>.</p></li>
<li><p>in <em>ns-3.14</em> and earlier, <em>ns-3</em> simulations used a different wrapper class
called <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RandomVariable</span></code>.  As of <em>ns-3.15</em>, this class has been
replaced by <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RandomVariableStream</span></code>; the underlying pseudo-random
number generator has not changed.</p></li>
<li><p>to obtain randomness across multiple simulation runs, you must either set the
seed differently or set the run number differently.  To set a seed, call
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ns3::RngSeedManager::SetSeed()</span></code> at the beginning of the program; to set
a run number with the same seed, call <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ns3::RngSeedManager::SetRun()</span></code> at
the beginning of the program; see <a class="reference internal" href="#seeding-and-independent-replications"><span class="std std-ref">Creating random variables</span></a>.</p></li>
<li><p>each RandomVariableStream used in <em>ns-3</em> has a virtual random number generator
associated with it; all random variables use either a fixed or random seed
based on the use of the global seed (previous bullet);</p></li>
<li><p>if you intend to perform multiple runs of the same scenario, with different
random numbers, please be sure to read the section on how to perform
independent replications: <a class="reference internal" href="#seeding-and-independent-replications"><span class="std std-ref">Creating random variables</span></a>.</p></li>
</ul>
<p>Read further for more explanation about the random number facility for <em>ns-3</em>.</p>
</section>
<section id="background">
<h2><span class="section-number">3.1.2. </span>Background<a class="headerlink" href="#background" title="Link to this heading">¶</a></h2>
<p>Simulations use a lot of random numbers; one study
found that most network simulations spend as much as 50%
of the CPU generating random numbers.  Simulation users need
to be concerned with the quality of the (pseudo) random numbers and
the independence between different streams of random numbers.</p>
<p>Users need to be concerned with a few issues, such as:</p>
<ul class="simple">
<li><p>the seeding of the random number generator and whether a
simulation outcome is deterministic or not,</p></li>
<li><p>how to acquire different streams of random numbers that are
independent from one another, and</p></li>
<li><p>how long it takes for streams to cycle</p></li>
</ul>
<p>We will introduce a few terms here:  a RNG provides a long sequence
of (pseudo) random numbers.
The length of this sequence is called the <em>cycle length</em>
or <em>period</em>, after which the RNG will repeat itself.
This sequence can
be  partitioned into disjoint <em>streams</em>.  A stream of a
RNG is a contiguous subset or block of the RNG sequence.
For instance, if the
RNG period is of length N, and two streams are provided from this
RNG, then
the first stream might use the first N/2 values and the second
stream might produce the second N/2 values.  An important property
here is that the two streams are uncorrelated.  Likewise, each
stream can be partitioned disjointedly to a number of
uncorrelated <em>substreams</em>.  The underlying RNG hopefully
produces a pseudo-random sequence of numbers with a very long
cycle length, and partitions this into streams and substreams in an
efficient manner.</p>
<p><em>ns-3</em> uses the same underlying random number generator as does <em>ns-2</em>:  the
MRG32k3a generator from Pierre L’Ecuyer.  A detailed description can be found in
<a class="reference external" href="http://www.iro.umontreal.ca/~lecuyer/myftp/papers/streams00.pdf">http://www.iro.umontreal.ca/~lecuyer/myftp/papers/streams00.pdf</a>.  The MRG32k3a
generator provides <img class="math" src="_images/math/7bc755977774155c946c69cdcc441af1158e91a7.png" alt="1.8x10^{19}"/> independent streams of random numbers,
each of which consists of <img class="math" src="_images/math/31dc40610b46af3bcbd9eb68b6b5ec5350027bff.png" alt="2.3x10^{15}"/> substreams. Each substream has a
period (<em>i.e.</em>, the number of random numbers before overlap) of
<img class="math" src="_images/math/b221b0c74b72bae4e861a699b85b5964c8f01732.png" alt="7.6x10^{22}"/>. The period of the entire generator is <img class="math" src="_images/math/abeb4f688127a64818f66a29f6a61500bf02197d.png" alt="3.1x10^{57}"/>.</p>
<p>Class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RandomVariableStream</span></code> is the public interface to this
underlying random number generator.  When users create new random variables
(such as <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::UniformRandomVariable</span></code>,
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::ExponentialRandomVariable</span></code>, etc.), they create an object that uses
one of the distinct, independent streams of the random number generator.
Therefore, each object of type <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RandomVariableStream</span></code> has,
conceptually, its own “virtual” RNG.  Furthermore, each
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RandomVariableStream</span></code> can be configured to use one of the set of
substreams drawn from the main stream.</p>
<p>An alternate implementation would be to allow each RandomVariable to have its
own (differently seeded) RNG.  However, we cannot guarantee as strongly that the
different sequences would be uncorrelated in such a case; hence, we prefer to
use a single RNG and streams and substreams from it.</p>
</section>
<section id="creating-random-variables">
<span id="seeding-and-independent-replications"></span><h2><span class="section-number">3.1.3. </span>Creating random variables<a class="headerlink" href="#creating-random-variables" title="Link to this heading">¶</a></h2>
<p><em>ns-3</em> supports a number of random variable objects from the base class
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RandomVariableStream</span></code>.  These objects derive from
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::Object</span></code> and are handled by smart pointers.</p>
<p>The correct way to create these objects is to use the templated
<cite>CreateObject&lt;&gt;</cite> method, such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">UniformRandomVariable</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateObject</span><span class="o">&lt;</span><span class="n">UniformRandomVariable</span><span class="o">&gt;</span><span class="p">();</span>
</pre></div>
</div>
<p>then you can access values by calling methods on the object such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">myRandomNo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">-&gt;</span><span class="n">GetInteger</span><span class="p">();</span>
</pre></div>
</div>
<p>If you try to instead do something like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">myRandomNo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UniformRandomVariable</span><span class="p">().</span><span class="n">GetInteger</span><span class="p">();</span>
</pre></div>
</div>
<p>your program will encounter a segmentation fault, because the implementation
relies on some attribute construction that occurs only when <cite>CreateObject</cite>
is called.</p>
<p>Much of the rest of this chapter now discusses the properties of the
stream of pseudo-random numbers generated from such objects, and how to
control the seeding of such objects.</p>
</section>
<section id="id1">
<h2><span class="section-number">3.1.4. </span>Seeding and independent replications<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p><em>ns-3</em> simulations can be configured to produce deterministic or random results.
If the <em>ns-3</em> simulation is configured to use a fixed, deterministic seed with
the same run number, it should give the same output each time it is run.</p>
<p>By default, <em>ns-3</em> simulations use a fixed seed and run number.  These values
are stored in two <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::GlobalValue</span></code> instances: <code class="docutils literal notranslate"><span class="pre">g_rngSeed</span></code> and
<code class="docutils literal notranslate"><span class="pre">g_rngRun</span></code>.</p>
<p>A typical use case is to run a simulation as a sequence of independent trials,
so as to compute statistics on a large number of independent runs.  The user can
either change the global seed and rerun the simulation, or can advance the
substream state of the RNG, which is referred to as incrementing the run number.</p>
<p>A class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::RngSeedManager</span></code> provides an API to control the seeding and
run number behavior.  This seeding and substream state setting must be called
before any random variables are created; e.g:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">RngSeedManager</span><span class="o">::</span><span class="n">SetSeed</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w">  </span><span class="c1">// Changes seed from default of 1 to 3</span>
<span class="n">RngSeedManager</span><span class="o">::</span><span class="n">SetRun</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span><span class="w">   </span><span class="c1">// Changes run number from default of 1 to 7</span>
<span class="c1">// Now, create random variables</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">UniformRandomVariable</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateObject</span><span class="o">&lt;</span><span class="n">UniformRandomVariable</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">ExponentialRandomVariable</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateObject</span><span class="o">&lt;</span><span class="n">ExponentialRandomVarlable</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">...</span>
</pre></div>
</div>
<p>Which is better, setting a new seed or advancing the substream state?  There is
no guarantee that the streams produced by two random seeds will not overlap.
The only way to guarantee that two streams do not overlap is to use the
substream capability provided by the RNG implementation.  <em>Therefore, use the
substream capability to produce multiple independent runs of the same
simulation.</em> In other words, the more statistically rigorous way to configure
multiple independent replications is to use a fixed seed and to advance the run
number.  This implementation allows for a maximum of <img class="math" src="_images/math/31dc40610b46af3bcbd9eb68b6b5ec5350027bff.png" alt="2.3x10^{15}"/>
independent replications using the substreams.</p>
<p>For ease of use, it is not necessary to control the seed and run number from
within the program; the user can set the <code class="docutils literal notranslate"><span class="pre">NS_GLOBAL_VALUE</span></code> environment
variable as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">NS_GLOBAL_VALUE</span><span class="o">=</span><span class="s2">&quot;RngRun=3&quot;</span><span class="w"> </span>./ns3<span class="w"> </span>run<span class="w"> </span>program-name
</pre></div>
</div>
<p>Another way to control this is by passing a command-line argument; since this is
an <em>ns-3</em> GlobalValue instance, it is equivalently done such as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>run<span class="w"> </span>program-name<span class="w"> </span>--command-template<span class="o">=</span><span class="s2">&quot;%s --RngRun=3&quot;</span>
</pre></div>
</div>
<p>or, if you are running programs directly outside of ns3:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./build/optimized/scratch/program-name<span class="w"> </span>--RngRun<span class="o">=</span><span class="m">3</span>
</pre></div>
</div>
<p>The above command-line variants make it easy to run lots of different
runs from a shell script by just passing a different RngRun index.</p>
</section>
<section id="class-randomvariablestream">
<h2><span class="section-number">3.1.5. </span>Class RandomVariableStream<a class="headerlink" href="#class-randomvariablestream" title="Link to this heading">¶</a></h2>
<p>All random variables should derive from class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RandomVariable</span></code>. This
base class provides a few methods for globally configuring the behavior
of the random number generator. Derived classes provide API for drawing random
variates from the particular distribution being supported.</p>
<p>Each RandomVariableStream created in the simulation is given a generator that is a
new RNGStream from the underlying PRNG. Used in this manner, the L’Ecuyer
implementation allows for a maximum of <img class="math" src="_images/math/ce00b567c62f520f9a3fec854af6e8ca530afbfd.png" alt="1.8x10^19"/> random variables.  Each
random variable in a single replication can produce up to <img class="math" src="_images/math/e91e442e51f610bd366686d760b40020dd85ee33.png" alt="7.6x10^22"/>
random numbers before overlapping.</p>
</section>
<section id="base-class-public-api">
<h2><span class="section-number">3.1.6. </span>Base class public API<a class="headerlink" href="#base-class-public-api" title="Link to this heading">¶</a></h2>
<p>Below are excerpted a few public methods of class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RandomVariableStream</span></code>
that access the next value in the substream.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * \brief Returns a random double from the underlying distribution</span>
<span class="cm"> * \return A floating point random value</span>
<span class="cm"> */</span>
<span class="kt">double</span><span class="w"> </span><span class="nf">GetValue</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * \brief Returns a random integer from the underlying distribution</span>
<span class="cm"> * \return  Integer cast of ::GetValue()</span>
<span class="cm"> */</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">GetInteger</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<p>We have already described the seeding configuration above. Different
RandomVariable subclasses may have additional API.</p>
</section>
<section id="types-of-randomvariables">
<h2><span class="section-number">3.1.7. </span>Types of RandomVariables<a class="headerlink" href="#types-of-randomvariables" title="Link to this heading">¶</a></h2>
<p>The following types of random variables are provided, and are documented in the
<em>ns-3</em> Doxygen or by reading <code class="docutils literal notranslate"><span class="pre">src/core/model/random-variable-stream.h</span></code>.  Users
can also create their own custom random variables by deriving from class
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RandomVariableStream</span></code>.</p>
<ul class="simple">
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">UniformRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ConstantRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">SequentialRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ExponentialRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ParetoRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">WeibullRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">NormalRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LogNormalRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GammaRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ErlangRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">TriangularRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ZipfRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ZetaRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">DeterministicRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">EmpiricalRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BinomialRandomVariable</span></code></p></li>
<li><p>class <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BernoulliRandomVariable</span></code></p></li>
</ul>
</section>
<section id="semantics-of-randomvariablestream-objects">
<h2><span class="section-number">3.1.8. </span>Semantics of RandomVariableStream objects<a class="headerlink" href="#semantics-of-randomvariablestream-objects" title="Link to this heading">¶</a></h2>
<p>RandomVariableStream objects derive from <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::Object</span></code> and are
handled by smart pointers.</p>
<p>RandomVariableStream instances can also be used in <em>ns-3</em> attributes, which means
that values can be set for them through the <em>ns-3</em> attribute system.
An example is in the propagation models for WifiNetDevice:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TypeId</span>
<span class="nf">RandomPropagationDelayModel::GetTypeId</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="n">TypeId</span><span class="w"> </span><span class="n">tid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TypeId</span><span class="p">(</span><span class="s">&quot;ns3::RandomPropagationDelayModel&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">SetParent</span><span class="o">&lt;</span><span class="n">PropagationDelayModel</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">SetGroupName</span><span class="p">(</span><span class="s">&quot;Propagation&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">AddConstructor</span><span class="o">&lt;</span><span class="n">RandomPropagationDelayModel</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">AddAttribute</span><span class="p">(</span><span class="s">&quot;Variable&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="s">&quot;The random variable which generates random delays (s).&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="n">StringValue</span><span class="p">(</span><span class="s">&quot;ns3::UniformRandomVariable&quot;</span><span class="p">),</span>
<span class="w">                  </span><span class="n">MakePointerAccessor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">RandomPropagationDelayModel</span><span class="o">::</span><span class="n">m_variable</span><span class="p">),</span>
<span class="w">                  </span><span class="n">MakePointerChecker</span><span class="o">&lt;</span><span class="n">RandomVariableStream</span><span class="o">&gt;</span><span class="p">())</span>
<span class="w">    </span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">tid</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here, the <em>ns-3</em> user can change the default random variable for this
delay model (which is a UniformRandomVariable ranging from 0 to 1) through
the attribute system.</p>
</section>
<section id="using-other-prng">
<h2><span class="section-number">3.1.9. </span>Using other PRNG<a class="headerlink" href="#using-other-prng" title="Link to this heading">¶</a></h2>
<p>There is presently no support for substituting a different underlying
random number generator (e.g., the GNU Scientific Library or the Akaroa
package).  Patches are welcome.</p>
</section>
<section id="setting-the-stream-number">
<h2><span class="section-number">3.1.10. </span>Setting the stream number<a class="headerlink" href="#setting-the-stream-number" title="Link to this heading">¶</a></h2>
<p>The underlying MRG32k3a generator provides 2^64 independent streams.
In ns-3, these are assigned sequentially starting from the first stream as
new RandomVariableStream instances make their first call to GetValue().</p>
<p>As a result of how these RandomVariableStream objects are assigned to
underlying streams, the assignment is sensitive to perturbations of
the simulation configuration.  The consequence is that if any aspect of the
simulation configuration is changed, the mapping of RandomVariables to
streams may (or may not) change.</p>
<p>As a concrete example, a user running a comparative study between routing
protocols may find that the act of changing one routing protocol for another
will notice that the underlying mobility pattern also changed.</p>
<p>Starting with ns-3.15, some control has been provided to users to allow
users to optionally fix the assignment of selected RandomVariableStream
objects to underlying streams.  This is the <code class="docutils literal notranslate"><span class="pre">Stream</span></code> attribute, part
of the base class RandomVariableStream.</p>
<p>By partitioning the existing sequence of streams from before:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;--------------------------------------------------------------------------&gt;
stream 0                                                   stream (2^64 - 1)
</pre></div>
</div>
<p>into two equal-sized sets:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;--------------------------------------------------------------------------&gt;
^                                    ^^                                    ^
|                                    ||                                    |
stream 0            stream (2^63 - 1)  stream 2^63         stream (2^64 - 1)
&lt;- automatically assigned -----------&gt;&lt;- assigned by user -----------------&gt;
</pre></div>
</div>
<p>The first 2^63 streams continue to be automatically assigned, while
the last 2^63 are given stream indices starting with zero up to
2^63-1.</p>
<p>The assignment of streams to a fixed stream number is optional; instances
of RandomVariableStream that do not have a stream value assigned will
be assigned the next one from the pool of automatic streams.</p>
<p>To fix a RandomVariableStream to a particular underlying stream, assign
its <code class="docutils literal notranslate"><span class="pre">Stream</span></code> attribute to a non-negative integer (the default value
of -1 means that a value will be automatically allocated).</p>
</section>
<section id="publishing-your-results">
<h2><span class="section-number">3.1.11. </span>Publishing your results<a class="headerlink" href="#publishing-your-results" title="Link to this heading">¶</a></h2>
<p>When you publish simulation results, a key piece of configuration
information that you should always state is how you used the
random number generator.</p>
<ul class="simple">
<li><p>what seeds you used,</p></li>
<li><p>what RNG you used if not the default,</p></li>
<li><p>how were independent runs performed,</p></li>
<li><p>for large simulations, how did you check that you did not cycle.</p></li>
</ul>
<p>It is incumbent on the researcher publishing results to include enough
information to allow others to reproduce his or her results. It is also
incumbent on the researcher to convince oneself that the random numbers used
were statistically valid, and to state in the paper why such confidence is
assumed.</p>
</section>
<section id="summary">
<h2><span class="section-number">3.1.12. </span>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Let’s review what things you should do when creating a simulation.</p>
<ul class="simple">
<li><p>Decide whether you are running with a fixed seed or random seed; a fixed seed
is the default,</p></li>
<li><p>Decide how you are going to manage independent replications, if applicable,</p></li>
<li><p>Convince yourself that you are not drawing more random values than the cycle
length, if you are running a very long simulation, and</p></li>
<li><p>When you publish, follow the guidelines above about documenting your use of
the random number generator.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1. Random Variables</a><ul>
<li><a class="reference internal" href="#quick-overview">3.1.1. Quick Overview</a></li>
<li><a class="reference internal" href="#background">3.1.2. Background</a></li>
<li><a class="reference internal" href="#creating-random-variables">3.1.3. Creating random variables</a></li>
<li><a class="reference internal" href="#id1">3.1.4. Seeding and independent replications</a></li>
<li><a class="reference internal" href="#class-randomvariablestream">3.1.5. Class RandomVariableStream</a></li>
<li><a class="reference internal" href="#base-class-public-api">3.1.6. Base class public API</a></li>
<li><a class="reference internal" href="#types-of-randomvariables">3.1.7. Types of RandomVariables</a></li>
<li><a class="reference internal" href="#semantics-of-randomvariablestream-objects">3.1.8. Semantics of RandomVariableStream objects</a></li>
<li><a class="reference internal" href="#using-other-prng">3.1.9. Using other PRNG</a></li>
<li><a class="reference internal" href="#setting-the-stream-number">3.1.10. Setting the stream number</a></li>
<li><a class="reference internal" href="#publishing-your-results">3.1.11. Publishing your results</a></li>
<li><a class="reference internal" href="#summary">3.1.12. Summary</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="features.html"
                          title="previous chapter"><span class="section-number">3. </span>Additional Tools</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="hash-functions.html"
                          title="next chapter"><span class="section-number">3.2. </span>Hash Functions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/random-variables.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="hash-functions.html" title="3.2. Hash Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="features.html" title="3. Additional Tools"
             >previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Manual</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="features.html" ><span class="section-number">3. </span>Additional Tools</a><span class="navelem">&nbsp;</span></li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1. </span>Random Variables</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2006-2019, ns-3 project.
      Last updated on Mar 20, 2024 17:55.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>