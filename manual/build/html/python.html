
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.8. Using Python to Run ns-3 &#8212; Manual</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/default.css?v=bb97339c" />
    <script src="_static/documentation_options.js?v=951d00fa"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Developer Tools" href="develop.html" />
    <link rel="prev" title="3.7. Making Plots using the Gnuplot Class" href="gnuplot.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico"
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>


  </head><body>
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0" width="100%">
        <tbody>
          <tr style="height: 56px;">
            <td id="projectlogo">
              <a id="ns3_home1"
                 href="http://www.nsnam.org/">
                 <img alt="ns-3 Logo" style="background-color: unset;"
                      src="_static/ns-3-inverted-notext-small.png"/>
              </a>
            </td>
            <td id="projecttext">
              <div id="projectbrief">A Discrete-Event Network Simulator</div>
              <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
            </td>

            <td id="ns3-menu">
              <div class="menu">
                <ul >
                  <li style="background-image:none">
                    <a id="ns3_home2"
                         href="http://www.nsnam.org/"
                         >&nbsp;&nbsp;Home</a>
                  </li>
                  <li><span
                        onmouseover="mopen('mTuts')"
                        onmouseout="mclosetime()"
                          >Tutorials &nbsp;&#x25BC;</span>
                      <div id="mTuts"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_tut"
                           href="/docs/tutorial/html/index.html"
                            >English</a><br/>
                      </div>
                  </li>
                  <li><span
                        onmouseover="mopen('mDocs')"
                        onmouseout="mclosetime()"
                          >Documentation &nbsp;&#x25BC;</span>
                      <div id="mDocs"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_ins"
                           href="/docs/installation/html/index.html"
                           >Installation</a><br/>
                        <a id="ns3_man"
                           href="/docs/manual/html/index.html"
                           >Manual</a><br/>
                        <a id="ns3_mod"
                           href="/docs/models/html/index.html"
                           >Models</a><br/>
                        <a id="ns3_con"
                           href="/docs/contributing/html/index.html"
                           >Contributing</a><br/>
                        <a id="ns3_wiki"
                           href="http://www.nsnam.org/wiki"
                           >Wiki</a><br/>
                      </div>
                  </li>
                  <li><span
                        onmouseover="mopen('mDev')"
                        onmouseout="mclosetime()"
                          >Development &nbsp;&#x25BC;</span>
                      <div id="mDev"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_api"
                           href="/docs/doxygen/html/index.html"
                           >API Docs</a><br/>
                        <a id="ns3_bugs"
                         href="https://gitlab.com/nsnam/ns-3-dev/-/issues"
                           >Issue Tracker</a><br/>
                        <a id="ns3_merge"
                         href="https://gitlab.com/nsnam/ns-3-dev/-/merge_requests"
                           >Merge Requests</a><br/>
                      </div>
                  </li>
                </ul>
              </div>
            </td>

            <td id="projectsection">
              <span style="margin-right:10px">Manual</span>
            </td>
          </tr>
        </tbody>
      </table>
      <script  type="text/javascript">ns3_write_links()</script>
    </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="develop.html" title="4. Developer Tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gnuplot.html" title="3.7. Making Plots using the Gnuplot Class"
             accesskey="P">previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Manual</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="features.html" accesskey="U"><span class="section-number">3. </span>Additional Tools</a><span class="navelem">&nbsp;</span></li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.8. </span>Using Python to Run <em>ns-3</em></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="using-python-to-run-ns3">
<h1><span class="section-number">3.8. </span>Using Python to Run <em>ns-3</em><a class="headerlink" href="#using-python-to-run-ns3" title="Link to this heading">¶</a></h1>
<p>Python bindings allow the C++ code in <em>ns-3</em> to be called from Python.</p>
<p>This chapter shows you how to create a Python script that can run <em>ns-3</em> and also the process of creating Python bindings for a C++ <em>ns-3</em> module.</p>
<p>Python bindings are also needed to run the Pyviz visualizer.</p>
<section id="introduction">
<h2><span class="section-number">3.8.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>Python bindings provide support for importing <em>ns-3</em> model libraries as Python
modules.  Coverage of most of the <em>ns-3</em> C++ API is provided.  The intent
has been to allow the programmer to write complete simulation scripts in
Python, to allow integration of <em>ns-3</em> with other Python tools and workflows.
The intent is not to provide a different language choice to author new
<em>ns-3</em> models implemented in Python.</p>
<p>As of ns-3.37 release or later,
Python bindings for <em>ns-3</em> use a tool called Cppyy (<a class="reference external" href="https://cppyy.readthedocs.io/en/latest/">https://cppyy.readthedocs.io/en/latest/</a>)
to create a Python module from the C++ libraries built by CMake. The Python bindings that Cppyy
uses are built at runtime, by importing the C++ libraries and headers for each <em>ns-3</em> module.
This means that even if the C++ API changes, the Python bindings will adapt to them
without requiring any preprocessing or scanning.</p>
<p>If a user is not interested in Python, no action is needed; the Python bindings
are only built on-demand by Cppyy, and only if the user enables them in the
configuration of <em>ns-3</em>.</p>
<p>Due to an <a class="reference external" href="https://github.com/wlav/cppyy/issues/150">upstream limitation with Cppyy</a>, Python bindings do not work on macOS machines with Apple silicon (M1 and M2 processors).</p>
<p>Prior to ns-3.37, the previous Python bindings framework was based on
<a class="reference external" href="https://github.com/gjcarneiro/pybindgen">Pybindgen</a>.</p>
</section>
<section id="an-example-python-script-that-runs-ns3">
<h2><span class="section-number">3.8.2. </span>An Example Python Script that Runs <em>ns-3</em><a class="headerlink" href="#an-example-python-script-that-runs-ns3" title="Link to this heading">¶</a></h2>
<p>Here is some example code that is written in Python and that runs <em>ns-3</em>, which is written in C++.  This Python example can be found in <code class="docutils literal notranslate"><span class="pre">examples/tutorial/first.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ns</span> <span class="kn">import</span> <span class="n">ns</span>

<span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">LogComponentEnable</span><span class="p">(</span><span class="s2">&quot;UdpEchoClientApplication&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">LOG_LEVEL_INFO</span><span class="p">)</span>
<span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">LogComponentEnable</span><span class="p">(</span><span class="s2">&quot;UdpEchoServerApplication&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">LOG_LEVEL_INFO</span><span class="p">)</span>

<span class="n">nodes</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">NodeContainer</span><span class="p">()</span>
<span class="n">nodes</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">pointToPoint</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">point_to_point</span><span class="o">.</span><span class="n">PointToPointHelper</span><span class="p">()</span>
<span class="n">pointToPoint</span><span class="o">.</span><span class="n">SetDeviceAttribute</span><span class="p">(</span><span class="s2">&quot;DataRate&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">StringValue</span><span class="p">(</span><span class="s2">&quot;5Mbps&quot;</span><span class="p">))</span>
<span class="n">pointToPoint</span><span class="o">.</span><span class="n">SetChannelAttribute</span><span class="p">(</span><span class="s2">&quot;Delay&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">StringValue</span><span class="p">(</span><span class="s2">&quot;2ms&quot;</span><span class="p">))</span>

<span class="n">devices</span> <span class="o">=</span> <span class="n">pointToPoint</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

<span class="n">stack</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">internet</span><span class="o">.</span><span class="n">InternetStackHelper</span><span class="p">()</span>
<span class="n">stack</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

<span class="n">address</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">internet</span><span class="o">.</span><span class="n">Ipv4AddressHelper</span><span class="p">()</span>
<span class="n">address</span><span class="o">.</span><span class="n">SetBase</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s2">&quot;10.1.1.0&quot;</span><span class="p">),</span>
                <span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Ipv4Mask</span><span class="p">(</span><span class="s2">&quot;255.255.255.0&quot;</span><span class="p">))</span>

<span class="n">interfaces</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">Assign</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span>

<span class="n">echoServer</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">applications</span><span class="o">.</span><span class="n">UdpEchoServerHelper</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>

<span class="n">serverApps</span> <span class="o">=</span> <span class="n">echoServer</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">serverApps</span><span class="o">.</span><span class="n">Start</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
<span class="n">serverApps</span><span class="o">.</span><span class="n">Stop</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">10.0</span><span class="p">))</span>

<span class="n">address</span> <span class="o">=</span> <span class="n">interfaces</span><span class="o">.</span><span class="n">GetAddress</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ConvertTo</span><span class="p">()</span>
<span class="n">echoClient</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">applications</span><span class="o">.</span><span class="n">UdpEchoClientHelper</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">echoClient</span><span class="o">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s2">&quot;MaxPackets&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">UintegerValue</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">echoClient</span><span class="o">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s2">&quot;Interval&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">TimeValue</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)))</span>
<span class="n">echoClient</span><span class="o">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s2">&quot;PacketSize&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">UintegerValue</span><span class="p">(</span><span class="mi">1024</span><span class="p">))</span>

<span class="n">clientApps</span> <span class="o">=</span> <span class="n">echoClient</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="n">clientApps</span><span class="o">.</span><span class="n">Start</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>
<span class="n">clientApps</span><span class="o">.</span><span class="n">Stop</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">10.0</span><span class="p">))</span>

<span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>
<span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="running-python-scripts">
<h2><span class="section-number">3.8.3. </span>Running Python Scripts<a class="headerlink" href="#running-python-scripts" title="Link to this heading">¶</a></h2>
<p>For users that want to change upstream modules in C++ and got a copy of
ns-3 by Git cloning the ns-3-dev repository, or downloaded the
ns3-allinone package, or is using bake, continue to the next section.</p>
<p><cite>Note: models implemented in Python are not available from C++. If you want
your model to be available for both C++ and Python users, you must implement
it in C++.</cite></p>
<p>For users that want to exclusively run simulation scenarios and implement
simple modules in python, jump to the <a class="reference internal" href="#using-the-pip-wheel">Using the pip wheel</a> section.</p>
<section id="using-the-bindings-from-the-ns-3-source">
<h3><span class="section-number">3.8.3.1. </span>Using the bindings from the ns-3 source<a class="headerlink" href="#using-the-bindings-from-the-ns-3-source" title="Link to this heading">¶</a></h3>
<p>The main prerequisite is to install <cite>cppyy</cite>, with version no later than 2.4.2.
Depending on how you may manage
Python extensions, the installation instructions may vary, but you can first
check if it installed by seeing if the <cite>cppyy</cite> module can be
successfully imported and the version is no later than 2.4.2:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python3
Python<span class="w"> </span><span class="m">3</span>.8.10<span class="w"> </span><span class="o">(</span>default,<span class="w"> </span>Jun<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">2022</span>,<span class="w"> </span><span class="m">20</span>:18:18<span class="o">)</span>
<span class="o">[</span>GCC<span class="w"> </span><span class="m">9</span>.4.0<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>linux
Type<span class="w"> </span><span class="s2">&quot;help&quot;</span>,<span class="w"> </span><span class="s2">&quot;copyright&quot;</span>,<span class="w"> </span><span class="s2">&quot;credits&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;license&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information.
&gt;&gt;&gt;<span class="w"> </span>import<span class="w"> </span>cppyy
&gt;&gt;&gt;<span class="w"> </span>print<span class="o">(</span><span class="s2">&quot;%s&quot;</span><span class="w"> </span>%<span class="w"> </span>cppyy.__version<span class="o">)</span>
<span class="m">2</span>.4.2
&gt;&gt;&gt;
</pre></div>
</div>
<p>If not, you may try to install via <cite>pip</cite> or whatever other manager you are
using; e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span><span class="nv">cppyy</span><span class="o">==</span><span class="m">2</span>.4.2
</pre></div>
</div>
<p>First, we need to enable the build of Python bindings:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>configure<span class="w"> </span>--enable-python-bindings
</pre></div>
</div>
<p>Other options such as <code class="docutils literal notranslate"><span class="pre">--enable-examples</span></code> may be passed to the above command.
ns3 contains some options that automatically update the python path to find the ns3 module.
To run example programs, there are two ways to use ns3 to take care of this.  One is to run a ns3 shell; e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>shell
$<span class="w"> </span>python3<span class="w"> </span>examples/wireless/mixed-wired-wireless.py
</pre></div>
</div>
<p>and the other is to use the ‘run’ option to ns3:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>run<span class="w"> </span>examples/wireless/mixed-wired-wireless.py
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--no-build</span></code> option to run the program without invoking a project rebuild.
This option may be useful to improve execution time when running the same program
repeatedly but with different arguments, such as from scripts.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>run<span class="w"> </span>--no-build<span class="w"> </span>examples/wireless/mixed-wired-wireless.py
</pre></div>
</div>
<p>To run a python script under the C debugger:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>shell
$<span class="w"> </span>gdb<span class="w"> </span>--args<span class="w"> </span>python3<span class="w"> </span>examples/wireless/mixed-wired-wireless.py
</pre></div>
</div>
<p>To run your own Python script that calls <em>ns-3</em> and that has this path, <code class="docutils literal notranslate"><span class="pre">/path/to/your/example/my-script.py</span></code>, do the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./ns3<span class="w"> </span>shell
$<span class="w"> </span>python3<span class="w"> </span>/path/to/your/example/my-script.py
</pre></div>
</div>
</section>
<section id="using-the-pip-wheel">
<h3><span class="section-number">3.8.3.2. </span>Using the pip wheel<a class="headerlink" href="#using-the-pip-wheel" title="Link to this heading">¶</a></h3>
<p>Starting from ns-3.38, we provide a pip wheel for Python users using Linux.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>ns3
</pre></div>
</div>
<p>You can select a specific ns-3 version by specifying the wheel version.
Specifying a nonexistent version will result in an error message listing the available versions.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span><span class="nv">ns3</span><span class="o">==</span><span class="m">3</span>.37
Defaulting<span class="w"> </span>to<span class="w"> </span>user<span class="w"> </span>installation<span class="w"> </span>because<span class="w"> </span>normal<span class="w"> </span>site-packages<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>writeable
ERROR:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>find<span class="w"> </span>a<span class="w"> </span>version<span class="w"> </span>that<span class="w"> </span>satisfies<span class="w"> </span>the<span class="w"> </span>requirement<span class="w"> </span><span class="nv">ns3</span><span class="o">==</span><span class="m">3</span>.37<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>versions:<span class="w"> </span><span class="m">3</span>.37.post415<span class="o">)</span>
ERROR:<span class="w"> </span>No<span class="w"> </span>matching<span class="w"> </span>distribution<span class="w"> </span>found<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">ns3</span><span class="o">==</span><span class="m">3</span>.37
</pre></div>
</div>
<p>You can also specify you want at least a specific version (e.g. which shipped a required feature).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>ns3&gt;<span class="o">=</span><span class="m">3</span>.37
Defaulting<span class="w"> </span>to<span class="w"> </span>user<span class="w"> </span>installation<span class="w"> </span>because<span class="w"> </span>normal<span class="w"> </span>site-packages<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>writeable
Requirement<span class="w"> </span>already<span class="w"> </span>satisfied:<span class="w"> </span><span class="nv">ns3</span><span class="o">==</span><span class="m">3</span>.37.post415<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/username/.local/lib/python3.10/site-packages<span class="w"> </span><span class="o">(</span><span class="m">3</span>.37.post415<span class="o">)</span>
Requirement<span class="w"> </span>already<span class="w"> </span>satisfied:<span class="w"> </span>cppyy<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/username/.local/lib/python3.10/site-packages<span class="w"> </span><span class="o">(</span>from<span class="w"> </span><span class="nv">ns3</span><span class="o">==</span><span class="m">3</span>.37.post415<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="m">2</span>.4.2<span class="o">)</span>
Requirement<span class="w"> </span>already<span class="w"> </span>satisfied:<span class="w"> </span>cppyy-backend<span class="o">==</span><span class="m">1</span>.14.10<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/username/.local/lib/python3.10/site-packages<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>cppyy-&gt;ns3<span class="o">==</span><span class="m">3</span>.37.post415<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="m">1</span>.14.10<span class="o">)</span>
Requirement<span class="w"> </span>already<span class="w"> </span>satisfied:<span class="w"> </span><span class="nv">CPyCppyy</span><span class="o">==</span><span class="m">1</span>.12.12<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/username/.local/lib/python3.10/site-packages<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>cppyy-&gt;ns3<span class="o">==</span><span class="m">3</span>.37.post415<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="m">1</span>.12.12<span class="o">)</span>
Requirement<span class="w"> </span>already<span class="w"> </span>satisfied:<span class="w"> </span>cppyy-cling<span class="o">==</span><span class="m">6</span>.27.1<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/username/.local/lib/python3.10/site-packages<span class="w"> </span><span class="o">(</span>from<span class="w"> </span>cppyy-&gt;ns3<span class="o">==</span><span class="m">3</span>.37.post415<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="m">6</span>.27.1<span class="o">)</span>
</pre></div>
</div>
<p>To check if the pip wheel was installed, use the pip freeze command to list the installed packages,
then grep ns3 to filter the line of interest.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>freeze<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>ns3
<span class="nv">ns3</span><span class="o">==</span><span class="m">3</span>.37.post415
</pre></div>
</div>
<p>The available versions are also listed on the Pypi page for the <a class="reference external" href="https://pypi.org/project/ns3/#history">ns3 wheel</a>.</p>
<p>After installing it, you can start using ns-3 right away. For example, using the following script.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ns</span> <span class="kn">import</span> <span class="n">ns</span>

<span class="n">ns</span><span class="o">.</span><span class="n">cppyy</span><span class="o">.</span><span class="n">cppdef</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        using namespace ns3;</span>

<span class="s2">        Callback&lt;void,Ptr&lt;const Packet&gt;,const Address&amp;,const Address&amp;&gt;</span>
<span class="s2">        make_sinktrace_callback(void(*func)(Ptr&lt;Packet&gt;,Address,Address))</span>
<span class="s2">        {</span>
<span class="s2">            return MakeCallback(func);</span>
<span class="s2">        }</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c1"># Define the trace callback</span>
<span class="k">def</span> <span class="nf">SinkTracer</span><span class="p">(</span><span class="n">packet</span><span class="p">:</span> <span class="n">ns</span><span class="o">.</span><span class="n">Packet</span><span class="p">,</span> <span class="n">src_address</span><span class="p">:</span> <span class="n">ns</span><span class="o">.</span><span class="n">Address</span><span class="p">,</span> <span class="n">dst_address</span><span class="p">:</span> <span class="n">ns</span><span class="o">.</span><span class="n">Address</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;At </span><span class="si">{</span><span class="n">ns</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">GetSeconds</span><span class="p">()</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">s, &#39;</span><span class="si">{</span><span class="n">dst_address</span><span class="si">}</span><span class="s2">&#39; received packet&quot;</span>
          <span class="sa">f</span><span class="s2">&quot; with </span><span class="si">{</span><span class="n">packet</span><span class="o">.</span><span class="n">__deref__</span><span class="p">()</span><span class="o">.</span><span class="n">GetSerializedSize</span><span class="p">()</span><span class="si">}</span><span class="s2"> bytes from &#39;</span><span class="si">{</span><span class="n">src_address</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

<span class="c1"># Create two nodes</span>
<span class="n">csmaNodes</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">NodeContainer</span><span class="p">()</span>
<span class="n">csmaNodes</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Connect the two nodes</span>
<span class="n">csma</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">csma</span><span class="o">.</span><span class="n">CsmaHelper</span><span class="p">()</span>
<span class="n">csma</span><span class="o">.</span><span class="n">SetChannelAttribute</span><span class="p">(</span><span class="s2">&quot;DataRate&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">StringValue</span><span class="p">(</span><span class="s2">&quot;100Mbps&quot;</span><span class="p">))</span>
<span class="n">csma</span><span class="o">.</span><span class="n">SetChannelAttribute</span><span class="p">(</span><span class="s2">&quot;Delay&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">TimeValue</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">NanoSeconds</span><span class="p">(</span><span class="mi">6560</span><span class="p">)))</span>
<span class="n">csmaDevices</span> <span class="o">=</span> <span class="n">csma</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">csmaNodes</span><span class="p">)</span>

<span class="c1"># Install the internet stack</span>
<span class="n">stack</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">internet</span><span class="o">.</span><span class="n">InternetStackHelper</span><span class="p">()</span>
<span class="n">stack</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">csmaNodes</span><span class="p">)</span>

<span class="c1"># Assign Ipv4 addresses</span>
<span class="n">address</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">internet</span><span class="o">.</span><span class="n">Ipv4AddressHelper</span><span class="p">()</span>
<span class="n">address</span><span class="o">.</span><span class="n">SetBase</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s2">&quot;10.1.2.0&quot;</span><span class="p">),</span> <span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Ipv4Mask</span><span class="p">(</span><span class="s2">&quot;255.255.255.0&quot;</span><span class="p">))</span>
<span class="n">csmaInterfaces</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">Assign</span><span class="p">(</span><span class="n">csmaDevices</span><span class="p">)</span>

<span class="c1"># Setup applications</span>
<span class="n">echoServer</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">applications</span><span class="o">.</span><span class="n">UdpEchoServerHelper</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>

<span class="n">serverApps</span> <span class="o">=</span> <span class="n">echoServer</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">csmaNodes</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="n">serverApps</span><span class="o">.</span><span class="n">Start</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
<span class="n">serverApps</span><span class="o">.</span><span class="n">Stop</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">10.0</span><span class="p">))</span>

<span class="n">echoClient</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">applications</span><span class="o">.</span><span class="n">UdpEchoClientHelper</span><span class="p">(</span><span class="n">csmaInterfaces</span><span class="o">.</span><span class="n">GetAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ConvertTo</span><span class="p">(),</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">echoClient</span><span class="o">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s2">&quot;MaxPackets&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">UintegerValue</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">echoClient</span><span class="o">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s2">&quot;Interval&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">TimeValue</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)))</span>
<span class="n">echoClient</span><span class="o">.</span><span class="n">SetAttribute</span><span class="p">(</span><span class="s2">&quot;PacketSize&quot;</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">UintegerValue</span><span class="p">(</span><span class="mi">1024</span><span class="p">))</span>

<span class="n">clientApps</span> <span class="o">=</span> <span class="n">echoClient</span><span class="o">.</span><span class="n">Install</span><span class="p">(</span><span class="n">csmaNodes</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">clientApps</span><span class="o">.</span><span class="n">Start</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>
<span class="n">clientApps</span><span class="o">.</span><span class="n">Stop</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mf">10.0</span><span class="p">))</span>

<span class="c1"># Populate routing tables</span>
<span class="n">ns</span><span class="o">.</span><span class="n">internet</span><span class="o">.</span><span class="n">Ipv4GlobalRoutingHelper</span><span class="o">.</span><span class="n">PopulateRoutingTables</span><span class="p">()</span>

<span class="c1"># Setup the trace callback</span>
<span class="n">sinkTraceCallback</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">make_sinktrace_callback</span><span class="p">(</span><span class="n">SinkTracer</span><span class="p">)</span>
<span class="n">serverApps</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">__deref__</span><span class="p">()</span><span class="o">.</span><span class="n">TraceConnectWithoutContext</span><span class="p">(</span><span class="s2">&quot;RxWithAddresses&quot;</span><span class="p">,</span> <span class="n">sinkTraceCallback</span><span class="p">);</span>

<span class="c1"># Set the simulation duration to 11 seconds</span>
<span class="n">ns</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Stop</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">Seconds</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>

<span class="c1"># Run the simulator</span>
<span class="n">ns</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>
<span class="n">ns</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</pre></div>
</div>
<p>Which should print:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>At<span class="w"> </span>2s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>3s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>4s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>5s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>6s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>7s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>8s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
At<span class="w"> </span>9s,<span class="w"> </span><span class="s1">&#39;04-07-00:00:00:00:09:00:00&#39;</span><span class="w"> </span>received<span class="w"> </span>packet<span class="w"> </span>with<span class="w"> </span><span class="m">60</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;04-07-0a:01:02:02:01:c0:00&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="caveats">
<h2><span class="section-number">3.8.4. </span>Caveats<a class="headerlink" href="#caveats" title="Link to this heading">¶</a></h2>
<p>Some of the limitations of the Cppyy-based bindings are listed here.</p>
<section id="incomplete-coverage">
<h3><span class="section-number">3.8.4.1. </span>Incomplete Coverage<a class="headerlink" href="#incomplete-coverage" title="Link to this heading">¶</a></h3>
<p>First of all, keep in mind that not 100% of the API is supported in Python.  Some of the reasons are:</p>
<section id="memory-management-issues">
<h4><span class="section-number">3.8.4.1.1. </span>Memory-management issues<a class="headerlink" href="#memory-management-issues" title="Link to this heading">¶</a></h4>
<p>Some of the APIs involve pointers, which require knowledge of what kind of memory passing semantics (who owns what memory).
Such knowledge is not part of the function signatures, and is either documented or sometimes not even documented.
You may need to workaround these issues by instantiating variables on the C++ side with a Just-In-Time (JIT) compiled function.</p>
<p>For example, when handling command-line arguments, we could set additional parameters like in the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the ns-3 C++ modules with Cppyy</span>
<span class="kn">from</span> <span class="nn">ns</span> <span class="kn">import</span> <span class="n">ns</span>

<span class="c1"># To pass the addresses of the Python variables to c++, we need to use ctypes</span>
<span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="n">c_bool</span><span class="p">,</span> <span class="n">c_int</span><span class="p">,</span> <span class="n">c_double</span><span class="p">,</span> <span class="n">c_char_p</span><span class="p">,</span> <span class="n">create_string_buffer</span>
<span class="n">verbose</span> <span class="o">=</span> <span class="n">c_bool</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">nCsma</span> <span class="o">=</span> <span class="n">c_int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">throughputKbps</span> <span class="o">=</span> <span class="n">c_double</span><span class="p">(</span><span class="mf">3.1415</span><span class="p">)</span>
<span class="n">BUFFLEN</span> <span class="o">=</span> <span class="mi">4096</span>
<span class="n">outputFileBuffer</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;default_output_file.xml&quot;</span><span class="p">,</span> <span class="n">BUFFLEN</span><span class="p">)</span>
<span class="n">outputFile</span> <span class="o">=</span> <span class="n">c_char_p</span><span class="p">(</span><span class="n">outputFileBuffer</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>

<span class="c1"># Cppyy will transform the ctype types into the appropriate reference or raw pointers</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">CommandLine</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">AddValue</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="s2">&quot;Tell echo applications to log if true&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">AddValue</span><span class="p">(</span><span class="s2">&quot;nCsma&quot;</span><span class="p">,</span> <span class="s2">&quot;Number of extra CSMA nodes/devices&quot;</span><span class="p">,</span> <span class="n">nCsma</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">AddValue</span><span class="p">(</span><span class="s2">&quot;throughputKbps&quot;</span><span class="p">,</span> <span class="s2">&quot;Throughput of nodes&quot;</span><span class="p">,</span> <span class="n">throughputKbps</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">AddValue</span><span class="p">(</span><span class="s2">&quot;outputFile&quot;</span><span class="p">,</span> <span class="s2">&quot;Output file name&quot;</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">,</span> <span class="n">BUFFLEN</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="c1"># Printing values of the different ctypes passed as arguments post parsing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Verbose:&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;nCsma:&quot;</span><span class="p">,</span> <span class="n">nCsma</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;throughputKbps:&quot;</span><span class="p">,</span> <span class="n">throughputKbps</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;outputFile:&quot;</span><span class="p">,</span> <span class="n">outputFile</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the variables are passed as references or raw pointers. Reassigning them on the Python side
(e.g. <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">verbose.value</span></code>) can result in the Python garbage collector destroying the object
since its only reference has been overwritten, allowing the garbage collector to reclaim that memory space.
The C++ side will then have a dangling reference to the variable, which can be overwritten with
unexpected values, which can be read later, causing ns-3 to behave erratically due to the memory corruption.</p>
<p>String values are problematic since Python and C++ string lifetimes are handled differently.
To workaround that, we need to use null-terminated C strings (<code class="docutils literal notranslate"><span class="pre">char*</span></code>) to exchange strings between
the bindings and ns-3 module libraries. However, C strings are particularly dangerous, since
overwriting the null-terminator can also result in memory corruption. When passing a C string, remember
to allocate a large buffer and perform bounds checking whenever possible. The CommandLine::AddValue
variant for <code class="docutils literal notranslate"><span class="pre">char*</span></code> performs bounds checking and aborts the execution in case the parsed value
does not fit in the buffer. Make sure to pass the complete size of the buffer, including the null terminator.</p>
<p>There is an example below demonstrating how the memory corruption could happen in case there was
no bounds checking in CommandLine::AddValue variant for <code class="docutils literal notranslate"><span class="pre">char*</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ns</span> <span class="kn">import</span> <span class="n">ns</span>
<span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="n">c_char_p</span><span class="p">,</span> <span class="n">c_char</span><span class="p">,</span> <span class="n">create_string_buffer</span><span class="p">,</span> <span class="n">byref</span><span class="p">,</span> <span class="n">cast</span>

<span class="c1"># The following buffer represent the memory contents</span>
<span class="c1"># of a program containing two adjacent C strings</span>
<span class="c1"># This could be the result of two subsequent variables</span>
<span class="c1"># on the stack or dynamically allocated</span>
<span class="n">memoryContents</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;SHORT_STRING_CONTENTS</span><span class="se">\0</span><span class="s2">&quot;</span><span class="o">+</span><span class="sa">b</span><span class="s2">&quot;DoNotWriteHere_&quot;</span><span class="o">*</span><span class="mi">5</span><span class="o">+</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\0</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">lenShortString</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;SHORT_STRING_CONTENTS</span><span class="se">\0</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># In the next lines, we pick pointers to these two C strings</span>
<span class="n">shortStringBuffer</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">memoryContents</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">c_char_p</span><span class="p">)</span>
<span class="n">victimBuffer</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">memoryContents</span><span class="p">,</span> <span class="n">lenShortString</span><span class="p">),</span> <span class="n">c_char_p</span><span class="p">)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">CommandLine</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="c1"># in the real implementation, the buffer size of 21+1 bytes containing SHORT_STRING_CONTENTS\0 is passed</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">AddValue</span><span class="p">(</span><span class="s2">&quot;shortString&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">shortStringBuffer</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Memory contents before the memory corruption&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Full Memory contents&quot;</span><span class="p">,</span> <span class="n">memoryContents</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;shortStringBuffer contents: &quot;</span><span class="p">,</span> <span class="n">shortStringBuffer</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;victimBuffer contents: &quot;</span><span class="p">,</span> <span class="n">victimBuffer</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># The following block should print to the terminal.</span>
<span class="c1"># Note that the strings are correctly</span>
<span class="c1"># identified due to the null terminator (\x00)</span>
<span class="c1">#</span>
<span class="c1"># Memory contents before the memory corruption</span>
<span class="c1"># Full Memory contents b&#39;SHORT_STRING_CONTENTS\x00DoNotWriteHere_DoNotWriteHere_DoNotWriteHere_DoNotWriteHere_DoNotWriteHere_\x00\x00&#39;</span>
<span class="c1"># shortStringBuffer size=21, contents: b&#39;SHORT_STRING_CONTENTS&#39;</span>
<span class="c1"># victimBuffer size=75, contents: b&#39;DoNotWriteHere_DoNotWriteHere_DoNotWriteHere_DoNotWriteHere_DoNotWriteHere_&#39;</span>

<span class="c1"># Write a very long string to a small buffer of size lenShortString = 22</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">Parse</span><span class="p">([</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;--shortString=&quot;</span><span class="o">+</span><span class="p">(</span><span class="s2">&quot;OkToWrite&quot;</span><span class="o">*</span><span class="n">lenShortString</span><span class="p">)[:</span><span class="n">lenShortString</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;CORRUPTED_&quot;</span><span class="o">*</span><span class="mi">3</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Memory contents after the memory corruption&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Full Memory contents&quot;</span><span class="p">,</span> <span class="n">memoryContents</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;shortStringBuffer contents: &quot;</span><span class="p">,</span> <span class="n">shortStringBuffer</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;victimBuffer contents: &quot;</span><span class="p">,</span> <span class="n">victimBuffer</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

<span class="c1"># The following block should print to the terminal.</span>
<span class="c1">#</span>
<span class="c1"># Memory contents after the memory corruption</span>
<span class="c1"># Full Memory contents b&#39;OkToWriteOkToWriteOkToCORRUPTED_CORRUPTED_CORRUPTED_\x00oNotWriteHere_DoNotWriteHere_DoNotWriteHere_\x00\x00&#39;</span>
<span class="c1"># shortStringBuffer size=52, contents: b&#39;OkToWriteOkToWriteOkToCORRUPTED_CORRUPTED_CORRUPTED_&#39;</span>
<span class="c1"># victimBuffer size=30, contents: b&#39;CORRUPTED_CORRUPTED_CORRUPTED_&#39;</span>
<span class="c1">#</span>
<span class="c1"># Note that shortStringBuffer invaded the victimBuffer since the</span>
<span class="c1"># string being written was bigger than the shortStringBuffer.</span>
<span class="c1">#</span>
<span class="c1"># Since no bounds checks were performed, the adjacent memory got</span>
<span class="c1"># overwritten and both buffers are now corrupted.</span>
<span class="c1">#</span>
<span class="c1"># We also have a memory leak of the final block in the memory</span>
<span class="c1"># &#39;oNotWriteHere_DoNotWriteHere_DoNotWriteHere_\x00\x00&#39;, caused</span>
<span class="c1"># by the null terminator written at the middle of the victimBuffer.</span>
</pre></div>
</div>
<p>If you find a segmentation violation, be sure to wait for the stacktrace provided by Cppyy
and try to find the root cause of the issue. If you have multiple cores, the number of
stacktraces will correspond to the number of threads being executed by Cppyy. To limit them,
define the environment variable <cite>OPENBLAS_NUM_THREADS=1</cite>.</p>
</section>
<section id="operators">
<h4><span class="section-number">3.8.4.1.2. </span>Operators<a class="headerlink" href="#operators" title="Link to this heading">¶</a></h4>
<p>Cppyy may fail to map C++ operators due to the implementation style used by <em>ns-3</em>.
This happens for the fundamental type <cite>Time</cite>. To provide the expected behavior, we
redefine these operators from the Python side during the setup of the <em>ns-3</em> bindings
module (<cite>ns-3-dev/bindings/python/ns__init__.py</cite>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Redefine Time operators</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">cppdef</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    using namespace ns3;</span>
<span class="s2">    bool Time_ge(Time&amp; a, Time&amp; b){ return a &gt;= b;}</span>
<span class="s2">    bool Time_eq(Time&amp; a, Time&amp; b){ return a == b;}</span>
<span class="s2">    bool Time_ne(Time&amp; a, Time&amp; b){ return a != b;}</span>
<span class="s2">    bool Time_le(Time&amp; a, Time&amp; b){ return a &lt;= b;}</span>
<span class="s2">    bool Time_gt(Time&amp; a, Time&amp; b){ return a &gt; b;}</span>
<span class="s2">    bool Time_lt(Time&amp; a, Time&amp; b){ return a &lt; b;}</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">ns3</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="fm">__ge__</span> <span class="o">=</span> <span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">Time_ge</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">ns3</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="fm">__eq__</span> <span class="o">=</span> <span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">Time_eq</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">ns3</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="fm">__ne__</span> <span class="o">=</span> <span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">Time_ne</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">ns3</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="fm">__le__</span> <span class="o">=</span> <span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">Time_le</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">ns3</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="fm">__gt__</span> <span class="o">=</span> <span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">Time_gt</span>
<span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">ns3</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="fm">__lt__</span> <span class="o">=</span> <span class="n">cppyy</span><span class="o">.</span><span class="n">gbl</span><span class="o">.</span><span class="n">Time_lt</span>
</pre></div>
</div>
<p>A different operator used by <em>ns-3</em> is <cite>operator Address()</cite>, used to
convert different types of Addresses into the generic type Address.
This is not supported by Cppyy and requires explicit conversion.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Explicitly convert the InetSocketAddress to Address using InetSocketAddress.ConvertTo()</span>
<span class="n">sink</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">InetSocketAddress</span><span class="p">(</span><span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Ipv4Address</span><span class="o">.</span><span class="n">GetAny</span><span class="p">(),</span> <span class="mi">80</span><span class="p">)</span><span class="o">.</span><span class="n">ConvertTo</span><span class="p">())</span>
</pre></div>
</div>
<p>Most of the missing APIs can be wrapped, given enough time, patience, and expertise, and will likely be wrapped if bug reports are submitted.
However, don’t file a bug report saying “bindings are incomplete”, because the project does not have maintainers to maintain every API.</p>
</section>
</section>
<section id="tracing">
<h3><span class="section-number">3.8.4.2. </span>Tracing<a class="headerlink" href="#tracing" title="Link to this heading">¶</a></h3>
<p>Callback based tracing is not yet properly supported for Python, as new <em>ns-3</em> API needs to be provided for this to be supported.</p>
<p>Pcap file writing is supported via the normal API.</p>
<p>ASCII tracing is supported via the normal C++ API translated to Python.
However, ASCII tracing requires the creation of an ostream object to pass into the ASCII tracing methods.
In Python, the C++ std::ofstream has been minimally wrapped to allow this.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ascii</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">ofstream</span><span class="p">(</span><span class="s2">&quot;wifi-ap.tr&quot;</span><span class="p">)</span> <span class="c1"># create the file</span>
<span class="n">ns</span><span class="o">.</span><span class="n">YansWifiPhyHelper</span><span class="o">.</span><span class="n">EnableAsciiAll</span><span class="p">(</span><span class="n">ascii</span><span class="p">)</span>
<span class="n">ns</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Run</span><span class="p">()</span>
<span class="n">ns</span><span class="o">.</span><span class="n">Simulator</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
<span class="n">ascii</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># close the file</span>
</pre></div>
</div>
<p>There is one caveat: you must not allow the file object to be garbage collected while <em>ns-3</em> is still using it.
That means that the ‘ascii’ variable above must not be allowed to go out of scope or else the program will crash.</p>
</section>
</section>
<section id="working-with-python-bindings">
<h2><span class="section-number">3.8.5. </span>Working with Python Bindings<a class="headerlink" href="#working-with-python-bindings" title="Link to this heading">¶</a></h2>
<section id="overview">
<h3><span class="section-number">3.8.5.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h3>
<p>The python bindings are generated into an ‘ns’ namespace.  Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ns</span> <span class="kn">import</span> <span class="n">ns</span>
<span class="n">n1</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Node</span><span class="p">()</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ns</span> <span class="kn">import</span><span class="o">*</span>
<span class="n">n1</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">Node</span><span class="p">()</span>
</pre></div>
</div>
<p>The best way to explore the bindings is to look at the various example
programs provided in <em>ns-3</em>; some C++ examples have a corresponding Python
example.  There is no structured documentation for the Python bindings
like there is Doxygen for the C++ API, but the Doxygen can be consulted
to understand how the C++ API works.</p>
<p>To inspect what function and classes are available, you can use
the <code class="docutils literal notranslate"><span class="pre">dir</span></code> function. Examples below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt;<span class="w"> </span>print<span class="o">(</span>dir<span class="o">(</span>ns.Simulator<span class="o">))</span>
<span class="o">[</span><span class="s1">&#39;Cancel&#39;</span>,<span class="w"> </span><span class="s1">&#39;Destroy&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetContext&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetDelayLeft&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetEventCount&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetImplementation&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetMaximumSimulationTime&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetSystemId&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsExpired&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsFinished&#39;</span>,<span class="w"> </span><span class="s1">&#39;NO_CONTEXT&#39;</span>,<span class="w"> </span><span class="s1">&#39;Now&#39;</span>,<span class="w"> </span><span class="s1">&#39;Remove&#39;</span>,<span class="w"> </span><span class="s1">&#39;Run&#39;</span>,<span class="w"> </span><span class="s1">&#39;Schedule&#39;</span>,<span class="w"> </span><span class="s1">&#39;ScheduleDestroy&#39;</span>,<span class="w"> </span><span class="s1">&#39;ScheduleNow&#39;</span>,<span class="w"> </span><span class="s1">&#39;ScheduleWithContext&#39;</span>,<span class="w"> </span><span class="s1">&#39;SetImplementation&#39;</span>,<span class="w"> </span><span class="s1">&#39;SetScheduler&#39;</span>,<span class="w"> </span><span class="s1">&#39;Stop&#39;</span>,<span class="w"> </span><span class="s1">&#39;__add__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__assign__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__bool__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__class__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__delattr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__destruct__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dict__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dir__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dispatch__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__doc__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__eq__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__format__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__ge__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__getattribute__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__getitem__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__gt__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__hash__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__init__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__init_subclass__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__invert__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__le__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__lt__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__module__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__mul__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__ne__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__neg__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__new__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__pos__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__python_owns__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__radd__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reduce__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reduce_ex__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__repr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reshape__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rmul__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rsub__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rtruediv__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__setattr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__sizeof__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__smartptr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__str__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__sub__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__subclasshook__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__truediv__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__weakref__&#39;</span><span class="o">]</span>
&gt;&gt;&gt;<span class="w"> </span>print<span class="o">(</span>dir<span class="o">(</span>ns.DefaultSimulatorImpl<span class="o">))</span>
<span class="o">[</span><span class="s1">&#39;AggregateObject&#39;</span>,<span class="w"> </span><span class="s1">&#39;Cancel&#39;</span>,<span class="w"> </span><span class="s1">&#39;Destroy&#39;</span>,<span class="w"> </span><span class="s1">&#39;Dispose&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetAggregateIterator&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetAttribute&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetAttributeFailSafe&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetContext&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetDelayLeft&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetEventCount&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetInstanceTypeId&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetMaximumSimulationTime&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetObject&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetReferenceCount&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetSystemId&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetTypeId&#39;</span>,<span class="w"> </span><span class="s1">&#39;Initialize&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsExpired&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsFinished&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsInitialized&#39;</span>,<span class="w"> </span><span class="s1">&#39;Now&#39;</span>,<span class="w"> </span><span class="s1">&#39;PreEventHook&#39;</span>,<span class="w"> </span><span class="s1">&#39;Ref&#39;</span>,<span class="w"> </span><span class="s1">&#39;Remove&#39;</span>,<span class="w"> </span><span class="s1">&#39;Run&#39;</span>,<span class="w"> </span><span class="s1">&#39;Schedule&#39;</span>,<span class="w"> </span><span class="s1">&#39;ScheduleDestroy&#39;</span>,<span class="w"> </span><span class="s1">&#39;ScheduleNow&#39;</span>,<span class="w"> </span><span class="s1">&#39;ScheduleWithContext&#39;</span>,<span class="w"> </span><span class="s1">&#39;SetAttribute&#39;</span>,<span class="w"> </span><span class="s1">&#39;SetAttributeFailSafe&#39;</span>,<span class="w"> </span><span class="s1">&#39;SetScheduler&#39;</span>,<span class="w"> </span><span class="s1">&#39;Stop&#39;</span>,<span class="w"> </span><span class="s1">&#39;TraceConnect&#39;</span>,<span class="w"> </span><span class="s1">&#39;TraceConnectWithoutContext&#39;</span>,<span class="w"> </span><span class="s1">&#39;TraceDisconnect&#39;</span>,<span class="w"> </span><span class="s1">&#39;TraceDisconnectWithoutContext&#39;</span>,<span class="w"> </span><span class="s1">&#39;Unref&#39;</span>,<span class="w"> </span><span class="s1">&#39;__add__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__assign__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__bool__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__class__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__delattr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__destruct__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dict__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dir__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dispatch__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__doc__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__eq__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__format__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__ge__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__getattribute__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__getitem__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__gt__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__hash__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__init__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__init_subclass__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__invert__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__le__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__lt__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__module__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__mul__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__ne__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__neg__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__new__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__pos__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__python_owns__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__radd__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reduce__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reduce_ex__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__repr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reshape__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rmul__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rsub__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rtruediv__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__setattr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__sizeof__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__smartptr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__str__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__sub__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__subclasshook__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__truediv__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__weakref__&#39;</span><span class="o">]</span>
&gt;&gt;&gt;<span class="w"> </span>print<span class="o">(</span>dir<span class="o">(</span>ns.Time<span class="o">))</span>
<span class="o">[</span><span class="s1">&#39;AUTO&#39;</span>,<span class="w"> </span><span class="s1">&#39;As&#39;</span>,<span class="w"> </span><span class="s1">&#39;Compare&#39;</span>,<span class="w"> </span><span class="s1">&#39;D&#39;</span>,<span class="w"> </span><span class="s1">&#39;FS&#39;</span>,<span class="w"> </span><span class="s1">&#39;From&#39;</span>,<span class="w"> </span><span class="s1">&#39;FromDouble&#39;</span>,<span class="w"> </span><span class="s1">&#39;FromInteger&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetDays&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetDouble&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetFemtoSeconds&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetHours&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetInteger&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetMicroSeconds&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetMilliSeconds&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetMinutes&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetNanoSeconds&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetPicoSeconds&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetResolution&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetSeconds&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetTimeStep&#39;</span>,<span class="w"> </span><span class="s1">&#39;GetYears&#39;</span>,<span class="w"> </span><span class="s1">&#39;H&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsNegative&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsPositive&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsStrictlyNegative&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsStrictlyPositive&#39;</span>,<span class="w"> </span><span class="s1">&#39;IsZero&#39;</span>,<span class="w"> </span><span class="s1">&#39;LAST&#39;</span>,<span class="w"> </span><span class="s1">&#39;MIN&#39;</span>,<span class="w"> </span><span class="s1">&#39;MS&#39;</span>,<span class="w"> </span><span class="s1">&#39;Max&#39;</span>,<span class="w"> </span><span class="s1">&#39;Min&#39;</span>,<span class="w"> </span><span class="s1">&#39;NS&#39;</span>,<span class="w"> </span><span class="s1">&#39;PS&#39;</span>,<span class="w"> </span><span class="s1">&#39;RoundTo&#39;</span>,<span class="w"> </span><span class="s1">&#39;S&#39;</span>,<span class="w"> </span><span class="s1">&#39;SetResolution&#39;</span>,<span class="w"> </span><span class="s1">&#39;StaticInit&#39;</span>,<span class="w"> </span><span class="s1">&#39;To&#39;</span>,<span class="w"> </span><span class="s1">&#39;ToDouble&#39;</span>,<span class="w"> </span><span class="s1">&#39;ToInteger&#39;</span>,<span class="w"> </span><span class="s1">&#39;US&#39;</span>,<span class="w"> </span><span class="s1">&#39;Y&#39;</span>,<span class="w"> </span><span class="s1">&#39;__add__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__assign__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__bool__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__class__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__delattr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__destruct__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dict__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dir__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__dispatch__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__doc__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__eq__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__format__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__ge__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__getattribute__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__getitem__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__gt__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__hash__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__init__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__init_subclass__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__invert__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__le__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__lt__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__module__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__mul__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__ne__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__neg__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__new__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__pos__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__python_owns__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__radd__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reduce__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reduce_ex__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__repr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__reshape__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rmul__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rsub__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__rtruediv__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__setattr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__sizeof__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__smartptr__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__str__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__sub__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__subclasshook__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__truediv__&#39;</span>,<span class="w"> </span><span class="s1">&#39;__weakref__&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>To get more information about expected arguments, you can use the <code class="docutils literal notranslate"><span class="pre">help</span></code>
function.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt;<span class="w"> </span>help<span class="o">(</span>ns.DefaultSimulatorImpl<span class="o">)</span>
class<span class="w"> </span>DefaultSimulatorImpl<span class="o">(</span>SimulatorImpl<span class="o">)</span>
<span class="p">|</span><span class="w">  </span>Method<span class="w"> </span>resolution<span class="w"> </span>order:
<span class="p">|</span><span class="w">      </span>DefaultSimulatorImpl
<span class="p">|</span><span class="w">      </span>SimulatorImpl
<span class="p">|</span><span class="w">      </span>Object
<span class="p">|</span><span class="w">      </span>SimpleRefCount&lt;ns3::Object,ns3::ObjectBase,ns3::ObjectDeleter&gt;
<span class="p">|</span><span class="w">      </span>ObjectBase
<span class="p">|</span><span class="w">      </span>cppyy.gbl.CPPInstance
<span class="p">|</span><span class="w">      </span>builtins.object
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>Methods<span class="w"> </span>defined<span class="w"> </span>here:
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>Cancel<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>void<span class="w"> </span>ns3::DefaultSimulatorImpl::Cancel<span class="o">(</span>const<span class="w"> </span>ns3::EventId<span class="p">&amp;</span><span class="w"> </span>id<span class="o">)</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>Destroy<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>void<span class="w"> </span>ns3::DefaultSimulatorImpl::Destroy<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>GetContext<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>unsigned<span class="w"> </span>int<span class="w"> </span>ns3::DefaultSimulatorImpl::GetContext<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>GetDelayLeft<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>ns3::Time<span class="w"> </span>ns3::DefaultSimulatorImpl::GetDelayLeft<span class="o">(</span>const<span class="w"> </span>ns3::EventId<span class="p">&amp;</span><span class="w"> </span>id<span class="o">)</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>GetEventCount<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>unsigned<span class="w"> </span>long<span class="w"> </span>ns3::DefaultSimulatorImpl::GetEventCount<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>GetMaximumSimulationTime<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>ns3::Time<span class="w"> </span>ns3::DefaultSimulatorImpl::GetMaximumSimulationTime<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>GetSystemId<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>unsigned<span class="w"> </span>int<span class="w"> </span>ns3::DefaultSimulatorImpl::GetSystemId<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>GetTypeId<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>static<span class="w"> </span>ns3::TypeId<span class="w"> </span>ns3::DefaultSimulatorImpl::GetTypeId<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>IsExpired<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>bool<span class="w"> </span>ns3::DefaultSimulatorImpl::IsExpired<span class="o">(</span>const<span class="w"> </span>ns3::EventId<span class="p">&amp;</span><span class="w"> </span>id<span class="o">)</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>IsFinished<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>bool<span class="w"> </span>ns3::DefaultSimulatorImpl::IsFinished<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>Now<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>ns3::Time<span class="w"> </span>ns3::DefaultSimulatorImpl::Now<span class="o">()</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>Remove<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>void<span class="w"> </span>ns3::DefaultSimulatorImpl::Remove<span class="o">(</span>const<span class="w"> </span>ns3::EventId<span class="p">&amp;</span><span class="w"> </span>id<span class="o">)</span>
<span class="p">|</span>
<span class="p">|</span><span class="w">  </span>Run<span class="o">(</span>...<span class="o">)</span>
<span class="p">|</span><span class="w">      </span>void<span class="w"> </span>ns3::DefaultSimulatorImpl::Run<span class="o">()</span>
</pre></div>
</div>
</section>
</section>
<section id="pip-wheel-packaging">
<h2><span class="section-number">3.8.6. </span>Pip wheel packaging<a class="headerlink" href="#pip-wheel-packaging" title="Link to this heading">¶</a></h2>
<p>This section is meant exclusively for ns-3 maintainers and ns-3
users that want to redistribute their work as wheels for python.</p>
<p>The packaging process is defined in the following GitLab job.
The job is split into blocks explained below.</p>
<p>The manylinux image provides an old glibc compatible with most modern Linux
distributions, resulting on a pip wheel that is compatible across distributions.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">.manylinux-pip-wheel</span><span class="p">:</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/pypa/manylinux_2_28_x86_64</span>
</pre></div>
</div>
<p>Then we install the required toolchain and dependencies necessary for both
ns-3 (e.g. libxml2, gsl, sqlite, gtk, etc) and for the bindings and packaging
(e.g. setuptools, wheel, auditwheel, cmake-build-extension, cppyy).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install minimal toolchain</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yum install -y libxml2-devel gsl-devel sqlite-devel gtk3-devel boost-devel</span>
<span class="c1"># Create Python venv</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m venv ./venv</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">. ./venv/bin/activate</span>
<span class="c1"># Upgrade the pip version to reuse the pre-build cppyy</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m pip install pip --upgrade</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m pip install setuptools setuptools_scm --upgrade</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m pip install wheel auditwheel cmake-build-extension cppyy</span>
</pre></div>
</div>
<p>The project is then configured loading the configuration settings defined
in the <code class="docutils literal notranslate"><span class="pre">ns-3-dev/setup.py</span></code> file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configure and build wheel</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON setup.py bdist_wheel build_ext</span>
</pre></div>
</div>
<p>At this point, we have a wheel that only works in the current system,
since external libraries are not shipped.</p>
<p>Auditwheel needs to be called resolve and copy external libraries
that we need to ship along the ns-3 module libraries (e.g. libxml2, sqlite3,
gtk, gsl, etc). However, we need to prevent auditwheel from shipping copies of
the libraries built by the ns-3 project. A list of excluded libraries is generated
by the script <code class="docutils literal notranslate"><span class="pre">ns-3-dev/build-support/pip-wheel/auditwheel-exclude-list.py</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">export EXCLUDE_INTERNAL_LIBRARIES=`$PYTHON ./build-support/pip-wheel/auditwheel-exclude-list.py`</span>
<span class="c1"># Bundle in shared libraries that were not explicitly packaged or depended upon</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m auditwheel repair ./dist/*whl -L /lib64 $EXCLUDE_INTERNAL_LIBRARIES</span>
</pre></div>
</div>
<p>At this point, we should have our final wheel ready, but we need to check if it works
before submitting it to Pypi servers.</p>
<p>We first clean the environment and uninstall the packages previously installed.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clean the build directory</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./ns3 clean</span>
<span class="c1"># Clean up the environment</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deactivate</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rm -R ./venv</span>
<span class="c1"># Delete toolchain to check if required headers/libraries were really packaged</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yum remove -y libxml2-devel gsl-devel sqlite-devel gtk3-devel boost-devel</span>
</pre></div>
</div>
<p>Then we can install our newly built wheel and test it.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install wheel</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m pip install ./wheelhouse/*whl</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON -m pip install matplotlib numpy</span>
<span class="c1"># Test the bindings</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./utils/python-unit-tests.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/realtime/realtime-udp-echo.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/routing/simple-routing-ping6.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/tutorial/first.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/tutorial/second.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/tutorial/third.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/wireless/wifi-ap.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./examples/wireless/mixed-wired-wireless.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/bridge/examples/csma-bridge.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/brite/examples/brite-generic-example.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/core/examples/sample-simulator.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/core/examples/sample-rng-plot.py --not-blocking</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/click/examples/nsclick-simple-lan.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/flow-monitor/examples/wifi-olsr-flowmon.py</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/flow-monitor/examples/flowmon-parse-results.py output.xml</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$PYTHON ./src/openflow/examples/openflow-switch.py</span>
</pre></div>
</div>
<p>If all programs finish normally, the bindings are working as expected,
and will be saved as an artifact.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">artifacts</span><span class="p">:</span>
<span class="w">  </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wheelhouse/*.whl</span>
</pre></div>
</div>
<p>One can use <code class="docutils literal notranslate"><span class="pre">gitlab-ci-local</span></code> to build the pip wheels locally. After that, the wheels
will be stored in <code class="docutils literal notranslate"><span class="pre">.gitlab-ci-local/artifacts/manylinux-pip-wheel-py3Lg10/wheelhouse</span></code>
(for Python 3.10).</p>
<p>The wheel names are based on the number of commits since the latest release.
For example, a wheel built 415 after the release 3.37 will be named
<code class="docutils literal notranslate"><span class="pre">ns3-3.37.post415-cp310-cp310-manylinux_2_28_x86_64.whl</span></code>.</p>
<p>The wheel name (<code class="docutils literal notranslate"><span class="pre">ns3</span></code>) is defined in the <code class="docutils literal notranslate"><span class="pre">/ns-3-dev/setup.cfg</span></code> file, and that
name should match the build prefix specified in <code class="docutils literal notranslate"><span class="pre">/ns-3-dev/setup.py</span></code> file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cp310-cp310</span></code> indicates that this wheel is compatible from Python 3.10 and up to Python 3.10.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">manylinux_2_28</span></code> indicates that this is a manylinux wheel targeting glibc 2.28.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> indicates that this is a 64-bit build targeting Intel/AMD processors.</p>
<p>After packaging, we can either deploy that wheel locally or upload the wheel to Pypi for general availability.</p>
</section>
<section id="local-deployment">
<h2><span class="section-number">3.8.7. </span>Local deployment<a class="headerlink" href="#local-deployment" title="Link to this heading">¶</a></h2>
<p>To deploy a wheel locally, simply share the wheel file across the desired machines.
Then install the wheel and its dependencies running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>*.whl
</pre></div>
</div>
</section>
<section id="publishing-the-pip-wheel-via-pypi">
<h2><span class="section-number">3.8.8. </span>Publishing the pip wheel via Pypi<a class="headerlink" href="#publishing-the-pip-wheel-via-pypi" title="Link to this heading">¶</a></h2>
<p>Publishing a pip wheel requires a <a class="reference external" href="https://pypi.org/account/register/">Pypi</a> account.</p>
<p>After creating your account, install <a class="reference external" href="https://twine.readthedocs.io/en/stable/">Twine</a>, an utility to upload the wheel to Pypi.</p>
<p>Then run twine to upload the wheel to the Pypi servers.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>twine<span class="w"> </span>upload<span class="w"> </span>.gitlab-ci-local/artifacts/manylinux-pip-wheel-py3Lg10/wheelhouse/*.whl
</pre></div>
</div>
<p>Enter your Pypi username and password as requested.</p>
<p>Your wheel should be up and running. Give it a try just to make sure.</p>
<p>For the upstream pip wheel, try:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>ns3
$<span class="w"> </span>python3<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from ns import ns; print(ns.Simulator.Now())&quot;</span>
</pre></div>
</div>
</section>
<section id="historical-information">
<h2><span class="section-number">3.8.9. </span>Historical Information<a class="headerlink" href="#historical-information" title="Link to this heading">¶</a></h2>
<p>If you are a developer and need more background information on <em>ns-3</em>’s Python bindings,
please see the <a class="reference external" href="http://www.nsnam.org/wiki/NS-3_Python_Bindings">Python Bindings wiki page</a>.
Please note, however, that some information on that page is stale.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.8. Using Python to Run <em>ns-3</em></a><ul>
<li><a class="reference internal" href="#introduction">3.8.1. Introduction</a></li>
<li><a class="reference internal" href="#an-example-python-script-that-runs-ns3">3.8.2. An Example Python Script that Runs <em>ns-3</em></a></li>
<li><a class="reference internal" href="#running-python-scripts">3.8.3. Running Python Scripts</a><ul>
<li><a class="reference internal" href="#using-the-bindings-from-the-ns-3-source">3.8.3.1. Using the bindings from the ns-3 source</a></li>
<li><a class="reference internal" href="#using-the-pip-wheel">3.8.3.2. Using the pip wheel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#caveats">3.8.4. Caveats</a><ul>
<li><a class="reference internal" href="#incomplete-coverage">3.8.4.1. Incomplete Coverage</a><ul>
<li><a class="reference internal" href="#memory-management-issues">3.8.4.1.1. Memory-management issues</a></li>
<li><a class="reference internal" href="#operators">3.8.4.1.2. Operators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tracing">3.8.4.2. Tracing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-python-bindings">3.8.5. Working with Python Bindings</a><ul>
<li><a class="reference internal" href="#overview">3.8.5.1. Overview</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pip-wheel-packaging">3.8.6. Pip wheel packaging</a></li>
<li><a class="reference internal" href="#local-deployment">3.8.7. Local deployment</a></li>
<li><a class="reference internal" href="#publishing-the-pip-wheel-via-pypi">3.8.8. Publishing the pip wheel via Pypi</a></li>
<li><a class="reference internal" href="#historical-information">3.8.9. Historical Information</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="gnuplot.html"
                          title="previous chapter"><span class="section-number">3.7. </span>Making Plots using the Gnuplot Class</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="develop.html"
                          title="next chapter"><span class="section-number">4. </span>Developer Tools</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/python.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="develop.html" title="4. Developer Tools"
             >next</a> |</li>
        <li class="right" >
          <a href="gnuplot.html" title="3.7. Making Plots using the Gnuplot Class"
             >previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Manual</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="features.html" ><span class="section-number">3. </span>Additional Tools</a><span class="navelem">&nbsp;</span></li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.8. </span>Using Python to Run <em>ns-3</em></a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2006-2019, ns-3 project.
      Last updated on Mar 22, 2024 15:58.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>