

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Animation &#8212; Model Library</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Antenna Module" href="antenna.html" />
    <link rel="prev" title="Organization" href="organization.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico" 
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>
      

  </head><body>
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0" width="100%">
      <tbody>
	<tr style="height: 56px;">
	  <td id="projectlogo">
	    <a id="ns3_home1"
	       href="http://www.nsnam.org/">
	       <img alt="ns-3 Logo"
		    src="_static/ns-3-inverted-notext-small.png"/>
	    </a>
	  </td>
	  <td id="projecttext">
	    <div id="projectbrief">A Discrete-Event Network Simulator</div>
	      <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
	  </td>
	      
	  <td id="ns3-menu">
	    <div class="menu">
	      <ul >
	        <li><a id="ns3_home2"
		       href="http://www.nsnam.org/"
		       >&nbsp;&nbsp;Home</a>
	        </li>
	        <li><span
		      onmouseover="mopen('mTuts')" 
		      onmouseout="mclosetime()"
			>Tutorials &nbsp;&#x25BC;</span>
		    <div id="mTuts" 
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_tut"
			 href="/docs/tutorial/html/index.html"
			  >English</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDocs')" 
		      onmouseout="mclosetime()"
			>Docs &nbsp;&nbsp;&nbsp;&#x25BC;</span>
		    <div id="mDocs"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_wiki"
			 href="http://www.nsnam.org/wiki"
			 >Wiki</a><br/>
		      <a id="ns3_man"
			 href="/docs/manual/html/index.html"
			 >Manual</a><br/>
		      <a id="ns3_mod"
			 href="/docs/models/html/index.html"
			 >Models</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDev')" 
		      onmouseout="mclosetime()"
			>Develop &#x25BC;</span>
		    <div id="mDev"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_api"
			 href="/docs/doxygen/html/index.html"
			 >API</a><br/>
		      <a id="ns3_bugs"
		       href="http://www.nsnam.org/bugzilla/">Bugs</a>
	        </li>
	      </ul>
	    </div>
	  </td>
	  <td id="projectsection">
	    <span style="margin-right:10px">Models</span>
	  </td>
	</tr>
      </tbody>
    </table>
    <script  type="text/javascript">ns3_write_links()</script>
  </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="antenna.html" title="Antenna Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="organization.html" title="Organization"
             accesskey="P">previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="animation">
<h1>Animation<a class="headerlink" href="#animation" title="Permalink to this headline">¶</a></h1>
<p>Animation is an important tool for network simulation. While <em>ns-3</em> does not
contain a default graphical animation tool, we currently have two ways to provide
animation, namely using the PyViz method or the NetAnim method.
The PyViz method is described in <a class="reference external" href="http://www.nsnam.org/wiki/PyViz">http://www.nsnam.org/wiki/PyViz</a>.</p>
<p>We will describe the NetAnim method briefly here.</p>
<div class="section" id="netanim">
<h2>NetAnim<a class="headerlink" href="#netanim" title="Permalink to this headline">¶</a></h2>
<p>NetAnim is a standalone, Qt4-based software executable that uses a trace file generated during
an <em>ns-3</em> simulation to display the topology and animate the packet flow between nodes.</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/NetAnim_3_105.png"><img alt="_images/NetAnim_3_105.png" src="_images/NetAnim_3_105.png" style="width: 500px; height: 400px;" /></a>
<p class="caption"><span class="caption-text">An example of packet animation on wired-links</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>In addition, NetAnim also provides useful features such as tables to display meta-data of packets like the image below</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="_images/PacketStatistics.png"><img alt="_images/PacketStatistics.png" src="_images/PacketStatistics.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">An example of tables for packet meta-data with protocol filters</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>A way to visualize the trajectory of a mobile node</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="_images/Trajectory.png"><img alt="_images/Trajectory.png" src="_images/Trajectory.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">An example of the trajectory of a mobile node</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>A way to display the routing-tables of multiple nodes at various points in time</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/RoutingTables.png"><img alt="_images/RoutingTables.png" src="_images/RoutingTables.png" style="width: 500px;" /></a>
</div>
<p>A way to display counters associated with multiple nodes as a chart or a table</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/NodeCountersChart.png"><img alt="_images/NodeCountersChart.png" src="_images/NodeCountersChart.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/NodeCountersTable.png"><img alt="_images/NodeCountersTable.png" src="_images/NodeCountersTable.png" style="width: 500px;" /></a>
</div>
<p>A way to view the timeline of packet transmit and receive events</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/PacketTimeline.png"><img alt="_images/PacketTimeline.png" src="_images/PacketTimeline.png" style="width: 500px;" /></a>
</div>
<div class="section" id="methodology">
<h3>Methodology<a class="headerlink" href="#methodology" title="Permalink to this headline">¶</a></h3>
<p>The class ns3::AnimationInterface is responsible for the creation the trace XML file.
AnimationInterface uses the tracing infrastructure to track packet flows between nodes.
AnimationInterface registers itself as a trace hook for tx and rx events before the simulation
begins. When a packet is scheduled for transmission or reception, the corresponding tx and rx
trace hooks in AnimationInterface are called. When the rx hooks are called, AnimationInterface will be aware of the two endpoints between which a packet has flowed, and adds this information
to the trace file, in XML format along with the corresponding tx and rx timestamps. The XML format
will be discussed in a later section. It is important to note that AnimationInterface records a
packet only if the rx trace hooks are called. Every tx event must be matched by an rx event.</p>
</div>
<div class="section" id="downloading-netanim">
<h3>Downloading NetAnim<a class="headerlink" href="#downloading-netanim" title="Permalink to this headline">¶</a></h3>
<p>If NetAnim is not already available in the <em>ns-3</em> package you downloaded, you can do the following:</p>
<p>Please ensure that you have installed mercurial.
The latest version of NetAnim can be downloaded using mercurial with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ hg clone http://code.nsnam.org/netanim
</pre></div>
</div>
</div>
<div class="section" id="building-netanim">
<h3>Building NetAnim<a class="headerlink" href="#building-netanim" title="Permalink to this headline">¶</a></h3>
<div class="section" id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>Qt5 (5.4 and over) is required to build NetAnim. This can be obtained using the following ways:</p>
<p>For Ubuntu Linux distributions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ apt-get install qt5-default
</pre></div>
</div>
<p>For Red Hat/Fedora based distribution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ yum install qt5
$ yum install qt5-devel
</pre></div>
</div>
<p>For Mac/OSX, see <a class="reference external" href="http://qt.nokia.com/downloads/">http://qt.nokia.com/downloads/</a></p>
</div>
<div class="section" id="build-steps">
<h4>Build steps<a class="headerlink" href="#build-steps" title="Permalink to this headline">¶</a></h4>
<p>To build NetAnim use the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> netanim
$ make clean
$ qmake NetAnim.pro
$ make
</pre></div>
</div>
<p>Note: qmake could be “qmake-qt5” in some systems</p>
<p>This should create an executable named “NetAnim” in the same directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> $ ls -l NetAnim
-rwxr-xr-x <span class="m">1</span> john john <span class="m">390395</span> <span class="m">2012</span>-05-22 <span class="m">08</span>:32 NetAnim
</pre></div>
</div>
</div>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Using NetAnim is a two-step process</p>
<p>Step 1:Generate the animation XML trace file during simulation using “ns3::AnimationInterface” in the <em>ns-3</em> code base.</p>
<p>Step 2:Load the XML trace file generated in Step 1 with the offline Qt4-based animator named NetAnim.</p>
<div class="section" id="step-1-generate-xml-animation-trace-file">
<h4>Step 1: Generate XML animation trace file<a class="headerlink" href="#step-1-generate-xml-animation-trace-file" title="Permalink to this headline">¶</a></h4>
<p>The class “AnimationInterface” under “src/netanim” uses underlying <em>ns-3</em> trace sources
to construct a timestamped ASCII file in XML format.</p>
<p>Examples are found under src/netanim/examples
Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./waf -d debug configure --enable-examples
$ ./waf --run <span class="s2">&quot;dumbbell-animation&quot;</span>
</pre></div>
</div>
<p>The above will create an XML file dumbbell-animation.xml</p>
<div class="section" id="mandatory">
<h5>Mandatory<a class="headerlink" href="#mandatory" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Ensure that your program’s wscript includes the “netanim” module. An example of such a wscript is at src/netanim/examples/wscript.</p></li>
<li><p>Include the header [#include “ns3/netanim-module.h”] in your test program</p></li>
<li><p>Add the statement</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AnimationInterface</span> <span class="nf">anim</span> <span class="p">(</span><span class="s">&quot;animation.xml&quot;</span><span class="p">);</span>  <span class="c1">// where &quot;animation.xml&quot; is any arbitrary filename</span>
</pre></div>
</div>
<p>[for versions before ns-3.13 you also have to use the line “anim.SetXMLOutput() to set the XML mode and also use anim.StartAnimation();]</p>
</div>
<div class="section" id="optional">
<h5>Optional<a class="headerlink" href="#optional" title="Permalink to this headline">¶</a></h5>
<p>The following are optional but useful steps:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 1</span>
<span class="n">anim</span><span class="p">.</span><span class="n">SetMobilityPollInterval</span> <span class="p">(</span><span class="n">Seconds</span> <span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</pre></div>
</div>
<p>AnimationInterface records the position of all nodes every 250 ms by default. The statement above sets
the periodic interval at which AnimationInterface records the position of all nodes. If the nodes are
expected to move very little, it is useful to set a high mobility poll interval to avoid large XML files.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 2</span>
<span class="n">anim</span><span class="p">.</span><span class="n">SetConstantPosition</span> <span class="p">(</span><span class="n">Ptr</span><span class="o">&lt;</span> <span class="n">Node</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">,</span> <span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
<p>AnimationInterface requires that the position of all nodes be set. In <em>ns-3</em> this is done by setting an associated MobilityModel. “SetConstantPosition” is a quick way to set the x-y coordinates of a node which is stationary.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 3</span>
<span class="n">anim</span><span class="p">.</span><span class="n">SetStartTime</span> <span class="p">(</span><span class="n">Seconds</span><span class="p">(</span><span class="mi">150</span><span class="p">));</span> <span class="n">and</span> <span class="n">anim</span><span class="p">.</span><span class="n">SetStopTime</span> <span class="p">(</span><span class="n">Seconds</span><span class="p">(</span><span class="mi">150</span><span class="p">));</span>
</pre></div>
</div>
<p>AnimationInterface can generate large XML files. The above statements restricts the window between which AnimationInterface does tracing. Restricting the window serves to focus only on relevant portions of the simulation and creating manageably small XML files</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 4</span>
<span class="n">AnimationInterface</span> <span class="nf">anim</span> <span class="p">(</span><span class="s">&quot;animation.xml&quot;</span><span class="p">,</span> <span class="mi">50000</span><span class="p">);</span>
</pre></div>
</div>
<p>Using the above constructor ensures that each animation XML trace file has only 50000 packets. For example, if AnimationInterface captures 150000 packets, using the above constructor splits the capture into 3 files</p>
<ul class="simple">
<li><p>animation.xml - containing the packet range 1-50000</p></li>
<li><p>animation.xml-1 - containing the packet range 50001-100000</p></li>
<li><p>animation.xml-2 - containing the packet range 100001-150000</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 5</span>
<span class="n">anim</span><span class="p">.</span><span class="n">EnablePacketMetadata</span> <span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface records the meta-data of each packet in the xml trace file. Metadata can be used by NetAnim to provide better statistics and filter, along with providing some brief information about the packet such as TCP sequence number or source &amp; destination IP address during packet animation.</p>
<p>CAUTION: Enabling this feature will result in larger XML trace files.
Please do NOT enable this feature when using Wimax links.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 6</span>
<span class="n">anim</span><span class="p">.</span><span class="n">UpdateNodeDescription</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">&quot;Access-point&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface assigns the text “Access-point” to node 5.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 7</span>
<span class="n">anim</span><span class="p">.</span><span class="n">UpdateNodeSize</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface sets the node size to scale by 1.5. NetAnim automatically scales the graphics view to fit the oboundaries of the topology. This means that NetAnim, can abnormally scale a node’s size too high or too low. Using AnimationInterface::UpdateNodeSize allows you to overwrite the default scaling in NetAnim and use your own custom scale.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Step 8</span>
<span class="n">anim</span><span class="p">.</span><span class="n">UpdateNodeCounter</span> <span class="p">(</span><span class="mi">89</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">);</span>
</pre></div>
</div>
<p>With the above statement, AnimationInterface sets the counter with Id == 89, associated with Node 7 with the value 3.4.
The counter with Id 89 is obtained using AnimationInterface::AddNodeCounter. An example usage for this is in src/netanim/examples/resource-counters.cc.</p>
</div>
</div>
<div class="section" id="step-2-loading-the-xml-in-netanim">
<h4>Step 2: Loading the XML in NetAnim<a class="headerlink" href="#step-2-loading-the-xml-in-netanim" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Assuming NetAnim was built, use the command “./NetAnim” to launch NetAnim. Please review the section “Building NetAnim” if NetAnim is not available.</p></li>
<li><p>When NetAnim is opened, click on the File open button at the top-left corner, select the XML file generated during Step 1.</p></li>
<li><p>Hit the green play button to begin animation.</p></li>
</ol>
<p>Here is a video illustrating this
<a class="reference external" href="http://www.youtube.com/watch?v=tz_hUuNwFDs">http://www.youtube.com/watch?v=tz_hUuNwFDs</a></p>
</div>
</div>
<div class="section" id="wiki">
<h3>Wiki<a class="headerlink" href="#wiki" title="Permalink to this headline">¶</a></h3>
<p>For detailed instructions on installing “NetAnim”, F.A.Qs and loading the XML trace file
(mentioned earlier) using NetAnim please refer:
<a class="reference external" href="http://www.nsnam.org/wiki/NetAnim">http://www.nsnam.org/wiki/NetAnim</a></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Animation</a><ul>
<li><a class="reference internal" href="#netanim">NetAnim</a><ul>
<li><a class="reference internal" href="#methodology">Methodology</a></li>
<li><a class="reference internal" href="#downloading-netanim">Downloading NetAnim</a></li>
<li><a class="reference internal" href="#building-netanim">Building NetAnim</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#build-steps">Build steps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#step-1-generate-xml-animation-trace-file">Step 1: Generate XML animation trace file</a><ul>
<li><a class="reference internal" href="#mandatory">Mandatory</a></li>
<li><a class="reference internal" href="#optional">Optional</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-loading-the-xml-in-netanim">Step 2: Loading the XML in NetAnim</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wiki">Wiki</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="organization.html"
                        title="previous chapter">Organization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="antenna.html"
                        title="next chapter">Antenna Module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/animation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="antenna.html" title="Antenna Module"
             >next</a> |</li>
        <li class="right" >
          <a href="organization.html" title="Organization"
             >previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2019.
      Last updated on Apr 29, 2020 17:37.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.2.
    </div>
  </body>
</html>