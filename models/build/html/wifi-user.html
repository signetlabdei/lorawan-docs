

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>User Documentation &#8212; Model Library</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing Documentation" href="wifi-testing.html" />
    <link rel="prev" title="Design Documentation" href="wifi-design.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico" 
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>
      

  </head><body>
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0" width="100%">
      <tbody>
	<tr style="height: 56px;">
	  <td id="projectlogo">
	    <a id="ns3_home1"
	       href="http://www.nsnam.org/">
	       <img alt="ns-3 Logo"
		    src="_static/ns-3-inverted-notext-small.png"/>
	    </a>
	  </td>
	  <td id="projecttext">
	    <div id="projectbrief">A Discrete-Event Network Simulator</div>
	      <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
	  </td>
	      
	  <td id="ns3-menu">
	    <div class="menu">
	      <ul >
	        <li><a id="ns3_home2"
		       href="http://www.nsnam.org/"
		       >&nbsp;&nbsp;Home</a>
	        </li>
	        <li><span
		      onmouseover="mopen('mTuts')" 
		      onmouseout="mclosetime()"
			>Tutorials &nbsp;&#x25BC;</span>
		    <div id="mTuts" 
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_tut"
			 href="/docs/tutorial/html/index.html"
			  >English</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDocs')" 
		      onmouseout="mclosetime()"
			>Docs &nbsp;&nbsp;&nbsp;&#x25BC;</span>
		    <div id="mDocs"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_wiki"
			 href="http://www.nsnam.org/wiki"
			 >Wiki</a><br/>
		      <a id="ns3_man"
			 href="/docs/manual/html/index.html"
			 >Manual</a><br/>
		      <a id="ns3_mod"
			 href="/docs/models/html/index.html"
			 >Models</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDev')" 
		      onmouseout="mclosetime()"
			>Develop &#x25BC;</span>
		    <div id="mDev"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_api"
			 href="/docs/doxygen/html/index.html"
			 >API</a><br/>
		      <a id="ns3_bugs"
		       href="http://www.nsnam.org/bugzilla/">Bugs</a>
	        </li>
	      </ul>
	    </div>
	  </td>
	  <td id="projectsection">
	    <span style="margin-right:10px">Models</span>
	  </td>
	</tr>
      </tbody>
    </table>
    <script  type="text/javascript">ns3_write_links()</script>
  </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="wifi-testing.html" title="Testing Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="wifi-design.html" title="Design Documentation"
             accesskey="P">previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="wifi.html" accesskey="U">Wi-Fi Module</a><span class="navelem">&nbsp;</span></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-documentation">
<h1>User Documentation<a class="headerlink" href="#user-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="using-the-wifinetdevice">
<h2>Using the WifiNetDevice<a class="headerlink" href="#using-the-wifinetdevice" title="Permalink to this headline">¶</a></h2>
<p>The modularity provided by the implementation makes low-level configuration of
the WifiNetDevice powerful but complex. For this reason, we provide some helper
classes to perform common operations in a simple matter, and leverage the <em>ns-3</em>
attribute system to allow users to control the parameterization of the underlying
models.</p>
<p>Users who use the low-level <em>ns-3</em> API and who wish to add a WifiNetDevice to
their node must create an instance of a WifiNetDevice, plus a number of
constituent objects, and bind them together appropriately (the WifiNetDevice is
very modular in this regard, for future extensibility). At the low-level API,
this can be done with about 20 lines of code (see <code class="docutils literal notranslate"><span class="pre">ns3::WifiHelper::Install</span></code>,
and <code class="docutils literal notranslate"><span class="pre">ns3::YansWifiPhyHelper::Create</span></code>). They also must create, at some point, a
Channel, which also contains a number of constituent objects (see
<code class="docutils literal notranslate"><span class="pre">ns3::YansWifiChannelHelper::Create</span></code>).</p>
<p>However, a few helpers are available for users to add these devices and channels
with only a few lines of code, if they are willing to use defaults, and the
helpers provide additional API to allow the passing of attribute values to
change default values.  Commonly used attribute values are listed in the
Attributes section.  The scripts in <code class="docutils literal notranslate"><span class="pre">examples/wireless</span></code> can be browsed to
see how this is done.  Next, we describe the common steps to create a WifiNetDevice
from the bottom layer (Channel) up to the device layer (WifiNetDevice).</p>
<p>To create a WifiNetDevice, users need to follow these steps:</p>
<ul class="simple">
<li><p>Decide on which physical layer framework, the <code class="docutils literal notranslate"><span class="pre">SpectrumWifiPhy</span></code> or
<code class="docutils literal notranslate"><span class="pre">YansWifiPhy</span></code>, to use.  This will affect which Channel and Phy type to use.</p></li>
<li><p>Configure the Channel: Channel takes care of getting signal
from one device to other devices on the same Wi-Fi channel.
The main configurations of WifiChannel are propagation loss model and propagation delay model.</p></li>
<li><p>Configure the WifiPhy: WifiPhy takes care of actually sending and receiving wireless
signal from Channel.  Here, WifiPhy decides whether each frame will be successfully
decoded or not depending on the received signal strength and noise.  Thus, the main
configuration of WifiPhy is the error rate model, which is the one that actually
calculates the probability of successfully decoding the frame based on the signal.</p></li>
<li><p>Configure WifiMac: this step is more related to the architecture and device level.
The users configure the wifi architecture (i.e. ad-hoc or ap-sta) and whether QoS (802.11e),
HT (802.11n) and/or VHT (802.11ac) and/or HE (802.11ax) features are supported or not.</p></li>
<li><p>Create WifiDevice: at this step, users configure the desired wifi standard
(e.g. <strong>802.11b</strong>, <strong>802.11g</strong>, <strong>802.11a</strong>, <strong>802.11n</strong>, <strong>802.11ac</strong> or <strong>802.11ax</strong>) and rate control algorithm.</p></li>
<li><p>Configure mobility: finally, mobility model is (usually) required before WifiNetDevice
can be used.</p></li>
</ul>
<p>The following sample code illustrates a typical configuration using mostly
default values in the simulator, and infrastructure mode:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">NodeContainer</span> <span class="n">wifiStaNode</span><span class="p">;</span>
<span class="n">wifiStaNode</span><span class="p">.</span><span class="n">Create</span> <span class="p">(</span><span class="mi">10</span><span class="p">);</span>   <span class="c1">// Create 10 station node objects</span>
<span class="n">NodeContainer</span> <span class="n">wifiApNode</span><span class="p">;</span>
<span class="n">wifiApNode</span><span class="p">.</span><span class="n">Create</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>   <span class="c1">// Create 1 access point node object</span>

<span class="c1">// Create a channel helper and phy helper, and then create the channel</span>
<span class="n">YansWifiChannelHelper</span> <span class="n">channel</span> <span class="o">=</span> <span class="n">YansWifiChannelHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="n">YansWifiPhyHelper</span> <span class="n">phy</span> <span class="o">=</span> <span class="n">YansWifiPhyHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="n">phy</span><span class="p">.</span><span class="n">SetChannel</span> <span class="p">(</span><span class="n">channel</span><span class="p">.</span><span class="n">Create</span> <span class="p">());</span>

<span class="c1">// Create a WifiMacHelper, which is reused across STA and AP configurations</span>
<span class="n">WifiMacHelper</span> <span class="n">mac</span><span class="p">;</span>

<span class="c1">// Create a WifiHelper, which will use the above helpers to create</span>
<span class="c1">// and install Wifi devices.  Configure a Wifi standard to use, which</span>
<span class="c1">// will align various parameters in the Phy and Mac to standard defaults.</span>
<span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211n_5GHZ</span><span class="p">);</span>
<span class="c1">// Declare NetDeviceContainers to hold the container returned by the helper</span>
<span class="n">NetDeviceContainer</span> <span class="n">wifiStaDevices</span><span class="p">;</span>
<span class="n">NetDeviceContainer</span> <span class="n">wifiApDevice</span><span class="p">;</span>

<span class="c1">// Perform the installation</span>
<span class="n">mac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">);</span>
<span class="n">wifiStaDevices</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">phy</span><span class="p">,</span> <span class="n">mac</span><span class="p">,</span> <span class="n">wifiStaNodes</span><span class="p">);</span>
<span class="n">mac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::ApWifiMac&quot;</span><span class="p">);</span>
<span class="n">wifiApDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">phy</span><span class="p">,</span> <span class="n">mac</span><span class="p">,</span> <span class="n">wifiApNode</span><span class="p">);</span>
</pre></div>
</div>
<p>At this point, the 11 nodes have Wi-Fi devices configured, attached to a
common channel.  The rest of this section describes how additional
configuration may be performed.</p>
<div class="section" id="yanswifichannelhelper">
<h3>YansWifiChannelHelper<a class="headerlink" href="#yanswifichannelhelper" title="Permalink to this headline">¶</a></h3>
<p>The YansWifiChannelHelper has an unusual name. Readers may wonder why it is
named this way. The reference is to the <a class="reference external" href="https://dl.acm.org/doi/pdf/10.1145/1190455.1190467?download=true">yans simulator</a> from which this model is taken. The
helper can be used to create a YansWifiChannel with a default PropagationLoss and
PropagationDelay model.</p>
<p>Users will typically type code such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">YansWifiChannelHelper</span> <span class="n">wifiChannelHelper</span> <span class="o">=</span> <span class="n">YansWifiChannelHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">Channel</span><span class="o">&gt;</span> <span class="n">wifiChannel</span> <span class="o">=</span> <span class="n">wifiChannelHelper</span><span class="p">.</span><span class="n">Create</span> <span class="p">();</span>
</pre></div>
</div>
<p>to get the defaults.  Specifically, the default is a channel model with a
propagation delay equal to a constant, the speed of light (<code class="docutils literal notranslate"><span class="pre">ns3::ConstantSpeedPropagationDelayModel</span></code>),
and a propagation loss based on a default log distance model (<code class="docutils literal notranslate"><span class="pre">ns3::LogDistancePropagationLossModel</span></code>), using a default exponent of 3.
Please note that the default log distance model is configured with a reference
loss of 46.6777 dB at reference distance of 1m.  The reference loss of 46.6777 dB
was calculated using Friis propagation loss model at 5.15 GHz.  The reference loss
must be changed if <strong>802.11b</strong>, <strong>802.11g</strong>, <strong>802.11n</strong> (at 2.4 GHz) or <strong>802.11ax</strong> (at 2.4 GHz) are used since they operate at 2.4 Ghz.</p>
<p>Note the distinction above in creating a helper object vs. an actual simulation
object.  In <em>ns-3</em>, helper objects (used at the helper API only) are created on
the stack (they could also be created with operator new and later deleted).
However, the actual <em>ns-3</em> objects typically inherit from <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">ns3::Object</span></code>
and are assigned to a smart pointer.  See the chapter in the <em>ns-3</em> manual for
a discussion of the <em>ns-3</em> object model, if you are not familiar with it.</p>
<p>The following two methods are useful when configuring YansWifiChannelHelper:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">YansWifiChannelHelper::AddPropagationLoss</span></code> adds a PropagationLossModel
to a chain of PropagationLossModel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">YansWifiChannelHelper::SetPropagationDelay</span></code> sets a PropagationDelayModel</p></li>
</ul>
</div>
<div class="section" id="yanswifiphyhelper">
<h3>YansWifiPhyHelper<a class="headerlink" href="#yanswifiphyhelper" title="Permalink to this headline">¶</a></h3>
<p>Physical devices (base class <code class="docutils literal notranslate"><span class="pre">ns3::WifiPhy</span></code>) connect to <code class="docutils literal notranslate"><span class="pre">ns3::YansWifiChannel</span></code> models in
<em>ns-3</em>.  We need to create WifiPhy objects appropriate for the YansWifiChannel; here
the <code class="docutils literal notranslate"><span class="pre">YansWifiPhyHelper</span></code> will do the work.</p>
<p>The YansWifiPhyHelper class configures an object factory to create instances of
a <code class="docutils literal notranslate"><span class="pre">YansWifiPhy</span></code> and adds some other objects to it, including possibly a
supplemental ErrorRateModel and a pointer to a MobilityModel. The user code is
typically:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">YansWifiPhyHelper</span> <span class="n">wifiPhyHelper</span> <span class="o">=</span> <span class="n">YansWifiPhyHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">SetChannel</span> <span class="p">(</span><span class="n">wifiChannel</span><span class="p">);</span>
</pre></div>
</div>
<p>The default YansWifiPhyHelper is configured with NistErrorRateModel
(<code class="docutils literal notranslate"><span class="pre">ns3::NistErrorRateModel</span></code>). You can change the error rate model by
calling the <code class="docutils literal notranslate"><span class="pre">YansWifiPhyHelper::SetErrorRateModel</span></code> method.</p>
<p>Optionally, if pcap tracing is needed, a user may use the following
command to enable pcap tracing:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">YansWifiPhyHelper</span><span class="o">::</span><span class="n">SetPcapDataLinkType</span> <span class="p">(</span><span class="k">enum</span> <span class="n">SupportedPcapDataLinkTypes</span> <span class="n">dlt</span><span class="p">)</span>
</pre></div>
</div>
<p><em>ns-3</em> supports RadioTap and Prism tracing extensions for 802.11.</p>
<p>Note that we haven’t actually created any WifiPhy objects yet; we’ve just
prepared the YansWifiPhyHelper by telling it which channel it is connected to.
The Phy objects are created in the next step.</p>
<p>In order to enable 802.11n/ac/ax MIMO, the number of antennas as well as the number of supported spatial streams need to be configured.
For example, this code enables MIMO with 2 antennas and 2 spatial streams:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;Antennas&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">2</span><span class="p">));</span>
<span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;MaxSupportedTxSpatialStreams&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">2</span><span class="p">));</span>
<span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;MaxSupportedRxSpatialStreams&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">2</span><span class="p">));</span>
</pre></div>
</div>
<p>It is also possible to configure less streams than the number of antennas in order to benefit from diversity gain, and to define different MIMO capabilities for downlink and uplink.
For example, this code configures a node with 3 antennas that supports 2 spatial streams in downstream and 1 spatial stream in upstream:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;Antennas&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;MaxSupportedTxSpatialStreams&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">2</span><span class="p">));</span>
<span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;MaxSupportedRxSpatialStreams&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</pre></div>
</div>
<p>802.11n PHY layer can support both 20 (default) or 40 MHz channel width, and 802.11ac/ax PHY layer can use either 20, 40, 80 (default) or 160 MHz channel width.  See below for further documentation on setting the frequency, channel width, and channel number.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211ac</span><span class="p">);</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetRemoteStationManager</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantRateWifiManager&quot;</span><span class="p">,</span>
                              <span class="s">&quot;DataMode&quot;</span><span class="p">,</span> <span class="n">StringValue</span> <span class="p">(</span><span class="s">&quot;VhtMcs9&quot;</span><span class="p">),</span>
                              <span class="s">&quot;ControlMode&quot;</span><span class="p">,</span> <span class="n">StringValue</span> <span class="p">(</span><span class="s">&quot;VhtMcs0&quot;</span><span class="p">));</span>

<span class="c1">//Install PHY and MAC</span>
<span class="n">Ssid</span> <span class="n">ssid</span> <span class="o">=</span> <span class="n">Ssid</span> <span class="p">(</span><span class="s">&quot;ns3-wifi&quot;</span><span class="p">);</span>
<span class="n">WifiMacHelper</span> <span class="n">mac</span><span class="p">;</span>

<span class="n">mac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
             <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
             <span class="s">&quot;ActiveProbing&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">false</span><span class="p">));</span>

<span class="n">NetDeviceContainer</span> <span class="n">staDevice</span><span class="p">;</span>
<span class="n">staDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">phy</span><span class="p">,</span> <span class="n">mac</span><span class="p">,</span> <span class="n">wifiStaNode</span><span class="p">);</span>

<span class="n">mac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::ApWifiMac&quot;</span><span class="p">,</span>
             <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">));</span>

<span class="n">NetDeviceContainer</span> <span class="n">apDevice</span><span class="p">;</span>
<span class="n">apDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">phy</span><span class="p">,</span> <span class="n">mac</span><span class="p">,</span> <span class="n">wifiApNode</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="channel-frequency-and-channel-width-configuration">
<h3>Channel, frequency, and channel width configuration<a class="headerlink" href="#channel-frequency-and-channel-width-configuration" title="Permalink to this headline">¶</a></h3>
<p>There are a few <code class="docutils literal notranslate"><span class="pre">ns3::WifiPhy</span></code> parameters that are related, and cannot
be set completely independently, concerning the frequency and channel width
that the device is tuned to.  These are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WifiPhyStandard</span></code>:  For example, 802.11b, 802.11n, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Frequency</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ChannelWidth</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ChannelNumber</span></code></p></li>
</ul>
<p>It is possible to set the above to incompatible combinations (e.g. channel
number 1 with 40 MHz channel width on frequency 4915 MHz).  In addition,
the latter three values above are attributes; it is possible to set them
in a number of ways:</p>
<ul class="simple">
<li><p>by setting global configuration default; e.g.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Config</span><span class="o">::</span><span class="n">SetDefault</span> <span class="p">(</span><span class="s">&quot;ns3::WifiPhy::ChannelNumber&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">3</span><span class="p">));</span>
</pre></div>
</div>
<ul class="simple">
<li><p>by setting an attribute value in the helper; e.g.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">YansWifiPhyHelper</span> <span class="n">wifiPhyHelper</span> <span class="o">=</span> <span class="n">YansWifiPhyHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="n">wifiPhyHelper</span><span class="p">.</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;ChannelNumber&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">3</span><span class="p">));</span>
</pre></div>
</div>
<ul class="simple">
<li><p>by setting the WifiHelper::SetStandard (enum WifiPhyStandard) method; and</p></li>
<li><p>by performing post-installation configuration of the option, either
via a Ptr to the WifiPhy object, or through the Config namespace; e.g.:</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/0/DeviceList/*/$ns3::WifiNetDevice/Phy/$ns3::WifiPhy/ChannelNumber&quot;</span><span class="p">,</span>
             <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">3</span><span class="p">));</span>
</pre></div>
</div>
<p>This section provides guidance on how to configure these settings in
a coherent manner, and what happens if non-standard values are chosen.</p>
<div class="section" id="wifihelper-setstandard">
<h4>WifiHelper::SetStandard()<a class="headerlink" href="#wifihelper-setstandard" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span> <span class="pre">()</span></code> is a method to set various parameters
in the Mac and Phy to standard values and some reasonable defaults.
For example, <code class="docutils literal notranslate"><span class="pre">SetStandard</span> <span class="pre">(WIFI_PHY_STANDARD_80211a)</span></code> will set the
WifiPhy to Channel 36 in the 5 GHz band, among other settings appropriate
for 802.11a.</p>
<p>The following values for WifiPhyStandard are defined in
<code class="docutils literal notranslate"><span class="pre">src/wifi/model/wifi-phy-standard.h</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/** OFDM PHY for the 5 GHz band (Clause 17) */</span>
<span class="n">WIFI_PHY_STANDARD_80211a</span><span class="p">,</span>
<span class="cm">/** DSSS PHY (Clause 15) and HR/DSSS PHY (Clause 18) */</span>
<span class="n">WIFI_PHY_STANDARD_80211b</span><span class="p">,</span>
<span class="cm">/** ERP-OFDM PHY (Clause 19, Section 19.5) */</span>
<span class="n">WIFI_PHY_STANDARD_80211g</span><span class="p">,</span>
<span class="cm">/** OFDM PHY for the 5 GHz band (Clause 17 with 10 MHz channel bandwidth) */</span>
<span class="n">WIFI_PHY_STANDARD_80211_10MHZ</span><span class="p">,</span>
<span class="cm">/** OFDM PHY for the 5 GHz band (Clause 17 with 5 MHz channel bandwidth) */</span>
<span class="n">WIFI_PHY_STANDARD_80211_5MHZ</span><span class="p">,</span>
<span class="cm">/** This is intended to be the configuration used in this paper:</span>
<span class="cm"> *  Gavin Holland, Nitin Vaidya and Paramvir Bahl, &quot;A Rate-Adaptive</span>
<span class="cm"> *  MAC Protocol for Multi-Hop Wireless Networks&quot;, in Proc. of</span>
<span class="cm"> *  ACM MOBICOM, 2001.</span>
<span class="cm"> */</span>
<span class="n">WIFI_PHY_STANDARD_holland</span><span class="p">,</span>
<span class="cm">/** HT OFDM PHY for the 2.4 GHz band (clause 20) */</span>
<span class="n">WIFI_PHY_STANDARD_80211n_2_4GHZ</span><span class="p">,</span>
<span class="cm">/** HT OFDM PHY for the 5 GHz band (clause 20) */</span>
<span class="n">WIFI_PHY_STANDARD_80211n_5GHZ</span><span class="p">,</span>
<span class="cm">/** VHT OFDM PHY (clause 22) */</span>
<span class="n">WIFI_PHY_STANDARD_80211ac</span><span class="p">,</span>
<span class="cm">/** HE PHY for the 2.4 GHz band (clause 26) */</span>
<span class="n">WIFI_PHY_STANDARD_80211ax_2_4GHZ</span><span class="p">,</span>
<span class="cm">/** HE PHY for the 5 GHz band (clause 26) */</span>
<span class="n">WIFI_PHY_STANDARD_80211ax_5GHZ</span>
</pre></div>
</div>
<p>In addition, a value WIFI_PHY_STANDARD_UNSPECIFIED is defined to indicate
that the user has not set a standard.</p>
<p>By default, the WifiPhy will be initialized to WIFI_PHY_STANDARD_UNSPECIFIED,
when it is created directly by <code class="docutils literal notranslate"><span class="pre">CreateObject</span></code> (i.e. not by WifiHelper).
However, the WifiHelper (the typical use case for WifiPhy creation) will
configure the WIFI_PHY_STANDARD_80211a standard by default.  Other values
for standards should be passed explicitly to the WifiHelper object.</p>
<p>If user has not already separately configured Frequency or ChannelNumber
when SetStandard is called, the user obtains default values, in addition
(e.g. channel 1 for 802.11b/g, or channel 36 for a/n), in addition to
an appropriate ChannelWidth value for the standard (typically, 20 MHz, but
80 MHz for 802.11ac/ax).</p>
</div>
<div class="section" id="wifiphy-attribute-interactions">
<h4>WifiPhy attribute interactions<a class="headerlink" href="#wifiphy-attribute-interactions" title="Permalink to this headline">¶</a></h4>
<p>Users should keep in mind that the two attributes that matter most
within the model code are <code class="docutils literal notranslate"><span class="pre">WifiPhy::Frequency</span></code> and
<code class="docutils literal notranslate"><span class="pre">WifiPhy::ChannelWidth</span></code>; these are the ones directly used to set
transmission parameters.  <code class="docutils literal notranslate"><span class="pre">WifiPhy::ChannelNumber</span></code> and
<code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span> <span class="pre">()</span></code> are convenience shorthands for setting
frequency and channel width.  The <code class="docutils literal notranslate"><span class="pre">ns3::WifiPhy</span></code> contains code to
keep these values aligned and to generate runtime errors in some cases
if users set these attributes to incompatible values.</p>
<p>The pair (WifiPhyStandard, ChannelNumber) is an alias for a pair of
(Frequency/ChannelWidth) items.  Valid combinations are stored in
a map within WifiPhy that is populated with well-known values but that
can be dynamically extended at runtime.</p>
</div>
<div class="section" id="wifiphy-frequency">
<h4>WifiPhy::Frequency<a class="headerlink" href="#wifiphy-frequency" title="Permalink to this headline">¶</a></h4>
<p>The WifiPhy channel center frequency is set by the attribute <code class="docutils literal notranslate"><span class="pre">Frequency</span></code>
in the class <code class="docutils literal notranslate"><span class="pre">WifiPhy</span></code>.  It is expressed in units of MHz.  By default,
this attribute is set to the value 0 to indicate that no value is configured.</p>
<p>Note that this is a change in definition from ns-3.25 and earlier releases,
where this attribute referred to the start of the overall frequency band
on which the channel resides, not the specific channel center frequency.</p>
</div>
<div class="section" id="wifiphy-channelwidth">
<h4>WifiPhy::ChannelWidth<a class="headerlink" href="#wifiphy-channelwidth" title="Permalink to this headline">¶</a></h4>
<p>The WifiPhy channel width is set by the attribute <code class="docutils literal notranslate"><span class="pre">ChannelWidth</span></code>
in the class <code class="docutils literal notranslate"><span class="pre">WifiPhy</span></code>.  It is expressed in units of MHz.  By default,
this attribute is set to the value 20.  Allowable values are 5, 10, 20,
22, 40, 80, or 160 (MHz).</p>
</div>
<div class="section" id="wifiphy-channelnumber">
<h4>WifiPhy::ChannelNumber<a class="headerlink" href="#wifiphy-channelnumber" title="Permalink to this headline">¶</a></h4>
<p>Several channel numbers are defined and well-known in practice.  However,
valid channel numbers vary by geographical region around the world, and
there is some overlap between the different standards.</p>
<p>In <em>ns-3</em>, the class <code class="docutils literal notranslate"><span class="pre">WifiPhy</span></code> contains an attribute <code class="docutils literal notranslate"><span class="pre">ChannelNumber</span></code> that
is, by default, set to the value 0.  The value 0 indicates that no
channel number has been set by the user.</p>
<p>In <em>ns-3</em>, a ChannelNumber may be defined or unknown.  These terms
are not found in the code; they are just used to describe behavior herein.</p>
<p>If a ChannelNumber is defined, it means that WifiPhy has stored a
map of ChannelNumber to the center frequency and channel width commonly
known for that channel in practice.  For example:</p>
<ul class="simple">
<li><p>Channel 1, when IEEE 802.11b is configured, corresponds to a channel
width of 22 MHz and a center frequency of 2412 MHz.</p></li>
<li><p>Channel 36, when IEEE 802.11n is configured at 5GHz, corresponds to
a channel width of 20 MHz and a center frequency of 5180 MHz.</p></li>
</ul>
<p>The following channel numbers are well-defined for 2.4 GHz standards:</p>
<ul class="simple">
<li><p>channels 1-14 with ChannelWidth of 22 MHz for 802.11b</p></li>
<li><p>channels 1-14 with ChannelWidth of 20 MHz for 802.11n-2.4GHz and 802.11g</p></li>
</ul>
<p>The following channel numbers are well-defined for 5 GHz standards:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ChannelWidth</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ChannelNumber</span></code></p></td>
</tr>
<tr class="row-even"><td><p>20 MHz</p></td>
<td><p>36, 40, 44, 48, 52, 56, 60, 64, 100,
104, 108, 112, 116, 120, 124,
128, 132, 136, 140, 144,
149, 153, 161, 165, 169</p></td>
</tr>
<tr class="row-odd"><td><p>40 MHz</p></td>
<td><p>38, 46, 54, 62, 102, 110, 118, 126,
134, 142, 151, 159</p></td>
</tr>
<tr class="row-even"><td><p>80 MHz</p></td>
<td><p>42, 58, 106, 122, 138, 155</p></td>
</tr>
<tr class="row-odd"><td><p>160 MHz</p></td>
<td><p>50, 114</p></td>
</tr>
<tr class="row-even"><td><p>10 MHz (802.11p)</p></td>
<td><p>172, 174, 176, 178, 180, 182, 184</p></td>
</tr>
</tbody>
</table>
<p>The channel number may be set either before or after creation of the
WifiPhy object.</p>
<p>If an unknown channel number (other than zero) is configured, the
simulator will exit with an error; for instance, such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">WifiPhy</span><span class="o">&gt;</span> <span class="n">wifiPhy</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">wifiPhy</span><span class="o">-&gt;</span><span class="n">SetAttribute</span> <span class="p">(</span><span class="s">&quot;ChannelNumber&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">1321</span><span class="p">));</span>
</pre></div>
</div>
<p>The known channel numbers are defined in the implementation file
<code class="docutils literal notranslate"><span class="pre">src/wifi/model/wifi-phy.cc</span></code>.  Of course, this file may be edited
by users to extend to additional channel numbers.  Below, we describe
how new channel numbers may be defined dynamically at run-time.</p>
<p>If a known channel number is configured against an incorrect value
of the WifiPhyStandard, the simulator will exit with an error; for instance,
such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211n_5GHZ</span><span class="p">);</span>
<span class="p">...</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">WifiPhy</span><span class="o">&gt;</span> <span class="n">wifiPhy</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">wifiPhy</span><span class="o">-&gt;</span><span class="n">SetAttribute</span> <span class="p">(</span><span class="s">&quot;ChannelNumber&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">14</span><span class="p">));</span>
</pre></div>
</div>
<p>In the above, while channel number 14 is well-defined in practice for 802.11b
only, it is for 2.4 GHz band, not 5 GHz band.</p>
</div>
<div class="section" id="defining-a-new-channel-number">
<h4>Defining a new channel number<a class="headerlink" href="#defining-a-new-channel-number" title="Permalink to this headline">¶</a></h4>
<p>Users may define their own channel number so that they can later refer to
the channel by number.</p>
<p>The method is <code class="docutils literal notranslate"><span class="pre">WifiPhy::DefineChannelNumber</span> <span class="pre">()</span></code> and it takes the following
arguments:</p>
<ul class="simple">
<li><p>uint16_t channelNumber</p></li>
<li><p>enum WifiPhyStandard standard</p></li>
<li><p>uint32_t frequency</p></li>
<li><p>uint32_t channelWidth</p></li>
</ul>
<p>The pair of (channelNumber, standard) are used as an index to a map that
returns a Frequency and ChannelWidth.  By calling this method, one can
dynamically add members to the map.  For instance, let’s suppose that you
previously configured WIFI_PHY_STANDARD_80211a, and wanted to define a new
channel number ‘34’ of width 20 MHz and at center frequency 5160 MHz.</p>
<p>If you try to simply configure ChannelNumber to the value 34, it will fail,
since 34 is undefined.  However, you can use DefineChannelNumber as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">WifiPhy</span><span class="o">&gt;</span> <span class="n">wifiPhy</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">wifiPhy</span><span class="o">-&gt;</span><span class="n">DefineChannelNumber</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="n">WIFI_PHY_STANDARD_80211a</span><span class="p">,</span> <span class="mi">5160</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</pre></div>
</div>
<p>and then later you can refer to channel number 34 in your program, which
will configure a center operating frequency of 5160 MHz and a width of
20 MHz.</p>
<p>The steps can be repeated to explicitly configure the same channel for
multiple standards:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">wifiPhy</span><span class="o">-&gt;</span><span class="n">DefineChannelNumber</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="n">WIFI_PHY_STANDARD_80211a</span><span class="p">,</span> <span class="mi">5160</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
<span class="n">wifiPhy</span><span class="o">-&gt;</span><span class="n">DefineChannelNumber</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="n">WIFI_PHY_STANDARD_80211n_5GHZ</span><span class="p">,</span> <span class="mi">5160</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</pre></div>
</div>
<p>or for a wildcard, unspecified standard:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">wifiPhy</span><span class="o">-&gt;</span><span class="n">DefineChannelNumber</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="n">WIFI_PHY_STANDARD_UNSPECIFIED</span><span class="p">,</span> <span class="mi">5160</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="order-of-operation-issues">
<h4>Order of operation issues<a class="headerlink" href="#order-of-operation-issues" title="Permalink to this headline">¶</a></h4>
<p>Depending on the default values used and the order of operation in setting
the values for the standard, channel width, frequency, and channel number,
different configurations can be obtained.   Below are some common use cases.</p>
<ul class="simple">
<li><p><strong>(accepting the standard defaults):</strong>  If a user has not already
separately configured frequency or channel number when
<code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span> <span class="pre">()</span></code> is called, the user gets default values
(e.g. channel 1 for 802.11b/g or channel 36 for a/n, with 20 MHz
channel widths)</p></li>
<li><p><strong>(overwriting the standard channel):</strong>  If the user has previously
configured (e.g. via SetDefault) either frequency or channel number when
SetStandard is called, and the frequency or channel number are appropriate
for the standard being configured, they are not overwritten</p></li>
<li><p><strong>(changing the standard channel after Install):</strong>  The user may also call
<code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span> <span class="pre">()</span></code> after <code class="docutils literal notranslate"><span class="pre">Install</span> <span class="pre">()</span></code> and either configure
the frequency to something different, or configure the channel number
to something different.  Note that if the channel number is undefined
for the standard that was previously set, an error will occur.</p></li>
<li><p><strong>(changing to non-standard frequency):</strong>  If the user configures a
frequency outside the standardized frequency range for the current
WifiPhyStandard, this is OK.  This allows users to experiment with
wifi on e.g. whitespace frequencies but still use SetStandard to set
all of the other configuration details.</p></li>
<li><p><strong>(interaction between channel number and frequency):</strong>  If the user
sets Frequency to a different value than the currently configured
ChannelNumber (or if ChannelNumber is zero), then the ChannelNumber is
set to a new channel number if known, or to zero if unknown.</p>
<ul>
<li><p><em>example:</em>  ChannelNumber previously set to 36, user sets Frequency to 5200, then ChannelNumber gets automatically set to 40</p></li>
<li><p><em>example:</em>  ChannelNumber set to 36, user later sets Frequency to 5185, ChannelNumber gets reset to 0</p></li>
</ul>
</li>
</ul>
<p>In summary, ChannelNumber and Frequency follow each other.  ChannelNumber
sets both Frequency and ChannelWidth if the channel number has been defined
for the standard.  Setting ChannelWidth has no effect on Frequency or
ChannelNumber.  Setting Frequency will set ChannelNumber to either the
defined value for that Wi-Fi standard, or to the value 0 if undefined.</p>
</div>
</div>
<div class="section" id="spectrumwifiphyhelper">
<h3>SpectrumWifiPhyHelper<a class="headerlink" href="#spectrumwifiphyhelper" title="Permalink to this headline">¶</a></h3>
<p>The API for this helper closely tracks the API of the YansWifiPhyHelper,
with the exception that a channel of type <code class="docutils literal notranslate"><span class="pre">ns3::SpectrumChannel</span></code> instead
of type <code class="docutils literal notranslate"><span class="pre">ns3::YansWifiChannel</span></code> must be used with it.</p>
</div>
<div class="section" id="wifimachelper">
<h3>WifiMacHelper<a class="headerlink" href="#wifimachelper" title="Permalink to this headline">¶</a></h3>
<p>The next step is to configure the MAC model. We use WifiMacHelper to accomplish this.
WifiMacHelper takes care of both the MAC low model and MAC high model, and configures an object factory to create instances of a <code class="docutils literal notranslate"><span class="pre">ns3::WifiMac</span></code>.
It is used to configure MAC parameters like type of MAC, and to select whether 802.11/WMM-style QoS and/or 802.11n-style High Throughput (HT)
and/or 802.11ac-style Very High Throughput (VHT) support and/or 802.11ax-style High Efficiency (HE) support are/is required.</p>
<p>By default, it creates an ad-hoc MAC instance that does not have 802.11e/WMM-style QoS nor 802.11n-style High Throughput (HT)
nor 802.11ac-style Very High Throughput (VHT) nor 802.11ax-style High Efficiency (HE) support enabled.</p>
<p>For example the following user code configures a non-QoS and non-HT/non-VHT/non-HE MAC that
will be a non-AP STA in an infrastructure network where the AP has SSID <code class="docutils literal notranslate"><span class="pre">ns-3-ssid</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiMacHelper</span> <span class="n">wifiMacHelper</span><span class="p">;</span>
<span class="n">Ssid</span> <span class="n">ssid</span> <span class="o">=</span> <span class="n">Ssid</span> <span class="p">(</span><span class="s">&quot;ns-3-ssid&quot;</span><span class="p">);</span>
<span class="n">wifiMacHelper</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
                      <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                      <span class="s">&quot;ActiveProbing&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">false</span><span class="p">));</span>
</pre></div>
</div>
<p>The following code shows how to create an AP with QoS enabled:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiMacHelper</span> <span class="n">wifiMacHelper</span><span class="p">;</span>
<span class="n">wifiMacHelper</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::ApWifiMac&quot;</span><span class="p">,</span>
                       <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                       <span class="s">&quot;QosSupported&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">true</span><span class="p">),</span>
                       <span class="s">&quot;BeaconGeneration&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">true</span><span class="p">),</span>
                       <span class="s">&quot;BeaconInterval&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">Seconds</span> <span class="p">(</span><span class="mf">2.5</span><span class="p">)));</span>
</pre></div>
</div>
<p>To create ad-hoc MAC instances, simply use <code class="docutils literal notranslate"><span class="pre">ns3::AdhocWifiMac</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ns3::StaWifiMac</span></code> or <code class="docutils literal notranslate"><span class="pre">ns3::ApWifiMac</span></code>.</p>
<p>In infrastructure mode without QoS enabled, it is also possible to enable PCF support.
The following code shows how to create a CF-pollable station:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiMacHelper</span> <span class="n">wifiMacHelper</span><span class="p">;</span>
<span class="n">wifiMacHelper</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
                       <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                       <span class="s">&quot;PcfSupported&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">true</span><span class="p">));</span>
</pre></div>
</div>
<p>PCF also supports an option to change the maximum duration of the contention-free period (which must be a multiple of 1024 microseconds).
The following code shows how to create an AP with a custom PCF configuration:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiMacHelper</span> <span class="n">wifiMacHelper</span><span class="p">;</span>
<span class="n">wifiMacHelper</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::ApWifiMac&quot;</span><span class="p">,</span>
                       <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                       <span class="s">&quot;PcfSupported&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">true</span><span class="p">),</span>
                       <span class="s">&quot;CfpMaxDuration&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="mi">20480</span><span class="p">)));</span>
</pre></div>
</div>
<p>With QoS-enabled MAC models it is possible to work with traffic belonging to
four different Access Categories (ACs): <strong>AC_VO</strong> for voice traffic,
<strong>AC_VI</strong> for video traffic, <strong>AC_BE</strong> for best-effort
traffic and <strong>AC_BK</strong> for background traffic.</p>
<p>When selecting <strong>802.11n</strong> as the desired wifi standard, both 802.11e/WMM-style QoS and 802.11n-style High Throughput (HT) support gets enabled.
Similarly when selecting <strong>802.11ac</strong> as the desired wifi standard, 802.11e/WMM-style QoS, 802.11n-style High Throughput (HT) and 802.11ac-style Very High Throughput (VHT)
support gets enabled. And when selecting <strong>802.11ax</strong> as the desired wifi standard, 802.11e/WMM-style QoS, 802.11n-style High Throughput (HT),
802.11ac-style Very High Throughput (VHT) and 802.11ax-style High Efficiency (HE) support gets enabled.</p>
<p>For MAC instances that have QoS support enabled, the <code class="docutils literal notranslate"><span class="pre">ns3::WifiMacHelper</span></code> can be also used to set:</p>
<ul class="simple">
<li><p>block ack threshold (number of packets for which block ack mechanism should be used);</p></li>
<li><p>block ack inactivity timeout.</p></li>
</ul>
<p>For example the following user code configures a MAC that will be a non-AP STA with QoS enabled and a block ack threshold for AC_BE set to 2 packets,
in an infrastructure network where the AP has SSID <code class="docutils literal notranslate"><span class="pre">ns-3-ssid</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiMacHelper</span> <span class="n">wifiMacHelper</span><span class="p">;</span>
<span class="n">Ssid</span> <span class="n">ssid</span> <span class="o">=</span> <span class="n">Ssid</span> <span class="p">(</span><span class="s">&quot;ns-3-ssid&quot;</span><span class="p">);</span>
<span class="n">wifiMacHelper</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
                      <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                      <span class="s">&quot;QosSupported&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">true</span><span class="p">),</span>
                      <span class="s">&quot;BE_BlockAckThreshold&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                      <span class="s">&quot;ActiveProbing&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">false</span><span class="p">));</span>
</pre></div>
</div>
<p>For MAC instances that have 802.11n-style High Throughput (HT) and/or 802.11ac-style Very High Throughput (VHT) and/or 802.11ax-style High Efficiency (HE) support enabled,
the <code class="docutils literal notranslate"><span class="pre">ns3::WifiMacHelper</span></code> can be also used to set:</p>
<ul class="simple">
<li><p>MSDU aggregation parameters for a particular Access Category (AC) in order to use 802.11n/ac A-MSDU feature;</p></li>
<li><p>MPDU aggregation parameters for a particular Access Category (AC) in order to use 802.11n/ac A-MPDU feature.</p></li>
</ul>
<p>By default, MSDU aggregation feature is disabled for all ACs and MPDU aggregation is enabled for AC_VI and AC_BE, with a maximum aggregation size of 65535 bytes.</p>
<p>For example the following user code configures a MAC that will be a non-AP STA with HT and QoS enabled, MPDU aggregation enabled for AC_VO with a maximum aggregation size of 65535 bytes, and MSDU aggregation enabled for AC_BE with a maximum aggregation size of 7935 bytes,
in an infrastructure network where the AP has SSID <code class="docutils literal notranslate"><span class="pre">ns-3-ssid</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211n_5GHZ</span><span class="p">);</span>

<span class="n">WifiMacHelper</span> <span class="n">wifiMacHelper</span><span class="p">;</span>
<span class="n">Ssid</span> <span class="n">ssid</span> <span class="o">=</span> <span class="n">Ssid</span> <span class="p">(</span><span class="s">&quot;ns-3-ssid&quot;</span><span class="p">);</span>
<span class="n">wifiMacHelper</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
                      <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                      <span class="s">&quot;VO_MaxAmpduSize&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">65535</span><span class="p">),</span>
                      <span class="s">&quot;BE_MaxAmsduSize&quot;</span><span class="p">,</span> <span class="n">UintegerValue</span> <span class="p">(</span><span class="mi">7935</span><span class="p">),</span>
                      <span class="s">&quot;ActiveProbing&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">false</span><span class="p">));</span>
</pre></div>
</div>
<div class="section" id="selection-of-the-access-category-ac">
<h4>Selection of the Access Category (AC)<a class="headerlink" href="#selection-of-the-access-category-ac" title="Permalink to this headline">¶</a></h4>
<p>Since ns-3.26, the QosTag is no longer used to assign a user priority to an MSDU.
Instead, the selection of the Access Category (AC) for an MSDU is based on the
value of the DS field in the IP header of the packet (ToS field in case of IPv4,
Traffic Class field in case of IPv6). Details on how to set the ToS field of IPv4
packets are given in the <a class="reference internal" href="sockets-api.html#type-of-service"><span class="std std-ref">ToS (Type of Service)</span></a> section of the documentation. In
summary, users can create an address of type <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ns3::InetSocketAddress</span></code>
with the desired type of service value and pass it to the application helpers:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">InetSocketAddress</span> <span class="nf">destAddress</span> <span class="p">(</span><span class="n">ipv4Address</span><span class="p">,</span> <span class="n">udpPort</span><span class="p">);</span>
<span class="n">destAddress</span><span class="p">.</span><span class="n">SetTos</span> <span class="p">(</span><span class="n">tos</span><span class="p">);</span>
<span class="n">OnOffHelper</span> <span class="nf">onoff</span> <span class="p">(</span><span class="s">&quot;ns3::UdpSocketFactory&quot;</span><span class="p">,</span> <span class="n">destAddress</span><span class="p">);</span>
</pre></div>
</div>
<p>Mapping the values of the DS field onto user priorities is performed similarly to the
Linux mac80211 subsystem. Basically, the <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ns3::WifiNetDevice::SelectQueue()</span></code>
method sets the user priority (UP) of an MSDU to the three most significant
bits of the DS field. The Access Category is then determined based on the user priority
according to the following table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>UP</p></th>
<th class="head"><p>Access Category</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>AC_VO</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>AC_VO</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>AC_BK</p></td>
</tr>
</tbody>
</table>
<p>TOS and DSCP values map onto user priorities and access categories according
to the following table.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 5%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DiffServ PHB</p></th>
<th class="head"><p>TOS (binary)</p></th>
<th class="head"><p>UP</p></th>
<th class="head"><p>Access Category</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EF</p></td>
<td><p>101110xx</p></td>
<td><p>5</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-odd"><td><p>AF11</p></td>
<td><p>001010xx</p></td>
<td><p>1</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-even"><td><p>AF21</p></td>
<td><p>010010xx</p></td>
<td><p>2</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-odd"><td><p>AF31</p></td>
<td><p>011010xx</p></td>
<td><p>3</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-even"><td><p>AF41</p></td>
<td><p>100010xx</p></td>
<td><p>4</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-odd"><td><p>AF12</p></td>
<td><p>001100xx</p></td>
<td><p>1</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-even"><td><p>AF22</p></td>
<td><p>010100xx</p></td>
<td><p>2</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-odd"><td><p>AF32</p></td>
<td><p>011100xx</p></td>
<td><p>3</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-even"><td><p>AF42</p></td>
<td><p>100100xx</p></td>
<td><p>4</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-odd"><td><p>AF13</p></td>
<td><p>001110xx</p></td>
<td><p>1</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-even"><td><p>AF23</p></td>
<td><p>010110xx</p></td>
<td><p>2</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-odd"><td><p>AF33</p></td>
<td><p>011110xx</p></td>
<td><p>3</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-even"><td><p>AF43</p></td>
<td><p>100110xx</p></td>
<td><p>4</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-odd"><td><p>CS0</p></td>
<td><p>000000xx</p></td>
<td><p>0</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-even"><td><p>CS1</p></td>
<td><p>001000xx</p></td>
<td><p>1</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-odd"><td><p>CS2</p></td>
<td><p>010000xx</p></td>
<td><p>2</p></td>
<td><p>AC_BK</p></td>
</tr>
<tr class="row-even"><td><p>CS3</p></td>
<td><p>011000xx</p></td>
<td><p>3</p></td>
<td><p>AC_BE</p></td>
</tr>
<tr class="row-odd"><td><p>CS4</p></td>
<td><p>100000xx</p></td>
<td><p>4</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-even"><td><p>CS5</p></td>
<td><p>101000xx</p></td>
<td><p>5</p></td>
<td><p>AC_VI</p></td>
</tr>
<tr class="row-odd"><td><p>CS6</p></td>
<td><p>110000xx</p></td>
<td><p>6</p></td>
<td><p>AC_VO</p></td>
</tr>
<tr class="row-even"><td><p>CS7</p></td>
<td><p>111000xx</p></td>
<td><p>7</p></td>
<td><p>AC_VO</p></td>
</tr>
</tbody>
</table>
<p>So, for example,:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">destAddress</span><span class="p">.</span><span class="n">SetTos</span> <span class="p">(</span><span class="mh">0xc0</span><span class="p">);</span>
</pre></div>
</div>
<p>will map to CS6, User Priority 6, and Access Category AC_VO.
Also, the ns3-wifi-ac-mapping test suite (defined in
src/test/ns3wifi/wifi-ac-mapping-test-suite.cc) can provide additional
useful information.</p>
<p>Note that <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ns3::WifiNetDevice::SelectQueue()</span></code> also sets the packet
priority to the user priority, thus overwriting the value determined by the
socket priority (users can read <a class="reference internal" href="sockets-api.html#socket-options"><span class="std std-ref">Socket options</span></a> for details on how to
set the packet priority). Also, given that the Traffic Control layer calls
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ns3::WifiNetDevice::SelectQueue()</span></code> before enqueuing the packet
into a queue disc, it turns out that queuing disciplines (such as
PfifoFastQueueDisc) that classifies packets based on their priority will
use the user priority instead of the socket priority.</p>
</div>
</div>
<div class="section" id="wifihelper">
<h3>WifiHelper<a class="headerlink" href="#wifihelper" title="Permalink to this headline">¶</a></h3>
<p>We’re now ready to create WifiNetDevices. First, let’s create
a WifiHelper with default settings:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifiHelper</span><span class="p">;</span>
</pre></div>
</div>
<p>What does this do?  It sets the default wifi standard to <strong>802.11a</strong> and sets the RemoteStationManager to
<code class="docutils literal notranslate"><span class="pre">ns3::ArfWifiManager</span></code>.  You can change the RemoteStationManager by calling the
<code class="docutils literal notranslate"><span class="pre">WifiHelper::SetRemoteStationManager</span></code> method. To change the wifi standard, call the
<code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span></code> method with the desired standard.</p>
<p>Now, let’s use the wifiPhyHelper and wifiMacHelper created above to install WifiNetDevices
on a set of nodes in a NodeContainer “c”:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">NetDeviceContainer</span> <span class="n">wifiContainer</span> <span class="o">=</span> <span class="n">WifiHelper</span><span class="o">::</span><span class="n">Install</span> <span class="p">(</span><span class="n">wifiPhyHelper</span><span class="p">,</span> <span class="n">wifiMacHelper</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p>This creates the WifiNetDevice which includes also a WifiRemoteStationManager, a
WifiMac, and a WifiPhy (connected to the matching Channel).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span></code> method sets various default timing parameters as defined in the selected standard version, overwriting values that may exist or have been previously configured.
In order to change parameters that are overwritten by <code class="docutils literal notranslate"><span class="pre">WifiHelper::SetStandard</span></code>, this should be done post-install using <code class="docutils literal notranslate"><span class="pre">Config::Set</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211n_2_4GHZ</span><span class="p">);</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetRemoteStationManager</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantRateWifiManager&quot;</span><span class="p">,</span> <span class="s">&quot;DataMode&quot;</span><span class="p">,</span> <span class="n">StringValue</span><span class="p">(</span><span class="s">&quot;HtMcs7&quot;</span><span class="p">),</span> <span class="s">&quot;ControlMode&quot;</span><span class="p">,</span> <span class="n">StringValue</span><span class="p">(</span><span class="s">&quot;HtMcs0&quot;</span><span class="p">));</span>

<span class="c1">//Install PHY and MAC</span>
<span class="n">Ssid</span> <span class="n">ssid</span> <span class="o">=</span> <span class="n">Ssid</span> <span class="p">(</span><span class="s">&quot;ns3-wifi&quot;</span><span class="p">);</span>

<span class="n">WifiMacHelper</span> <span class="n">mac</span><span class="p">;</span>
<span class="n">mac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
<span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
<span class="s">&quot;ActiveProbing&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">false</span><span class="p">));</span>

<span class="n">NetDeviceContainer</span> <span class="n">staDevice</span><span class="p">;</span>
<span class="n">staDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">phy</span><span class="p">,</span> <span class="n">mac</span><span class="p">,</span> <span class="n">wifiStaNode</span><span class="p">);</span>

<span class="n">mac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::ApWifiMac&quot;</span><span class="p">,</span>
<span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">));</span>

<span class="n">NetDeviceContainer</span> <span class="n">apDevice</span><span class="p">;</span>
<span class="n">apDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">phy</span><span class="p">,</span> <span class="n">mac</span><span class="p">,</span> <span class="n">wifiApNode</span><span class="p">);</span>

<span class="c1">//Once install is done, we overwrite the standard timing values</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/Slot&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">slot</span><span class="p">)));</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/Sifs&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">sifs</span><span class="p">)));</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/AckTimeout&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">ackTimeout</span><span class="p">)));</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/CtsTimeout&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">ctsTimeout</span><span class="p">)));</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/Rifs&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">rifs</span><span class="p">)));</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/BasicBlockAckTimeout&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">basicBlockAckTimeout</span><span class="p">)));</span>
<span class="n">Config</span><span class="o">::</span><span class="n">Set</span> <span class="p">(</span><span class="s">&quot;/NodeList/*/DeviceList/*/$ns3::WifiNetDevice/Mac/CompressedBlockAckTimeout&quot;</span><span class="p">,</span> <span class="n">TimeValue</span> <span class="p">(</span><span class="n">MicroSeconds</span> <span class="p">(</span><span class="n">compressedBlockAckTimeout</span><span class="p">)));</span>
</pre></div>
</div>
<p>The WifiHelper can be used to set the attributes of the default ack policy selector
(<code class="docutils literal notranslate"><span class="pre">ConstantWifiAckPolicySelector</span></code>) or to select a different (user provided) ack
policy selector, for each of the available Access Categories. As an example, the
following code can be used to set the BaThreshold attribute of the default ack
policy selector associated with BE AC to 0.5:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetAckPolicySelectorForAc</span> <span class="p">(</span><span class="n">AC_BE</span><span class="p">,</span> <span class="s">&quot;ns3::ConstantWifiAckPolicySelector&quot;</span><span class="p">,</span>
                                <span class="s">&quot;BaThreshold&quot;</span><span class="p">,</span> <span class="n">DoubleValue</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">));</span>
</pre></div>
</div>
<p>The WifiHelper is also used to configure OBSS PD spatial reuse for 802.11ax.
The following lines configure a WifiHelper to support OBSS PD spatial reuse
using the <code class="docutils literal notranslate"><span class="pre">ConstantObssPdAlgorithm</span></code> with a threshold set to -72 dBm:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetObssPdAlgorithm</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantObssPdAlgorithm&quot;</span><span class="p">,</span>
                         <span class="s">&quot;ObssPdLevel&quot;</span><span class="p">,</span> <span class="n">DoubleValue</span> <span class="p">(</span><span class="o">-</span><span class="mf">72.0</span><span class="p">));</span>
</pre></div>
</div>
<p>There are many other <em>ns-3</em> attributes that can be set on the above helpers to
deviate from the default behavior; the example scripts show how to do some of
this reconfiguration.</p>
</div>
<div class="section" id="ht-configuration">
<h3>HT configuration<a class="headerlink" href="#ht-configuration" title="Permalink to this headline">¶</a></h3>
<p>HT is an acronym for High Throughput, a term synonymous with the IEEE 802.11n
standard.  Once the <code class="docutils literal notranslate"><span class="pre">ns3::WifiHelper::Install</span></code> has been called and the
user sets the standard to a variant that supports HT capabilities (802.11n,
802.11ac, or 802.11ax), an HT configuration object will automatically be
created for the device.  The configuration object is used to store and
manage HT-specific attributes.</p>
<p>802.11n/ac PHY layer can use either long (800 ns) or short (400 ns) OFDM guard intervals. To configure this parameter for a given device, the following lines of code could be used (in this example, it enables the support of a short guard interval for the first station):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">NetDevice</span><span class="o">&gt;</span> <span class="n">nd</span> <span class="o">=</span> <span class="n">wifiStaDevices</span><span class="p">.</span><span class="n">Get</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">WifiNetDevice</span><span class="o">&gt;</span> <span class="n">wnd</span> <span class="o">=</span> <span class="n">nd</span><span class="o">-&gt;</span><span class="n">GetObject</span><span class="o">&lt;</span><span class="n">WifiNetDevice</span><span class="o">&gt;</span> <span class="p">();</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">HtConfiguration</span><span class="o">&gt;</span> <span class="n">htConfiguration</span> <span class="o">=</span> <span class="n">wnd</span><span class="o">-&gt;</span><span class="n">GetHtConfiguration</span> <span class="p">();</span>
<span class="n">htConfiguration</span><span class="o">-&gt;</span><span class="n">SetShortGuardIntervalSupported</span> <span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<p>It is also possible to configure HT-specific attributes using <code class="docutils literal notranslate"><span class="pre">Config::Set</span></code>.
The following line of code enables the support of a short guard interval for all stations:</p>
<blockquote>
<div><p>Config::Set (“/NodeList/<em>/DeviceList/</em>/$ns3::WifiNetDevice/HtConfiguration/ShortGuardIntervalSupported”, BooleanValue (true));</p>
</div></blockquote>
<p>Furthermore, 802.11n provides an optional mode (Greenfield mode) to reduce preamble durations and which is only compatible with 802.11n devices. This mode is enabled as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">htConfiguration</span><span class="o">-&gt;</span><span class="n">SetGreenfieldSupported</span> <span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="vht-configuration">
<h3>VHT configuration<a class="headerlink" href="#vht-configuration" title="Permalink to this headline">¶</a></h3>
<p>IEEE 802.11ac devices are also known as supporting Very High Throughput (VHT).  Once the <code class="docutils literal notranslate"><span class="pre">ns3::WifiHelper::Install</span></code> has been called and either the 802.11ac
or 802.11ax 5 GHz standards are configured, a VHT configuration object will be
automatically created to manage VHT-specific attributes.</p>
<p>As of ns-3.29, however, there are no VHT-specific configuration items to
manage; therefore, this object is a placeholder for future growth.</p>
</div>
<div class="section" id="he-configuration">
<h3>HE configuration<a class="headerlink" href="#he-configuration" title="Permalink to this headline">¶</a></h3>
<p>IEEE 802.11ax is also known as High Efficiency (HE).  Once the <code class="docutils literal notranslate"><span class="pre">ns3::WifiHelper::Install</span></code> has been called and IEEE 802.11ax configured as the standard, an
HE configuration object will automatically be created to manage HE-specific
attributes for 802.11ax devices.</p>
<p>802.11ax PHY layer can use either 3200 ns, 1600 ns or 800 ns OFDM guard intervals. To configure this parameter, the following lines of code could be used (in this example, it enables the support of 1600 ns guard interval), such as in this example code snippet:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Ptr</span><span class="o">&lt;</span><span class="n">NetDevice</span><span class="o">&gt;</span> <span class="n">nd</span> <span class="o">=</span> <span class="n">wifiStaDevices</span><span class="p">.</span><span class="n">Get</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">WifiNetDevice</span><span class="o">&gt;</span> <span class="n">wnd</span> <span class="o">=</span> <span class="n">nd</span><span class="o">-&gt;</span><span class="n">GetObject</span><span class="o">&lt;</span><span class="n">WifiNetDevice</span><span class="o">&gt;</span> <span class="p">();</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">HeConfiguration</span><span class="o">&gt;</span> <span class="n">heConfiguration</span> <span class="o">=</span> <span class="n">wnd</span><span class="o">-&gt;</span><span class="n">GetHeConfiguration</span> <span class="p">();</span>
<span class="n">heConfiguration</span><span class="o">-&gt;</span><span class="n">SetGuardInterval</span> <span class="p">(</span><span class="n">NanoSeconds</span> <span class="p">(</span><span class="mi">1600</span><span class="p">));</span>

<span class="mf">802.11</span><span class="n">ax</span> <span class="n">allows</span> <span class="n">extended</span> <span class="n">compressed</span> <span class="n">Block</span> <span class="n">ACKs</span> <span class="n">containing</span> <span class="n">a</span> <span class="mi">256</span><span class="o">-</span><span class="n">bits</span> <span class="n">bitmap</span><span class="p">,</span> <span class="n">making</span> <span class="n">possible</span> <span class="n">transmissions</span> <span class="n">of</span> <span class="n">A</span><span class="o">-</span><span class="n">MPDUs</span> <span class="n">containing</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">256</span> <span class="n">MPDUs</span><span class="p">,</span>
<span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="n">negotiated</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">.</span> <span class="n">In</span> <span class="n">order</span> <span class="n">to</span> <span class="n">configure</span> <span class="n">the</span> <span class="n">buffer</span> <span class="n">size</span> <span class="n">of</span> <span class="n">an</span> <span class="mf">802.11</span><span class="n">ax</span> <span class="n">device</span><span class="p">,</span> <span class="n">the</span> <span class="n">following</span> <span class="n">line</span> <span class="n">of</span> <span class="n">code</span> <span class="n">could</span> <span class="n">be</span> <span class="n">used</span><span class="o">::</span>

<span class="n">heConfiguration</span><span class="o">-&gt;</span><span class="n">SetMpduBufferSize</span> <span class="p">(</span><span class="mi">256</span><span class="p">);</span>

<span class="n">For</span> <span class="n">transmitting</span> <span class="n">large</span> <span class="n">MPDUs</span><span class="p">,</span> <span class="n">it</span> <span class="n">might</span> <span class="n">also</span> <span class="n">be</span> <span class="n">needed</span> <span class="n">to</span> <span class="n">increase</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">aggregation</span> <span class="n">size</span> <span class="p">(</span><span class="n">see</span> <span class="n">above</span><span class="p">).</span>
</pre></div>
</div>
</div>
<div class="section" id="mobility-configuration">
<h3>Mobility configuration<a class="headerlink" href="#mobility-configuration" title="Permalink to this headline">¶</a></h3>
<p>Finally, a mobility model must be configured on each node with Wi-Fi device.
Mobility model is used for calculating propagation loss and propagation delay.
Two examples are provided in the next section.
Users are referred to the chapter on <a class="reference internal" href="mobility.html#mobility"><span class="std std-ref">Mobility</span></a> module for detailed information.</p>
</div>
<div class="section" id="example-configuration">
<h3>Example configuration<a class="headerlink" href="#example-configuration" title="Permalink to this headline">¶</a></h3>
<p>We provide two typical examples of how a user might configure a Wi-Fi network –
one example with an ad-hoc network and one example with an infrastructure network.
The two examples were modified from the two examples in the <code class="docutils literal notranslate"><span class="pre">examples/wireless</span></code> folder
(<code class="docutils literal notranslate"><span class="pre">wifi-simple-adhoc.cc</span></code> and <code class="docutils literal notranslate"><span class="pre">wifi-simple-infra.cc</span></code>).
Users are encouraged to see examples in the <code class="docutils literal notranslate"><span class="pre">examples/wireless</span></code> folder.</p>
<div class="section" id="adhoc-wifinetdevice-configuration">
<h4>AdHoc WifiNetDevice configuration<a class="headerlink" href="#adhoc-wifinetdevice-configuration" title="Permalink to this headline">¶</a></h4>
<p>In this example, we create two ad-hoc nodes equipped with 802.11a Wi-Fi devices.
We use the <code class="docutils literal notranslate"><span class="pre">ns3::ConstantSpeedPropagationDelayModel</span></code> as the propagation delay model and
<code class="docutils literal notranslate"><span class="pre">ns3::LogDistancePropagationLossModel</span></code> with the exponent of 3.0 as the propagation loss model.
Both devices are configured with <code class="docutils literal notranslate"><span class="pre">ConstantRateWifiManager</span></code> at the fixed rate of 12Mbps.
Finally, we manually place them by using the <code class="docutils literal notranslate"><span class="pre">ns3::ListPositionAllocator</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">phyMode</span> <span class="p">(</span><span class="s">&quot;OfdmRate12Mbps&quot;</span><span class="p">);</span>

<span class="n">NodeContainer</span> <span class="n">c</span><span class="p">;</span>
<span class="n">c</span><span class="p">.</span><span class="n">Create</span> <span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211a</span><span class="p">);</span>

<span class="n">YansWifiPhyHelper</span> <span class="n">wifiPhy</span> <span class="o">=</span>  <span class="n">YansWifiPhyHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="c1">// ns-3 supports RadioTap and Prism tracing extensions for 802.11</span>
<span class="n">wifiPhy</span><span class="p">.</span><span class="n">SetPcapDataLinkType</span> <span class="p">(</span><span class="n">WifiPhyHelper</span><span class="o">::</span><span class="n">DLT_IEEE802_11_RADIO</span><span class="p">);</span>

<span class="n">YansWifiChannelHelper</span> <span class="n">wifiChannel</span><span class="p">;</span>
<span class="n">wifiChannel</span><span class="p">.</span><span class="n">SetPropagationDelay</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantSpeedPropagationDelayModel&quot;</span><span class="p">);</span>
<span class="n">wifiChannel</span><span class="p">.</span><span class="n">AddPropagationLoss</span> <span class="p">(</span><span class="s">&quot;ns3::LogDistancePropagationLossModel&quot;</span><span class="p">,</span>
                                <span class="s">&quot;Exponent&quot;</span><span class="p">,</span> <span class="n">DoubleValue</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">));</span>
<span class="n">wifiPhy</span><span class="p">.</span><span class="n">SetChannel</span> <span class="p">(</span><span class="n">wifiChannel</span><span class="p">.</span><span class="n">Create</span> <span class="p">());</span>

<span class="c1">// Add a non-QoS upper mac, and disable rate control (i.e. ConstantRateWifiManager)</span>
<span class="n">WifiMacHelper</span> <span class="n">wifiMac</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetRemoteStationManager</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantRateWifiManager&quot;</span><span class="p">,</span>
                              <span class="s">&quot;DataMode&quot;</span><span class="p">,</span><span class="n">StringValue</span> <span class="p">(</span><span class="n">phyMode</span><span class="p">),</span>
                              <span class="s">&quot;ControlMode&quot;</span><span class="p">,</span><span class="n">StringValue</span> <span class="p">(</span><span class="n">phyMode</span><span class="p">));</span>
<span class="c1">// Set it to adhoc mode</span>
<span class="n">wifiMac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::AdhocWifiMac&quot;</span><span class="p">);</span>
<span class="n">NetDeviceContainer</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">wifiPhy</span><span class="p">,</span> <span class="n">wifiMac</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>

<span class="c1">// Configure mobility</span>
<span class="n">MobilityHelper</span> <span class="n">mobility</span><span class="p">;</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">ListPositionAllocator</span><span class="o">&gt;</span> <span class="n">positionAlloc</span> <span class="o">=</span> <span class="n">CreateObject</span><span class="o">&lt;</span><span class="n">ListPositionAllocator</span><span class="o">&gt;</span> <span class="p">();</span>
<span class="n">positionAlloc</span><span class="o">-&gt;</span><span class="n">Add</span> <span class="p">(</span><span class="n">Vector</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
<span class="n">positionAlloc</span><span class="o">-&gt;</span><span class="n">Add</span> <span class="p">(</span><span class="n">Vector</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">SetPositionAllocator</span> <span class="p">(</span><span class="n">positionAlloc</span><span class="p">);</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">SetMobilityModel</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantPositionMobilityModel&quot;</span><span class="p">);</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">c</span><span class="p">);</span>

<span class="c1">// other set up (e.g. InternetStack, Application)</span>
</pre></div>
</div>
</div>
<div class="section" id="infrastructure-access-point-and-clients-wifinetdevice-configuration">
<h4>Infrastructure (access point and clients) WifiNetDevice configuration<a class="headerlink" href="#infrastructure-access-point-and-clients-wifinetdevice-configuration" title="Permalink to this headline">¶</a></h4>
<p>This is a typical example of how a user might configure an access point and a set of clients.
In this example, we create one access point and two clients.
Each node is equipped with 802.11b Wi-Fi device:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">phyMode</span> <span class="p">(</span><span class="s">&quot;DsssRate1Mbps&quot;</span><span class="p">);</span>

<span class="n">NodeContainer</span> <span class="n">ap</span><span class="p">;</span>
<span class="n">ap</span><span class="p">.</span><span class="n">Create</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">NodeContainer</span> <span class="n">sta</span><span class="p">;</span>
<span class="n">sta</span><span class="p">.</span><span class="n">Create</span> <span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="n">WifiHelper</span> <span class="n">wifi</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetStandard</span> <span class="p">(</span><span class="n">WIFI_PHY_STANDARD_80211b</span><span class="p">);</span>

<span class="n">YansWifiPhyHelper</span> <span class="n">wifiPhy</span> <span class="o">=</span>  <span class="n">YansWifiPhyHelper</span><span class="o">::</span><span class="n">Default</span> <span class="p">();</span>
<span class="c1">// ns-3 supports RadioTap and Prism tracing extensions for 802.11</span>
<span class="n">wifiPhy</span><span class="p">.</span><span class="n">SetPcapDataLinkType</span> <span class="p">(</span><span class="n">WifiPhyHelper</span><span class="o">::</span><span class="n">DLT_IEEE802_11_RADIO</span><span class="p">);</span>

<span class="n">YansWifiChannelHelper</span> <span class="n">wifiChannel</span><span class="p">;</span>
<span class="c1">// reference loss must be changed since 802.11b is operating at 2.4GHz</span>
<span class="n">wifiChannel</span><span class="p">.</span><span class="n">SetPropagationDelay</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantSpeedPropagationDelayModel&quot;</span><span class="p">);</span>
<span class="n">wifiChannel</span><span class="p">.</span><span class="n">AddPropagationLoss</span> <span class="p">(</span><span class="s">&quot;ns3::LogDistancePropagationLossModel&quot;</span><span class="p">,</span>
                                <span class="s">&quot;Exponent&quot;</span><span class="p">,</span> <span class="n">DoubleValue</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">),</span>
                                <span class="s">&quot;ReferenceLoss&quot;</span><span class="p">,</span> <span class="n">DoubleValue</span> <span class="p">(</span><span class="mf">40.0459</span><span class="p">));</span>
<span class="n">wifiPhy</span><span class="p">.</span><span class="n">SetChannel</span> <span class="p">(</span><span class="n">wifiChannel</span><span class="p">.</span><span class="n">Create</span> <span class="p">());</span>

<span class="c1">// Add a non-QoS upper mac, and disable rate control</span>
<span class="n">WifiMacHelper</span> <span class="n">wifiMac</span><span class="p">;</span>
<span class="n">wifi</span><span class="p">.</span><span class="n">SetRemoteStationManager</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantRateWifiManager&quot;</span><span class="p">,</span>
                              <span class="s">&quot;DataMode&quot;</span><span class="p">,</span><span class="n">StringValue</span> <span class="p">(</span><span class="n">phyMode</span><span class="p">),</span>
                              <span class="s">&quot;ControlMode&quot;</span><span class="p">,</span><span class="n">StringValue</span> <span class="p">(</span><span class="n">phyMode</span><span class="p">));</span>

<span class="c1">// Setup the rest of the upper mac</span>
<span class="n">Ssid</span> <span class="n">ssid</span> <span class="o">=</span> <span class="n">Ssid</span> <span class="p">(</span><span class="s">&quot;wifi-default&quot;</span><span class="p">);</span>
<span class="c1">// setup ap.</span>
<span class="n">wifiMac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::ApWifiMac&quot;</span><span class="p">,</span>
                 <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">));</span>
<span class="n">NetDeviceContainer</span> <span class="n">apDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">wifiPhy</span><span class="p">,</span> <span class="n">wifiMac</span><span class="p">,</span> <span class="n">ap</span><span class="p">);</span>
<span class="n">NetDeviceContainer</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">apDevice</span><span class="p">;</span>

<span class="c1">// setup sta.</span>
<span class="n">wifiMac</span><span class="p">.</span><span class="n">SetType</span> <span class="p">(</span><span class="s">&quot;ns3::StaWifiMac&quot;</span><span class="p">,</span>
                 <span class="s">&quot;Ssid&quot;</span><span class="p">,</span> <span class="n">SsidValue</span> <span class="p">(</span><span class="n">ssid</span><span class="p">),</span>
                 <span class="s">&quot;ActiveProbing&quot;</span><span class="p">,</span> <span class="n">BooleanValue</span> <span class="p">(</span><span class="nb">false</span><span class="p">));</span>
<span class="n">NetDeviceContainer</span> <span class="n">staDevice</span> <span class="o">=</span> <span class="n">wifi</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">wifiPhy</span><span class="p">,</span> <span class="n">wifiMac</span><span class="p">,</span> <span class="n">sta</span><span class="p">);</span>
<span class="n">devices</span><span class="p">.</span><span class="n">Add</span> <span class="p">(</span><span class="n">staDevice</span><span class="p">);</span>

<span class="c1">// Configure mobility</span>
<span class="n">MobilityHelper</span> <span class="n">mobility</span><span class="p">;</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">ListPositionAllocator</span><span class="o">&gt;</span> <span class="n">positionAlloc</span> <span class="o">=</span> <span class="n">CreateObject</span><span class="o">&lt;</span><span class="n">ListPositionAllocator</span><span class="o">&gt;</span> <span class="p">();</span>
<span class="n">positionAlloc</span><span class="o">-&gt;</span><span class="n">Add</span> <span class="p">(</span><span class="n">Vector</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
<span class="n">positionAlloc</span><span class="o">-&gt;</span><span class="n">Add</span> <span class="p">(</span><span class="n">Vector</span> <span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
<span class="n">positionAlloc</span><span class="o">-&gt;</span><span class="n">Add</span> <span class="p">(</span><span class="n">Vector</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">SetPositionAllocator</span> <span class="p">(</span><span class="n">positionAlloc</span><span class="p">);</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">SetMobilityModel</span> <span class="p">(</span><span class="s">&quot;ns3::ConstantPositionMobilityModel&quot;</span><span class="p">);</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">ap</span><span class="p">);</span>
<span class="n">mobility</span><span class="p">.</span><span class="n">Install</span> <span class="p">(</span><span class="n">sta</span><span class="p">);</span>

<span class="c1">// other set up (e.g. InternetStack, Application)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User Documentation</a><ul>
<li><a class="reference internal" href="#using-the-wifinetdevice">Using the WifiNetDevice</a><ul>
<li><a class="reference internal" href="#yanswifichannelhelper">YansWifiChannelHelper</a></li>
<li><a class="reference internal" href="#yanswifiphyhelper">YansWifiPhyHelper</a></li>
<li><a class="reference internal" href="#channel-frequency-and-channel-width-configuration">Channel, frequency, and channel width configuration</a><ul>
<li><a class="reference internal" href="#wifihelper-setstandard">WifiHelper::SetStandard()</a></li>
<li><a class="reference internal" href="#wifiphy-attribute-interactions">WifiPhy attribute interactions</a></li>
<li><a class="reference internal" href="#wifiphy-frequency">WifiPhy::Frequency</a></li>
<li><a class="reference internal" href="#wifiphy-channelwidth">WifiPhy::ChannelWidth</a></li>
<li><a class="reference internal" href="#wifiphy-channelnumber">WifiPhy::ChannelNumber</a></li>
<li><a class="reference internal" href="#defining-a-new-channel-number">Defining a new channel number</a></li>
<li><a class="reference internal" href="#order-of-operation-issues">Order of operation issues</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spectrumwifiphyhelper">SpectrumWifiPhyHelper</a></li>
<li><a class="reference internal" href="#wifimachelper">WifiMacHelper</a><ul>
<li><a class="reference internal" href="#selection-of-the-access-category-ac">Selection of the Access Category (AC)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wifihelper">WifiHelper</a></li>
<li><a class="reference internal" href="#ht-configuration">HT configuration</a></li>
<li><a class="reference internal" href="#vht-configuration">VHT configuration</a></li>
<li><a class="reference internal" href="#he-configuration">HE configuration</a></li>
<li><a class="reference internal" href="#mobility-configuration">Mobility configuration</a></li>
<li><a class="reference internal" href="#example-configuration">Example configuration</a><ul>
<li><a class="reference internal" href="#adhoc-wifinetdevice-configuration">AdHoc WifiNetDevice configuration</a></li>
<li><a class="reference internal" href="#infrastructure-access-point-and-clients-wifinetdevice-configuration">Infrastructure (access point and clients) WifiNetDevice configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="wifi-design.html"
                        title="previous chapter">Design Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="wifi-testing.html"
                        title="next chapter">Testing Documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/wifi-user.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="wifi-testing.html" title="Testing Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="wifi-design.html" title="Design Documentation"
             >previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="wifi.html" >Wi-Fi Module</a><span class="navelem">&nbsp;</span></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2019.
      Last updated on Apr 29, 2020 17:37.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.2.
    </div>
  </body>
</html>