
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1. Design documentation &#8212; Model Library</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/default.css?v=bb97339c" />
    <script src="_static/documentation_options.js?v=316584e3"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3.2. User Documentation" href="antenna-user.html" />
    <link rel="prev" title="3. Antenna Module" href="antenna.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico"
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>


  </head><body>
    <div id="titlearea">
      <table cellspacing="0" cellpadding="0" width="100%">
        <tbody>
          <tr style="height: 56px;">
            <td id="projectlogo">
              <a id="ns3_home1"
                 href="http://www.nsnam.org/">
                 <img alt="ns-3 Logo" style="background-color: unset;"
                      src="_static/ns-3-inverted-notext-small.png"/>
              </a>
            </td>
            <td id="projecttext">
              <div id="projectbrief">A Discrete-Event Network Simulator</div>
              <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
            </td>

            <td id="ns3-menu">
              <div class="menu">
                <ul >
                  <li style="background-image:none">
                    <a id="ns3_home2"
                         href="http://www.nsnam.org/"
                         >&nbsp;&nbsp;Home</a>
                  </li>
                  <li><span
                        onmouseover="mopen('mTuts')"
                        onmouseout="mclosetime()"
                          >Tutorials &nbsp;&#x25BC;</span>
                      <div id="mTuts"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_tut"
                           href="/docs/tutorial/html/index.html"
                            >English</a><br/>
                      </div>
                  </li>
                  <li><span
                        onmouseover="mopen('mDocs')"
                        onmouseout="mclosetime()"
                          >Documentation &nbsp;&#x25BC;</span>
                      <div id="mDocs"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_ins"
                           href="/docs/installation/html/index.html"
                           >Installation</a><br/>
                        <a id="ns3_man"
                           href="/docs/manual/html/index.html"
                           >Manual</a><br/>
                        <a id="ns3_mod"
                           href="/docs/models/html/index.html"
                           >Models</a><br/>
                        <a id="ns3_con"
                           href="/docs/contributing/html/index.html"
                           >Contributing</a><br/>
                        <a id="ns3_wiki"
                           href="http://www.nsnam.org/wiki"
                           >Wiki</a><br/>
                      </div>
                  </li>
                  <li><span
                        onmouseover="mopen('mDev')"
                        onmouseout="mclosetime()"
                          >Development &nbsp;&#x25BC;</span>
                      <div id="mDev"
                          onmouseover="mcancelclosetime()"
                          onmouseout="mclosetime()">
                        <a id="ns3_api"
                           href="/docs/doxygen/html/index.html"
                           >API Docs</a><br/>
                        <a id="ns3_bugs"
                         href="https://gitlab.com/nsnam/ns-3-dev/-/issues"
                           >Issue Tracker</a><br/>
                        <a id="ns3_merge"
                         href="https://gitlab.com/nsnam/ns-3-dev/-/merge_requests"
                           >Merge Requests</a><br/>
                      </div>
                  </li>
                </ul>
              </div>
            </td>

            <td id="projectsection">
              <span style="margin-right:10px">Models</span>
            </td>
          </tr>
        </tbody>
      </table>
      <script  type="text/javascript">ns3_write_links()</script>
    </div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="antenna-user.html" title="3.2. User Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="antenna.html" title="3. Antenna Module"
             accesskey="P">previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="antenna.html" accesskey="U"><span class="section-number">3. </span>Antenna Module</a><span class="navelem">&nbsp;</span></li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1. </span>Design documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="design-documentation">
<h1><span class="section-number">3.1. </span>Design documentation<a class="headerlink" href="#design-documentation" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2><span class="section-number">3.1.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The Antenna module provides:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>a class (Angles) and utility functions to deal with angles</p></li>
<li><p>a base class (AntennaModel) that provides an interface for the modeling of the radiation pattern of an antenna;</p></li>
<li><p>a set of classes derived from this base class that each models the radiation pattern of different types of antennas;</p></li>
<li><p>a base class (PhasedArrayModel) that provides a flexible interface for modeling a number of Phase Antenna Array (PAA) models</p></li>
<li><p>a class (UniformPlanarArray) derived from this base class, implementing a Uniform Planar Array (UPA) supporting both rectangular and linear lattices</p></li>
</ol>
</div></blockquote>
</section>
<section id="angles">
<h2><span class="section-number">3.1.2. </span>Angles<a class="headerlink" href="#angles" title="Link to this heading">¶</a></h2>
<p>The Angles class holds information about an angle in 3D space using spherical coordinates in radian units.
Specifically, it uses the azimuth-inclination convention, where</p>
<ul class="simple">
<li><p>Inclination is the angle between the zenith direction (positive z-axis) and the desired direction. It is included in the range [0, pi] radians.</p></li>
<li><p>Azimuth is the signed angle measured from the positive x-axis, where a positive direction goes towards the positive y-axis. It is included in the range [-pi, pi) radians.</p></li>
</ul>
<p>Multiple constructors are present, supporting the most common ways to encode information on a direction.
A static boolean variable allows the user to decide whether angles should be printed in radian or degree units.</p>
<p>A number of angle-related utilities are offered, such as radians/degree conversions, for both scalars and vectors, and angle wrapping.</p>
</section>
<section id="antennamodel">
<h2><span class="section-number">3.1.3. </span>AntennaModel<a class="headerlink" href="#antennamodel" title="Link to this heading">¶</a></h2>
<p>The AntennaModel uses the coordinate system adopted in <a class="reference internal" href="#balanis" id="id1"><span>[Balanis]</span></a> and
depicted in Figure <a class="reference internal" href="#fig-antenna-coordinate-system"><span class="std std-ref">Coordinate system of the AntennaModel</span></a>. This system
is obtained by translating the Cartesian coordinate system used by the
ns-3 MobilityModel into the new origin <img class="math" src="_images/math/c99a3a8536ea2d9844720cdf27f57bde44bfe52c.png" alt="o"/> which is the location
of the antenna, and then transforming the coordinates of every generic
point <img class="math" src="_images/math/141bbefb74014fc5e43499901bf78607ae335583.png" alt="p"/> of the space from Cartesian coordinates
<img class="math" src="_images/math/bbddf8102f08f7da59439138f9804ddd226c4ff9.png" alt="(x,y,z)"/> into spherical coordinates
<img class="math" src="_images/math/18ee10acec3b85dbf40af9c510677ae1d87d715b.png" alt="(r, \theta,\phi)"/>.
The antenna model neglects the radial component <img class="math" src="_images/math/79a3d439d28652c547386f39b555d90d3aaf102d.png" alt="r"/>, and
only considers the angle components <img class="math" src="_images/math/37bbd4cc87f19f560747ab3eafaae576aa236f1a.png" alt="(\theta, \phi)"/>. An antenna
radiation pattern is then expressed as a mathematical function
<img class="math" src="_images/math/dad3038eef47dfc9bd4372f68057820cf63499d5.png" alt="g(\theta, \phi) \longrightarrow \mathcal{R}"/> that returns the
gain (in dB) for each possible direction of
transmission/reception. All angles are expressed in radians.</p>
<figure class="align-center" id="id12">
<span id="fig-antenna-coordinate-system"></span><img alt="_images/antenna-coordinate-system.png" src="_images/antenna-coordinate-system.png" />
<figcaption>
<p><span class="caption-text">Coordinate system of the AntennaModel</span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="single-antenna-models">
<h2><span class="section-number">3.1.4. </span>Single antenna models<a class="headerlink" href="#single-antenna-models" title="Link to this heading">¶</a></h2>
<p>In this section we describe the antenna radiation pattern models that
are included within the antenna module.</p>
<section id="isotropicantennamodel">
<h3><span class="section-number">3.1.4.1. </span>IsotropicAntennaModel<a class="headerlink" href="#isotropicantennamodel" title="Link to this heading">¶</a></h3>
<p>This antenna radiation pattern model provides a unitary gain (0 dB)
for all direction.</p>
</section>
<section id="cosineantennamodel">
<h3><span class="section-number">3.1.4.2. </span>CosineAntennaModel<a class="headerlink" href="#cosineantennamodel" title="Link to this heading">¶</a></h3>
<p>This is the cosine model described in <a class="reference internal" href="#chunjian" id="id2"><span>[Chunjian]</span></a>: the antenna gain is
determined as:</p>
<div class="math">
<p><img src="_images/math/0501f83a80cfa30d9656f54e7c6e46d6795d96e4.png" alt="g(\phi, \theta) = \cos^{n} \left(\frac{\phi - \phi_{0}}{2}  \right)"/></p>
</div><p>where <img class="math" src="_images/math/a956602db46e7595fcc9cb2d525b135937059894.png" alt="\phi_{0}"/> is the azimuthal orientation of the antenna
(i.e., its direction of maximum gain) and the exponential</p>
<div class="math">
<p><img src="_images/math/8bf012f1a60ac32efe151cf00cdc403a1bdfa157.png" alt="n = -\frac{3}{20 \log_{10} \left( \cos \frac{\phi_{3dB}}{4} \right)}"/></p>
</div><p>determines the desired 3dB beamwidth <img class="math" src="_images/math/fce6d2ba692580bc0b0ceb7930982f2d493a47c2.png" alt="\phi_{3dB}"/>. Note that
this radiation pattern is independent of the inclination angle
<img class="math" src="_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>.</p>
<p>A major difference between the model of <a class="reference internal" href="#chunjian" id="id3"><span>[Chunjian]</span></a> and the one
implemented in the class CosineAntennaModel is that only the element
factor (i.e., what described by the above formulas) is considered. In
fact, <a class="reference internal" href="#chunjian" id="id4"><span>[Chunjian]</span></a> also considered an additional antenna array
factor. The reason why the latter is excluded is that we expect that
the average user would desire to specify a given beamwidth exactly,
without adding an array factor at a latter stage which would in
practice alter the effective beamwidth of the resulting radiation
pattern.</p>
</section>
<section id="parabolicantennamodel">
<h3><span class="section-number">3.1.4.3. </span>ParabolicAntennaModel<a class="headerlink" href="#parabolicantennamodel" title="Link to this heading">¶</a></h3>
<p>This model is based on the parabolic approximation of the main lobe radiation pattern. It is often used in the context of cellular system to model the radiation pattern of a cell sector, see for instance <a class="reference internal" href="#r4-092042a" id="id5"><span>[R4-092042a]</span></a> and <a class="reference internal" href="#calcev" id="id6"><span>[Calcev]</span></a>. The antenna gain in dB is determined as:</p>
<div class="math">
<p><img src="_images/math/61a84ea93f809aa7c07d91ce0b88ed3582713257.png" alt="g_{dB}(\phi, \theta) = -\min \left( 12 \left(\frac{\phi  - \phi_{0}}{\phi_{3dB}} \right)^2, A_{max} \right)"/></p>
</div><p>where <img class="math" src="_images/math/a956602db46e7595fcc9cb2d525b135937059894.png" alt="\phi_{0}"/> is the azimuthal orientation of the antenna
(i.e., its direction of maximum gain), <img class="math" src="_images/math/fce6d2ba692580bc0b0ceb7930982f2d493a47c2.png" alt="\phi_{3dB}"/> is its 3 dB
beamwidth, and <img class="math" src="_images/math/ba660177e8630ff885d97bcb1a73da10ef853427.png" alt="A_{max}"/> is the maximum attenuation in dB of the
antenna. Note that this radiation pattern is independent of the inclination angle
<img class="math" src="_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>.</p>
</section>
<section id="threegppantennamodel">
<h3><span class="section-number">3.1.4.4. </span>ThreeGppAntennaModel<a class="headerlink" href="#threegppantennamodel" title="Link to this heading">¶</a></h3>
<p>This model implements the antenna element described in <a class="footnote-reference brackets" href="#id11" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>38901<span class="fn-bracket">]</span></a>.
Parameters are fixed from the technical report, thus no attributes nor setters are provided.
The model is largely based on the <a class="reference internal" href="#parabolicantennamodel">ParabolicAntennaModel</a>.</p>
</section>
</section>
<section id="phased-array-model">
<h2><span class="section-number">3.1.5. </span>Phased Array Model<a class="headerlink" href="#phased-array-model" title="Link to this heading">¶</a></h2>
<p>The class PhasedArrayModel has been created with flexibility in mind.
It abstracts the basic idea of a Phased Antenna Array (PAA) by removing any constraint on the
position of each element, and instead generalizes the concept of steering and beamforming vectors,
solely based on the generalized location of the antenna elements.
For details on Phased Array Antennas see for instance <a class="reference internal" href="#mailloux" id="id8"><span>[Mailloux]</span></a>.</p>
<p>Derived classes must implement the following functions:</p>
<ul class="simple">
<li><p>GetNumberOfElements: returns the number of antenna elements</p></li>
<li><p>GetElementLocation: returns the location of the antenna element with the specified index, normalized with respect to the wavelength</p></li>
<li><p>GetElementFieldPattern: returns the horizontal and vertical components of the antenna element field pattern at the specified direction. Same polarization (configurable) for all antenna elements of the array is considered.</p></li>
</ul>
<p>The class PhasedArrayModel also assumes that all antenna elements are equal, a typical key assumption which allows to model the PAA field pattern as the sum of the array factor, given by the geometry of the location of the antenna elements, and the element field pattern.
Any class derived from AntennaModel is a valid antenna element for the PhasedArrayModel, allowing for a great flexibility of the framework.</p>
<section id="uniformplanararray">
<span id="gpp-antenna-model"></span><h3><span class="section-number">3.1.5.1. </span>UniformPlanarArray<a class="headerlink" href="#uniformplanararray" title="Link to this heading">¶</a></h3>
<p>The class UniformPlanarArray is a generic implementation of Uniform Planar Arrays (UPAs),
supporting rectangular and linear regular lattices.
It loosely follows the implementation described in the 3GPP TR 38.901 <a class="footnote-reference brackets" href="#id11" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>38901<span class="fn-bracket">]</span></a>,
considering only a single a single panel, i.e., <img class="math" src="_images/math/4ed359faa5c3c9fba1d1bfc6ef1925e6f5ea21af.png" alt="N_{g} = M_{g} = 1"/>.</p>
<p>By default, the array is orthogonal to the x-axis, pointing towards the positive
direction, but the orientation can be changed through the attributes “BearingAngle”,
which adjusts the azimuth angle, and “DowntiltAngle”, which adjusts the elevation angle.
The slant angle is instead fixed and assumed to be 0.</p>
<p>The number of antenna elements in the vertical and horizontal directions can be configured
through the attributes “NumRows” and “NumColumns”, while the spacing between the horizontal
and vertical elements can be configured through the attributes “AntennaHorizontalSpacing”
and “AntennaVerticalSpacing”.</p>
<p>The polarization of each antenna element in the array is determined by the polarization
slant angle through the attribute “PolSlantAngle”, as described in <a class="footnote-reference brackets" href="#id11" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>38901<span class="fn-bracket">]</span></a> (i.e., <img class="math" src="_images/math/67744a93eb9815d579a6086823ef779c602ae5c0.png" alt="{\zeta}"/>).</p>
<div role="list" class="citation-list">
<div class="citation" id="balanis" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">Balanis</a><span class="fn-bracket">]</span></span>
<p>C.A. Balanis, “Antenna Theory - Analysis and Design”,  Wiley, 2nd Ed.</p>
</div>
<div class="citation" id="chunjian" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>Chunjian<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id2">1</a>,<a role="doc-backlink" href="#id3">2</a>,<a role="doc-backlink" href="#id4">3</a>)</span>
<p>Li Chunjian, “Efficient Antenna Patterns for
Three-Sector WCDMA Systems”, Master of Science Thesis, Chalmers
University of Technology, Göteborg, Sweden, 2003</p>
</div>
<div class="citation" id="calcev" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">Calcev</a><span class="fn-bracket">]</span></span>
<p>George Calcev and Matt Dillon, “Antenna Tilt Control in
CDMA Networks”, in Proc. of the 2nd Annual International Wireless
Internet Conference (WICON), 2006</p>
</div>
<div class="citation" id="r4-092042a" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">R4-092042a</a><span class="fn-bracket">]</span></span>
<p>3GPP TSG RAN WG4 (Radio) Meeting #51, R4-092042, Simulation
assumptions and parameters for FDD HeNB RF requirements.</p>
</div>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id11" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>38901<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id7">1</a>,<a role="doc-backlink" href="#id9">2</a>,<a role="doc-backlink" href="#id10">3</a>)</span>
<p>3GPP. 2018. TR 38.901, Study on channel model for frequencies from 0.5 to 100 GHz, V15.0.0. (2018-06).</p>
</aside>
</aside>
<div role="list" class="citation-list">
<div class="citation" id="mailloux" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">Mailloux</a><span class="fn-bracket">]</span></span>
<p>Robert J. Mailloux, “Phased Array Antenna Handbook”, Artech House, 2nd Ed.</p>
</div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1. Design documentation</a><ul>
<li><a class="reference internal" href="#overview">3.1.1. Overview</a></li>
<li><a class="reference internal" href="#angles">3.1.2. Angles</a></li>
<li><a class="reference internal" href="#antennamodel">3.1.3. AntennaModel</a></li>
<li><a class="reference internal" href="#single-antenna-models">3.1.4. Single antenna models</a><ul>
<li><a class="reference internal" href="#isotropicantennamodel">3.1.4.1. IsotropicAntennaModel</a></li>
<li><a class="reference internal" href="#cosineantennamodel">3.1.4.2. CosineAntennaModel</a></li>
<li><a class="reference internal" href="#parabolicantennamodel">3.1.4.3. ParabolicAntennaModel</a></li>
<li><a class="reference internal" href="#threegppantennamodel">3.1.4.4. ThreeGppAntennaModel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#phased-array-model">3.1.5. Phased Array Model</a><ul>
<li><a class="reference internal" href="#uniformplanararray">3.1.5.1. UniformPlanarArray</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="antenna.html"
                          title="previous chapter"><span class="section-number">3. </span>Antenna Module</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="antenna-user.html"
                          title="next chapter"><span class="section-number">3.2. </span>User Documentation</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/antenna-design.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="antenna-user.html" title="3.2. User Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="antenna.html" title="3. Antenna Module"
             >previous</a> |</li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li class="nav-item nav-item-0"><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>

          <li class="nav-item nav-item-1"><a href="antenna.html" ><span class="section-number">3. </span>Antenna Module</a><span class="navelem">&nbsp;</span></li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1. </span>Design documentation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2006-2019.
      Last updated on Jan 19, 2024 11:44.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>